(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{8357:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,s=String.fromCharCode,o=Object.assign;function a(e){return e.trim()}function c(e,t,n){return e.replace(t,n)}function u(e,t){return e.indexOf(t)}function l(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,g=1,y=0,v=0,w=0,b="";function I(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:m,column:g,length:o,return:""}}function _(e,t){return o(I("",null,null,"",null,null,0),e,{length:-e.length},t)}function T(){return w=v>0?l(b,--v):0,g--,10===w&&(g=1,m--),w}function E(){return w=v<y?l(b,v++):0,g++,10===w&&(g=1,m++),w}function S(){return l(b,v)}function k(){return v}function A(e,t){return h(b,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x(e){return m=g=1,y=d(b=e),v=0,[]}function N(e){return b="",e}function R(e){return a(A(v-1,P(91===e?e+2:40===e?e+1:e)))}function D(e){for(;(w=S())&&w<33;)E();return C(e)>2||C(w)>3?"":" "}function O(e,t){for(;--t&&E()&&!(w<48||w>102||w>57&&w<65||w>70&&w<97););return A(e,k()+(t<6&&32==S()&&32==E()))}function P(e){for(;E();)switch(w){case e:return v;case 34:case 39:34!==e&&39!==e&&P(w);break;case 40:41===e&&P(e);break;case 92:E()}return v}function L(e,t){for(;E()&&e+w!==57&&(e+w!==84||47!==S()););return"/*"+A(t,v-1)+"*"+s(47===e?e:E())}function M(e){for(;!C(S());)E();return A(e,v)}var F="-ms-",V="-moz-",U="-webkit-",j="comm",B="rule",$="decl",q="@keyframes";function z(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function K(e,t,n,r){switch(e.type){case"@import":case $:return e.return=e.return||e.value;case j:return"";case q:return e.return=e.value+"{"+z(e.children,r)+"}";case B:e.value=e.props.join(",")}return d(n=z(e.children,r))?e.return=e.value+"{"+n+"}":""}function G(e,t){switch(function(e,t){return(((t<<2^l(e,0))<<2^l(e,1))<<2^l(e,2))<<2^l(e,3)}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+V+e+F+e+e;case 6828:case 4268:return U+e+F+e+e;case 6165:return U+e+F+"flex-"+e+e;case 5187:return U+e+c(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return U+e+F+"flex-item-"+c(e,/flex-|-self/,"")+e;case 4675:return U+e+F+"flex-line-pack"+c(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+F+c(e,"shrink","negative")+e;case 5292:return U+e+F+c(e,"basis","preferred-size")+e;case 6060:return U+"box-"+c(e,"-grow","")+U+e+F+c(e,"grow","positive")+e;case 4554:return U+c(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return c(c(c(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return c(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return c(c(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return c(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(l(e,t+1)){case 109:if(45!==l(e,t+4))break;case 102:return c(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+V+(108==l(e,t+3)?"$3":"$2-$3"))+e;case 115:return~u(e,"stretch")?G(c(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==l(e,t+1))break;case 6444:switch(l(e,d(e)-3-(~u(e,"!important")&&10))){case 107:return c(e,":",":"+U)+e;case 101:return c(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===l(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(l(e,t+11)){case 114:return U+e+F+c(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+F+c(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+F+c(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+F+e+e}return e}function W(e){return N(Z("",null,null,null,[""],e=x(e),0,[0],e))}function Z(e,t,n,r,i,o,a,l,h){for(var f=0,m=0,g=a,y=0,v=0,w=0,b=1,I=1,_=1,A=0,C="",x=i,N=o,P=r,F=C;I;)switch(w=A,A=E()){case 40:if(108!=w&&58==F.charCodeAt(g-1)){-1!=u(F+=c(R(A),"&","&\f"),"&\f")&&(_=-1);break}case 34:case 39:case 91:F+=R(A);break;case 9:case 10:case 13:case 32:F+=D(w);break;case 92:F+=O(k()-1,7);continue;case 47:switch(S()){case 42:case 47:p(Y(L(E(),k()),t,n),h);break;default:F+="/"}break;case 123*b:l[f++]=d(F)*_;case 125*b:case 59:case 0:switch(A){case 0:case 125:I=0;case 59+m:v>0&&d(F)-g&&p(v>32?Q(F+";",r,n,g-1):Q(c(F," ","")+";",r,n,g-2),h);break;case 59:F+=";";default:if(p(P=H(F,t,n,f,m,i,l,C,x=[],N=[],g),o),123===A)if(0===m)Z(F,t,P,P,x,o,g,l,N);else switch(y){case 100:case 109:case 115:Z(e,P,P,r&&p(H(e,P,P,0,0,i,l,C,i,x=[],g),N),i,N,g,l,r?x:N);break;default:Z(F,P,P,P,[""],N,0,l,N)}}f=m=v=0,b=_=1,C=F="",g=a;break;case 58:g=1+d(F),v=w;default:if(b<1)if(123==A)--b;else if(125==A&&0==b++&&125==T())continue;switch(F+=s(A),A*b){case 38:_=m>0?1:(F+="\f",-1);break;case 44:l[f++]=(d(F)-1)*_,_=1;break;case 64:45===S()&&(F+=R(E())),y=S(),m=g=d(C=F+=M(k())),A++;break;case 45:45===w&&2==d(F)&&(b=0)}}return o}function H(e,t,n,r,s,o,u,l,d,p,m){for(var g=s-1,y=0===s?o:[""],v=f(y),w=0,b=0,_=0;w<r;++w)for(var T=0,E=h(e,g+1,g=i(b=u[w])),S=e;T<v;++T)(S=a(b>0?y[T]+" "+E:c(E,/&\f/g,y[T])))&&(d[_++]=S);return I(e,t,n,0===s?B:l,d,p,m)}function Y(e,t,n){return I(e,t,n,j,s(w),h(e,2,-2),0)}function Q(e,t,n,r){return I(e,t,n,$,h(e,0,r),h(e,r+1,-1),r)}var X=function(e,t,n){for(var r=0,i=0;r=i,i=S(),38===r&&12===i&&(t[n]=1),!C(i);)E();return A(e,v)},J=function(e,t){return N(function(e,t){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===S()&&(t[n]=1),e[n]+=X(v-1,t,n);break;case 2:e[n]+=R(r);break;case 4:if(44===r){e[++n]=58===S()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=s(r)}}while(r=E());return e}(x(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],s=J(t,i),o=n.props,a=0,c=0;a<s.length;a++)for(var u=0;u<o.length;u++,c++)e.props[c]=i[a]?s[a].replace(/&\f/g,o[u]):o[u]+" "+s[a]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case $:e.return=G(e.value,e.length);break;case q:return z([_(e,{value:c(e.value,"@","@"+U)})],r);case B:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return z([_(e,{props:[c(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return z([_(e,{props:[c(t,/:(plac\w+)/,":-webkit-input-$1")]}),_(e,{props:[c(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[c(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var s,o,a={},c=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;c.push(e)}));var u,l,h=[K,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],d=function(e){var t=f(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([te,ne].concat(i,h));o=function(e,t,n,r){u=n,z(W(e?e+"{"+t.styles+"}":t.styles),d),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return p.sheet.hydrate(c),p}},9122:function(e,t,n){"use strict";var r=n(7866),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,r.Z)((function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.Z=s},7866:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},4478:function(e,t,n){"use strict";n.d(t,{O:function(){return m}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i=n(351),s=n(7866),o=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,c=function(e){return 45===e.charCodeAt(1)},u=function(e){return null!=e&&"boolean"!==typeof e},l=(0,s.Z)((function(e){return c(e)?e:e.replace(o,"-$&").toLowerCase()})),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(a,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===i.Z[e]||c(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return f={name:n.name,styles:n.styles,next:f},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)f={name:r.name,styles:r.styles,next:f},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":u(o)&&(r+=l(s)+":"+h(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=d(e,t,o);switch(s){case"animation":case"animationName":r+=l(s)+":"+a+";";break;default:r+=s+"{"+a+"}"}}else for(var c=0;c<o.length;c++)u(o[c])&&(r+=l(s)+":"+h(s,o[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=f,s=n(e);return f=i,d(e,t,s)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var f,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,s="";f=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,s+=d(n,t,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=d(n,t,e[a]),i&&(s+=o[a]);p.lastIndex=0;for(var c,u="";null!==(c=p.exec(s));)u+="-"+c[1];return{name:r(s)+u,styles:s,next:f}}},351:function(e,t){"use strict";t.Z={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},9003:function(e,t,n){"use strict";n.d(t,{$:function(){return it},A:function(){return u},E:function(){return ge},G:function(){return we},I:function(){return Se},K:function(){return X},L:function(){return xe},M:function(){return Oe},N:function(){return Pe},P:function(){return In},Q:function(){return Le},R:function(){return pn},T:function(){return De},U:function(){return Fe},V:function(){return Ve},W:function(){return $e},X:function(){return Qe},Y:function(){return Xe},Z:function(){return Je},_:function(){return et},a:function(){return jt},a0:function(){return st},a1:function(){return ot},a2:function(){return at},a3:function(){return ct},a4:function(){return ut},a5:function(){return lt},a6:function(){return ht},a7:function(){return dt},a8:function(){return ft},a9:function(){return pt},aA:function(){return qn},aB:function(){return Mn},aC:function(){return pe},aG:function(){return $t},aJ:function(){return Me},aa:function(){return mt},ab:function(){return gt},ae:function(){return yt},af:function(){return vt},ag:function(){return wt},aj:function(){return Ge},ak:function(){return At},am:function(){return Rt},an:function(){return Pt},ao:function(){return le},ap:function(){return T},aq:function(){return ue},ar:function(){return oe},as:function(){return g},at:function(){return hr},au:function(){return Zn},av:function(){return y},aw:function(){return I},ax:function(){return S},ay:function(){return J},az:function(){return Kn},b:function(){return Vt},c:function(){return xn},d:function(){return Rn},e:function(){return Nn},f:function(){return Un},g:function(){return Bn},h:function(){return jn},i:function(){return tn},j:function(){return $n},k:function(){return fr},l:function(){return yn},m:function(){return mr},o:function(){return c},r:function(){return vn},s:function(){return gn},t:function(){return Ct},u:function(){return bn},z:function(){return h}});var r=n(4444),i=n(2238);function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var o=n(3333),a=n(8463);const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},d=l,f=new r.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new o.Yd("@firebase/auth");function m(e,...t){p.logLevel<=o.in.ERROR&&p.error(`Auth (${i.SDK_VERSION}): ${e}`,...t)}function g(e,...t){throw b(e,...t)}function y(e,...t){return b(e,...t)}function v(e,t,n){const i=Object.assign(Object.assign({},d()),{[t]:n});return new r.LL("auth","Firebase",i).create(t,{appName:e.name})}function w(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&g(e,"argument-error"),v(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b(e,...t){if("string"!==typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return f.create(e,...t)}function I(e,t,...n){if(!e)throw b(t,...n)}function _(e){const t="INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function T(e,t){e||_(t)}const E=new Map;function S(e){T(e instanceof Function,"Expected a class definition");let t=E.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,E.set(e,t),t)}function k(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function A(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class x{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.uI)()||(0,r.b$)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(A()||(0,r.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function N(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class R{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const D={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},O=new x(3e4,6e4);function P(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function L(e,t,n,i,s={}){return M(e,s,(async()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=(0,r.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),R.fetch()(V(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))}))}async function M(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},D),t);try{const t=new U(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw j(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw j(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw j(e,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw v(e,a,o);g(e,a)}}catch(s){if(s instanceof r.ZR)throw s;g(e,"network-request-failed")}}async function F(e,t,n,r,i={}){const s=await L(e,t,n,r,i);return"mfaPendingCredential"in s&&g(e,"multi-factor-auth-required",{_serverResponse:s}),s}function V(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?N(e.config,i):`${e.config.apiScheme}://${i}`}class U{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(y(this.auth,"network-request-failed"))),O.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function j(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y(e,t,r);return i.customData._tokenResponse=n,i}function B(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function $(e){return 1e3*Number(e)}function q(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return m("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.tV)(n);return e?JSON.parse(e):(m("Failed to decode base64 JWT payload"),null)}catch(s){return m("Caught error parsing JWT payload as JSON",s),null}}async function z(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof r.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}class K{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=B(this.lastLoginAt),this.creationTime=B(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function W(e){var t;const n=e.auth,r=await e.getIdToken(),i=await z(e,async function(e,t){return L(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));I(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=s(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const c=(u=e.providerData,l=a,[...u.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var u,l;const h=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===c||void 0===c?void 0:c.length),f=!!h&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new G(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(e,p)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I("undefined"!==typeof e.idToken,"internal-error"),I("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=q(e);return I(t,"internal-error"),I("undefined"!==typeof t.exp,"internal-error"),I("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return I(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await M(e,{},(async()=>{const n=(0,r.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=V(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",R.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Z;return n&&(I("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(I("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(I("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return _("not implemented")}}function H(e,t){I("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Y{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=s(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new K(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await z(this,this.stsTokenManager.getToken(this.auth,e));return I(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,r.m9)(e),i=await n.getIdToken(t),s=q(i);I(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:B($(s.auth_time)),issuedAtTime:B($(s.iat)),expirationTime:B($(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.m9)(e);await W(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Y(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await W(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await z(this,async function(e,t){return L(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:T}=t;I(v&&T,e,"internal-error");const E=Z.fromJSON(this.name,T);I("string"===typeof v,e,"internal-error"),H(l,e.name),H(h,e.name),I("boolean"===typeof w,e,"internal-error"),I("boolean"===typeof b,e,"internal-error"),H(d,e.name),H(f,e.name),H(p,e.name),H(m,e.name),H(g,e.name),H(y,e.name);const S=new Y({uid:v,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,n=!1){const r=new Z;r.updateFromServerResponse(t);const i=new Y({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await W(i),i}}class Q{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Q.type="NONE";const X=Q;function J(e,t,n){return`firebase:${e}:${t}:${n}`}class ee{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=J(this.userKey,r.apiKey,i),this.fullPersistenceKey=J("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Y._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ee(S(X),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||S(X);const s=J(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=Y._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new ee(i,e,n)):new ee(i,e,n)}}function te(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(se(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ne(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ae(t))return"Blackberry";if(ce(t))return"Webos";if(re(t))return"Safari";if((t.includes("chrome/")||ie(t))&&!t.includes("edge/"))return"Chrome";if(oe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ne(e=(0,r.z$)()){return/firefox\//i.test(e)}function re(e=(0,r.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ie(e=(0,r.z$)()){return/crios\//i.test(e)}function se(e=(0,r.z$)()){return/iemobile/i.test(e)}function oe(e=(0,r.z$)()){return/android/i.test(e)}function ae(e=(0,r.z$)()){return/blackberry/i.test(e)}function ce(e=(0,r.z$)()){return/webos/i.test(e)}function ue(e=(0,r.z$)()){return/iphone|ipad|ipod/i.test(e)}function le(e=(0,r.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function he(e=(0,r.z$)()){return ue(e)||oe(e)||ce(e)||ae(e)||/windows phone/i.test(e)||se(e)}function de(e,t=[]){let n;switch(e){case"Browser":n=te((0,r.z$)());break;case"Worker":n=`${te((0,r.z$)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.SDK_VERSION}/${s}`}class fe{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new me(this),this.idTokenSubscription=new me(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=S(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ee.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e)):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===n||void 0===n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null===s||void 0===s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(I(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await W(e)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.m9)(e):null;return t&&I(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&I(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(S(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&S(e)||this._popupRedirectResolver;I(t,this,"argument-error"),this.redirectPersistenceManager=await ee.create(this,[S(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return I(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function pe(e){return(0,r.m9)(e)}class me{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.ne)((e=>this.observer=e))}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ge(e,t,n){const r=pe(e);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ye(t),{host:o,port:a}=function(e){const t=ye(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ve(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ve(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ye(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ve(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class we{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _("not implemented")}_getIdTokenResponse(e){return _("not implemented")}_linkToIdToken(e,t){return _("not implemented")}_getReauthenticationResolver(e){return _("not implemented")}}async function be(e,t){return L(e,"POST","/v1/accounts:resetPassword",P(e,t))}async function Ie(e,t){return L(e,"POST","/v1/accounts:update",t)}async function _e(e,t){return L(e,"POST","/v1/accounts:sendOobCode",P(e,t))}class Te extends we{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Te(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Te(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPassword",P(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))}(e,{email:this._email,oobCode:this._password});default:g(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ie(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:g(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ee(e,t){return F(e,"POST","/v1/accounts:signInWithIdp",P(e,t))}class Se extends we{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Se(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):g("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=s(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Se(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Ee(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ee(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ee(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.xO)(t)}return e}}const ke={USER_NOT_FOUND:"user-not-found"};class Ae extends we{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ae({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ae({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await F(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t));if(n.temporaryProof)throw j(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ke)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ae({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ce{constructor(e){var t,n,i,s,o,a;const c=(0,r.zd)((0,r.pd)(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,l=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);I(u&&l&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=l,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.zd)((0,r.pd)(e)).link,n=t?(0,r.zd)((0,r.pd)(t)).deep_link_id:null,i=(0,r.zd)((0,r.pd)(e)).deep_link_id;return(i?(0,r.zd)((0,r.pd)(i)).link:null)||i||n||t||e}(e);try{return new Ce(t)}catch(n){return null}}}class xe{constructor(){this.providerId=xe.PROVIDER_ID}static credential(e,t){return Te._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ce.parseLink(t);return I(n,"argument-error"),Te._fromEmailAndCode(e,n.code,n.tenantId)}}xe.PROVIDER_ID="password",xe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ne{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Re extends Ne{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class De extends Re{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return I("providerId"in t&&"signInMethod"in t,"argument-error"),Se._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return I(e.idToken||e.accessToken,"argument-error"),Se._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return De.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return De.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!n&&!r&&!t&&!i)return null;if(!o)return null;try{return new De(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}class Oe extends Re{constructor(){super("facebook.com")}static credential(e){return Se._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oe.credentialFromTaggedObject(e)}static credentialFromError(e){return Oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Oe.credential(e.oauthAccessToken)}catch(t){return null}}}Oe.FACEBOOK_SIGN_IN_METHOD="facebook.com",Oe.PROVIDER_ID="facebook.com";class Pe extends Re{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Se._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pe.credentialFromTaggedObject(e)}static credentialFromError(e){return Pe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Pe.credential(t,n)}catch(r){return null}}}Pe.GOOGLE_SIGN_IN_METHOD="google.com",Pe.PROVIDER_ID="google.com";class Le extends Re{constructor(){super("github.com")}static credential(e){return Se._fromParams({providerId:Le.PROVIDER_ID,signInMethod:Le.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Le.credentialFromTaggedObject(e)}static credentialFromError(e){return Le.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Le.credential(e.oauthAccessToken)}catch(t){return null}}}Le.GITHUB_SIGN_IN_METHOD="github.com",Le.PROVIDER_ID="github.com";class Me extends we{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ee(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ee(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ee(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Me(n,i):null}static _create(e,t){return new Me(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fe extends Ne{constructor(e){I(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Fe.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Fe.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Me.fromJSON(e);return I(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Me._create(n,t)}catch(r){return null}}}class Ve extends Re{constructor(){super("twitter.com")}static credential(e,t){return Se._fromParams({providerId:Ve.PROVIDER_ID,signInMethod:Ve.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ve.credentialFromTaggedObject(e)}static credentialFromError(e){return Ve.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ve.credential(t,n)}catch(r){return null}}}async function Ue(e,t){return F(e,"POST","/v1/accounts:signUp",P(e,t))}Ve.TWITTER_SIGN_IN_METHOD="twitter.com",Ve.PROVIDER_ID="twitter.com";class je{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Y._fromIdTokenResponse(e,n,r),s=Be(n);return new je({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Be(n);return new je({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Be(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function $e(e){var t;const n=pe(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new je({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Ue(n,{returnSecureToken:!0}),i=await je._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}class qe extends r.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,qe.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new qe(e,t,n,r)}}function ze(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw qe._fromErrorAndOperation(e,n,t,r);throw n}))}function Ke(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function Ge(e,t){const n=(0,r.m9)(e);await Ze(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return L(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),s=Ke(i||[]);return n.providerData=n.providerData.filter((e=>s.has(e.providerId))),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function We(e,t,n=!1){const r=await z(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return je._forOperation(e,"link",r)}async function Ze(e,t,n){await W(t);const r=!1===e?"provider-already-linked":"no-such-provider";I(Ke(t.providerData).has(n)===e,t.auth,r)}async function He(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await z(e,ze(r,i,t,e),n);I(s.idToken,r,"internal-error");const o=q(s.idToken);I(o,r,"internal-error");const{sub:a}=o;return I(e.uid===a,r,"user-mismatch"),je._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&g(r,"user-mismatch"),s}}async function Ye(e,t,n=!1){const r="signIn",i=await ze(e,r,t),s=await je._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Qe(e,t){return Ye(pe(e),t)}async function Xe(e,t){const n=(0,r.m9)(e);return await Ze(!1,n,t.providerId),We(n,t)}async function Je(e,t){return He((0,r.m9)(e),t)}async function et(e,t){const n=pe(e),r=await async function(e,t){return F(e,"POST","/v1/accounts:signInWithCustomToken",P(e,t))}(n,{token:t,returnSecureToken:!0}),i=await je._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class tt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?nt._fromServerResponse(e,t):g(e,"internal-error")}}class nt extends tt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new nt(t)}}function rt(e,t,n){var r;I((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),I("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(I(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(I(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function it(e,t,n){const i=(0,r.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&rt(i,s,n),await async function(e,t){return _e(e,t)}(i,s)}async function st(e,t,n){await be((0,r.m9)(e),{oobCode:t,newPassword:n})}async function ot(e,t){await async function(e,t){return L(e,"POST","/v1/accounts:update",P(e,t))}((0,r.m9)(e),{oobCode:t})}async function at(e,t){const n=(0,r.m9)(e),i=await be(n,{oobCode:t}),s=i.requestType;switch(I(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":I(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":I(i.mfaInfo,n,"internal-error");default:I(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=tt._fromServerResponse(pe(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function ct(e,t){const{data:n}=await at((0,r.m9)(e),t);return n.email}async function ut(e,t,n){const r=pe(e),i=await Ue(r,{returnSecureToken:!0,email:t,password:n}),s=await je._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function lt(e,t,n){return Qe((0,r.m9)(e),xe.credential(t,n))}async function ht(e,t,n){const i=(0,r.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};I(n.handleCodeInApp,i,"argument-error"),n&&rt(i,s,n),await async function(e,t){return _e(e,t)}(i,s)}function dt(e,t){const n=Ce.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}async function ft(e,t,n){const i=(0,r.m9)(e),s=xe.credentialWithLink(t,n||k());return I(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Qe(i,s)}async function pt(e,t){const n={identifier:t,continueUri:A()?k():"http://localhost"},{signinMethods:i}=await async function(e,t){return L(e,"POST","/v1/accounts:createAuthUri",P(e,t))}((0,r.m9)(e),n);return i||[]}async function mt(e,t){const n=(0,r.m9)(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&rt(n.auth,i,t);const{email:s}=await async function(e,t){return _e(e,t)}(n.auth,i);s!==e.email&&await e.reload()}async function gt(e,t,n){const i=(0,r.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&rt(i.auth,s,n);const{email:o}=await async function(e,t){return _e(e,t)}(i.auth,s);o!==e.email&&await e.reload()}async function yt(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=(0,r.m9)(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await z(i,async function(e,t){return L(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((({providerId:e})=>"password"===e));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function vt(e,t){return bt((0,r.m9)(e),t,null)}function wt(e,t){return bt((0,r.m9)(e),null,t)}async function bt(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await z(e,Ie(r,i));await e._updateTokensIfNecessary(s,!0)}class It{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class _t extends It{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Tt extends It{constructor(e,t){super(e,"facebook.com",t)}}class Et extends _t{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class St extends It{constructor(e,t){super(e,"google.com",t)}}class kt extends _t{constructor(e,t,n){super(e,"twitter.com",t,n)}}function At(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=q(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new It(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Tt(s,i);case"github.com":return new Et(s,i);case"google.com":return new St(s,i);case"twitter.com":return new kt(s,i,e.screenName||null);case"custom":case"anonymous":return new It(s,null);default:return new It(s,r,i)}}(n)}function Ct(e,t,n,i){return(0,r.m9)(e).onAuthStateChanged(t,n,i)}class xt{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new xt("enroll",e)}static _fromMfaPendingCredential(e){return new xt("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return xt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return xt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Nt{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=pe(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>tt._fromServerResponse(n,e)));I(r.mfaPendingCredential,n,"internal-error");const s=xt._fromMfaPendingCredential(r.mfaPendingCredential);return new Nt(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await je._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return I(t.user,n,"internal-error"),je._forOperation(t.user,t.operationType,o);default:g(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Rt(e,t){var n;const i=(0,r.m9)(e),s=t;return I(t.customData.operationType,i,"argument-error"),I(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),Nt._fromError(i,s)}class Dt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>tt._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Dt(e)}async getSession(){return xt._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),i=await z(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken(),r=await z(this.user,(i=this.user.auth,s={idToken:n,mfaEnrollmentId:t},L(i,"POST","/v2/accounts/mfaEnrollment:withdraw",P(i,s))));var i,s;this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(o){if("auth/user-token-expired"!==o.code)throw o}}}const Ot=new WeakMap;function Pt(e){const t=(0,r.m9)(e);return Ot.has(t)||Ot.set(t,Dt._fromUser(t)),Ot.get(t)}const Lt="__sak";class Mt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lt,"1"),this.storage.removeItem(Lt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ft extends Mt{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.z$)();return re(e)||ue(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=he(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,r.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ft.type="LOCAL";const Vt=Ft;class Ut extends Mt{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ut.type="SESSION";const jt=Ut;class Bt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Bt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function $t(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Bt.receivers=[];class qt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=$t("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function zt(){return window}function Kt(){return"undefined"!==typeof zt().WorkerGlobalScope&&"function"===typeof zt().importScripts}const Gt="firebaseLocalStorageDb",Wt="firebaseLocalStorage",Zt="fbase_key";class Ht{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Yt(e,t){return e.transaction([Wt],t?"readwrite":"readonly").objectStore(Wt)}function Qt(){const e=indexedDB.open(Gt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Wt,{keyPath:Zt})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Wt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Gt);return new Ht(e).toPromise()}(),t(await Qt()))}))}))}async function Xt(e,t,n){const r=Yt(e,!0).put({[Zt]:t,value:n});return new Ht(r).toPromise()}function Jt(e,t){const n=Yt(e,!0).delete(t);return new Ht(n).toPromise()}class en{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Qt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bt._getInstance(Kt()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new qt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qt();return await Xt(e,Lt,"1"),await Jt(e,Lt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Xt(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Yt(e,!1).get(t),r=await new Ht(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Jt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Yt(e,!1).getAll();return new Ht(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}en.type="LOCAL";const tn=en;function nn(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function rn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const sn=1e12;class on{constructor(e){this.auth=e,this.counter=sn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new an(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||sn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||sn;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||sn;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class an{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;I(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cn=rn("rcb"),un=new x(3e4,6e4);class ln{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!zt().grecaptcha}load(e,t=""){return I(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(zt().grecaptcha):new Promise(((n,i)=>{const s=zt().setTimeout((()=>{i(y(e,"network-request-failed"))}),un.get());zt()[cn]=()=>{zt().clearTimeout(s),delete zt()[cn];const r=zt().grecaptcha;if(!r)return void i(y(e,"internal-error"));const o=r.render;r.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(r)};nn(`https://www.google.com/recaptcha/api.js??${(0,r.xO)({onload:cn,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(s),i(y(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!zt().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hn{async load(e){return new on(e)}clearedOneInstance(){}}const dn="recaptcha",fn={theme:"light",type:"image"};class pn{constructor(e,t=Object.assign({},fn),n){this.parameters=t,this.type=dn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pe(n),this.isInvisible="invisible"===this.parameters.size,I("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof e?document.getElementById(e):e;I(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hn:new ln,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){I(!this.parameters.sitekey,this.auth,"argument-error"),I(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),I("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=zt()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){I(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){I(A()&&!Kt(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await L(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);I(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return I(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ae._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function gn(e,t,n){const i=pe(e),s=await wn(i,t,(0,r.m9)(n));return new mn(s,(e=>Qe(i,e)))}async function yn(e,t,n){const i=(0,r.m9)(e);await Ze(!1,i,"phone");const s=await wn(i.auth,t,(0,r.m9)(n));return new mn(s,(e=>Xe(i,e)))}async function vn(e,t,n){const i=(0,r.m9)(e),s=await wn(i.auth,t,(0,r.m9)(n));return new mn(s,(e=>Je(i,e)))}async function wn(e,t,n){var r;const i=await n.verify();try{let s;if(I("string"===typeof i,e,"argument-error"),I(n.type===dn,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){I("enroll"===t.type,e,"internal-error");const n=await function(e,t){return L(e,"POST","/v2/accounts/mfaEnrollment:start",P(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{I("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;I(n,e,"missing-multi-factor-info");const o=await function(e,t){return L(e,"POST","/v2/accounts/mfaSignIn:start",P(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return L(e,"POST","/v1/accounts:sendVerificationCode",P(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}async function bn(e,t){await We((0,r.m9)(e),t)}class In{constructor(e){this.providerId=In.PROVIDER_ID,this.auth=pe(e)}verifyPhoneNumber(e,t){return wn(this.auth,e,(0,r.m9)(t))}static credential(e,t){return Ae._fromVerification(e,t)}static credentialFromResult(e){const t=e;return In.credentialFromTaggedObject(t)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ae._fromTokenResponse(t,n):null}}function _n(e,t){return t?S(t):(I(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}In.PROVIDER_ID="phone",In.PHONE_SIGN_IN_METHOD="phone";class Tn extends we{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ee(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ee(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ee(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function En(e){return Ye(e.auth,new Tn(e),e.bypassAuthState)}function Sn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),He(n,new Tn(e),e.bypassAuthState)}async function kn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),We(n,new Tn(e),e.bypassAuthState)}class An{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return En;case"linkViaPopup":case"linkViaRedirect":return kn;case"reauthViaPopup":case"reauthViaRedirect":return Sn;default:g(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cn=new x(2e3,1e4);async function xn(e,t,n){const r=pe(e);w(e,t,Ne);const i=_n(r,n);return new Dn(r,"signInViaPopup",t,i).executeNotNull()}async function Nn(e,t,n){const i=(0,r.m9)(e);w(i.auth,t,Ne);const s=_n(i.auth,n);return new Dn(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function Rn(e,t,n){const i=(0,r.m9)(e);w(i.auth,t,Ne);const s=_n(i.auth,n);return new Dn(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class Dn extends An{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Dn.currentPopupAction&&Dn.currentPopupAction.cancel(),Dn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return I(e,this.auth,"internal-error"),e}async onExecution(){T(1===this.filter.length,"Popup operations only handle one event");const e=$t();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(y(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Cn.get())};e()}}Dn.currentPopupAction=null;const On=new Map;class Pn extends An{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=On.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Vn(t),r=Fn(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}On.set(this.auth._key(),e)}return this.bypassAuthState||On.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Ln(e,t){return Fn(e)._set(Vn(t),"true")}function Mn(){On.clear()}function Fn(e){return S(e._redirectPersistence)}function Vn(e){return J("pendingRedirect",e.config.apiKey,e.name)}function Un(e,t,n){return async function(e,t,n){const r=pe(e);w(e,t,Ne);const i=_n(r,n);return await Ln(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function jn(e,t,n){return async function(e,t,n){const i=(0,r.m9)(e);w(i.auth,t,Ne);const s=_n(i.auth,n);await Ln(s,i.auth);const o=await zn(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}(e,t,n)}function Bn(e,t,n){return async function(e,t,n){const i=(0,r.m9)(e);w(i.auth,t,Ne);const s=_n(i.auth,n);await Ze(!1,i,t.providerId),await Ln(s,i.auth);const o=await zn(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}(e,t,n)}async function $n(e,t){return await pe(e)._initializationPromise,qn(e,t,!1)}async function qn(e,t,n=!1){const r=pe(e),i=_n(r,t),s=new Pn(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function zn(e){const t=$t(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Kn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Wn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gn(e))}saveEventToCache(e){this.cachedEventUids.add(Gn(e)),this.lastProcessedEventTime=Date.now()}}function Gn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Wn({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null===t||void 0===t?void 0:t.code)}async function Zn(e,t={}){return L(e,"GET","/v1/projects",t)}const Hn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yn=/^https?/;function Qn(e){const t=k(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Yn.test(n))return!1;if(Hn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Xn=new x(3e4,6e4);function Jn(){const e=zt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let er=null;function tr(e){return er=er||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Jn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Jn(),n(y(e,"network-request-failed"))},timeout:Xn.get()})}if(null===(i=null===(r=zt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=zt().gapi)||void 0===s?void 0:s.load)){const t=rn("iframefcb");return zt()[t]=()=>{gapi.load?o():n(y(e,"network-request-failed"))},nn(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw er=null,e}))}(e),er}const nr=new x(5e3,15e3),rr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ir=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sr(e){const t=e.config;I(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?N(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:i.SDK_VERSION},o=ir.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,r.xO)(s).slice(1)}`}const or={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ar{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function cr(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},or),{width:i.toString(),height:s.toString(),top:o,left:a}),l=(0,r.z$)().toLowerCase();n&&(c=ie(l)?"_blank":n),ne(l)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,r.z$)()){var t;return ue(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new ar(null);const d=window.open(t||"",c,h);I(d,e,"popup-blocked");try{d.focus()}catch(f){}return new ar(d)}const ur="__/auth/handler",lr="emulator/auth/handler";function hr(e,t,n,s,o,a){I(e.config.authDomain,e,"auth-domain-config-required"),I(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.SDK_VERSION,eventId:o};if(t instanceof Ne){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,r.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof Re){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const u=c;for(const r of Object.keys(u))void 0===u[r]&&delete u[r];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${ur}`;return N(e,lr)}(e)}?${(0,r.xO)(u).slice(1)}`}const dr="webStorageSupport";const fr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jt,this._completeRedirectFn=qn}async _openPopup(e,t,n,r){var i;T(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return cr(e,hr(e,t,n,k(),r),$t())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=hr(e,t,n,k(),r),zt().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await tr(e),n=zt().gapi;return I(n,e,"internal-error"),t.open({where:document.body,url:sr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rr,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=y(e,"network-request-failed"),s=zt().setTimeout((()=>{r(i)}),nr.get());function o(){zt().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Kn(e);return t.register("authEvent",(t=>{I(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dr,{type:dr},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),g(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Zn(e);for(const r of t)try{if(Qn(r))return}catch(n){}g(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return he()||re()||ue()}};class pr extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new pr(e)}_finalizeEnroll(e,t,n){return function(e,t){return L(e,"POST","/v2/accounts/mfaEnrollment:finalize",P(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return L(e,"POST","/v2/accounts/mfaSignIn:finalize",P(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class mr{constructor(){}static assertion(e){return pr._fromCredential(e)}}mr.FACTOR_ID="phone";var gr,yr="@firebase/auth",vr="0.19.12";class wr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}gr="Browser",(0,i._registerComponent)(new a.wA("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{I(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),I(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:gr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(gr)},o=new fe(e,n,r);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(S);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,i._registerComponent)(new a.wA("auth-internal",(e=>(e=>new wr(e))(pe(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.registerVersion)(yr,vr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(gr)),(0,i.registerVersion)(yr,vr,"esm2017")},1294:function(e,t,n){"use strict";n.d(t,{u7:function(){return pp},Jj:function(){return lf},IX:function(){return Zd},my:function(){return Fd},xU:function(){return qf},Lz:function(){return uf},WA:function(){return Lr},F8:function(){return df},$q:function(){return zf},W:function(){return Kf},EK:function(){return Qr},PU:function(){return yp},l7:function(){return yi},Ky:function(){return Ii},Xb:function(){return si},Cf:function(){return Dd},K9:function(){return Dr},Me:function(){return ai},yq:function(){return Cr},Wi:function(){return Cd},ET:function(){return xp},Ab:function(){return Up},vr:function(){return Vp},Fc:function(){return tf},hJ:function(){return jd},B$:function(){return Bd},at:function(){return Md},oe:function(){return Cp},AK:function(){return Mp},TF:function(){return sf},JU:function(){return $d},ST:function(){return Xd},fH:function(){return Jd},Ix:function(){return rf},Wu:function(){return up},Lx:function(){return cp},qY:function(){return Yd},GL:function(){return Dp},QT:function(){return wp},kl:function(){return Ip},Xk:function(){return _p},PL:function(){return Tp},UQ:function(){return Ep},zN:function(){return Sp},nP:function(){return jp},b9:function(){return np},vh:function(){return rp},Pb:function(){return of},L$:function(){return af},cf:function(){return Np},sc:function(){return Rp},Xo:function(){return ep},IO:function(){return Yf},iE:function(){return zd},Eo:function(){return qd},i3:function(){return Lp},Bt:function(){return Fp},pl:function(){return kp},Ub:function(){return Sr},qK:function(){return Wf},TQ:function(){return op},e0:function(){return sp},r7:function(){return Ap},Mx:function(){return nf},ar:function(){return Xf}});var r,i=n(2238),s=n(8463),o=n(3333),a=n(4444),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},u={},l=l||{},h=c||self;function d(){}function f(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function I(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function _(){this.s=this.s,this.o=this.o}var T={};_.prototype.s=!1,_.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,m)&&e[m]||(e[m]=++g)}(this);delete T[e]}},_.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},S=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"===typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function k(e){return Array.prototype.concat.apply([],arguments)}function A(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function C(e){return/^[\s\xa0]*$/.test(e)}var x,N=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function R(e,t){return-1!=e.indexOf(t)}function D(e,t){return e<t?-1:e>t?1:0}e:{var O=h.navigator;if(O){var P=O.userAgent;if(P){x=P;break e}}x=""}function L(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function M(e){const t={};for(const n in e)t[n]=e[n];return t}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<F.length;t++)n=F[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function U(e){return U[" "](e),e}U[" "]=d;var j,B=R(x,"Opera"),$=R(x,"Trident")||R(x,"MSIE"),q=R(x,"Edge"),z=q||$,K=R(x,"Gecko")&&!(R(x.toLowerCase(),"webkit")&&!R(x,"Edge"))&&!(R(x,"Trident")||R(x,"MSIE"))&&!R(x,"Edge"),G=R(x.toLowerCase(),"webkit")&&!R(x,"Edge");function W(){var e=h.document;return e?e.documentMode:void 0}e:{var Z="",H=function(){var e=x;return K?/rv:([^\);]+)(\)|;)/.exec(e):q?/Edge\/([\d\.]+)/.exec(e):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):G?/WebKit\/(\S+)/.exec(e):B?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(H&&(Z=H?H[1]:""),$){var Y=W();if(null!=Y&&Y>parseFloat(Z)){j=String(Y);break e}}j=Z}var Q,X={};function J(){return function(e){var t=X;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=N(String(j)).split("."),n=N("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=D(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==i[2].length,0==s[2].length)||D(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}))}if(h.document&&$){var ee=W();Q=ee||(parseInt(j,10)||void 0)}else Q=void 0;var te=Q,ne=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{h.addEventListener("test",d,t),h.removeEventListener("test",d,t)}catch(n){}return e}();function re(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ie(e,t){if(re.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(K){e:{try{U(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:se[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ie.Z.h.call(this)}}re.prototype.h=function(){this.defaultPrevented=!0},I(ie,re);var se={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),ae=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ae,this.ca=this.fa=!1}function ue(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function le(e){this.src=e,this.g={},this.h=0}function he(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=E(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ue(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function de(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}le.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=de(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ce(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var fe="closure_lm_"+(1e6*Math.random()|0),pe={};function me(e,t,n,r,i){if(r&&r.once)return ye(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)me(e,t[s],n,r,i);return null}return n=Ee(n),e&&e[oe]?e.N(t,n,p(r)?!!r.capture:!!r,i):ge(e,t,n,!1,r,i)}function ge(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=p(i)?!!i.capture:!!i,a=_e(e);if(a||(e[fe]=a=new le(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ie;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ne||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ye(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ye(e,t[s],n,r,i);return null}return n=Ee(n),e&&e[oe]?e.O(t,n,p(r)?!!r.capture:!!r,i):ge(e,t,n,!0,r,i)}function ve(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ve(e,t[s],n,r,i);else r=p(r)?!!r.capture:!!r,n=Ee(n),e&&e[oe]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=de(s=e.g[t],n,r,i))&&(ue(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=_e(e))&&(t=e.g[t.toString()],e=-1,t&&(e=de(t,n,r,i)),(n=-1<e?t[e]:null)&&we(n))}function we(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[oe])he(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_e(t))?(he(n,e),0==n.h&&(n.src=null,t[fe]=null)):ue(e)}}}function be(e){return e in pe?pe[e]:pe[e]="on"+e}function Ie(e,t){if(e.ca)e=!0;else{t=new ie(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function _e(e){return(e=e[fe])instanceof le?e:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(e){return"function"===typeof e?e:(e[Te]||(e[Te]=function(t){return e.handleEvent(t)}),e[Te])}function Se(){_.call(this),this.i=new le(this),this.P=this,this.I=null}function ke(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new re(t,e);else if(t instanceof re)t.target=t.target||e;else{var i=t;V(t=new re(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Ae(o,r,!0,t)&&i}if(i=Ae(o=t.g=e,r,!0,t)&&i,i=Ae(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Ae(o=t.g=n[s],r,!1,t)&&i}function Ae(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&he(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}I(Se,_),Se.prototype[oe]=!0,Se.prototype.removeEventListener=function(e,t,n,r){ve(this,e,t,n,r)},Se.prototype.M=function(){if(Se.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ue(n[r]);delete t.g[e],t.h--}}this.I=null},Se.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Se.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ce=h.JSON.stringify;function xe(){var e=Me;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ne,Re=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new De),(e=>e.reset()));class De{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Oe(e){h.setTimeout((()=>{throw e}),0)}function Pe(e,t){Ne||function(){var e=h.Promise.resolve(void 0);Ne=function(){e.then(Fe)}}(),Le||(Ne(),Le=!0),Me.add(e,t)}var Le=!1,Me=new class{constructor(){this.h=this.g=null}add(e,t){const n=Re.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Fe(){for(var e;e=xe();){try{e.h.call(e.g)}catch(n){Oe(n)}var t=Re;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Le=!1}function Ve(e,t){Se.call(this),this.h=e||1,this.g=t||h,this.j=w(this.kb,this),this.l=Date.now()}function Ue(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function je(e,t,n){if("function"===typeof e)n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function Be(e){e.g=je((()=>{e.g=null,e.i&&(e.i=!1,Be(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}I(Ve,Se),(r=Ve.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ke(this,"tick"),this.da&&(Ue(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Ve.Z.M.call(this),Ue(this),delete this.g};class $e extends _{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Be(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qe(e){_.call(this),this.h=e,this.g={}}I(qe,_);var ze=[];function Ke(e,t,n,r){Array.isArray(n)||(n&&(ze[0]=n.toString()),n=ze);for(var i=0;i<n.length;i++){var s=me(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ge(e){L(e.g,(function(e,t){this.g.hasOwnProperty(t)&&we(e)}),e),e.g={}}function We(){this.g=!0}function Ze(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ce(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}qe.prototype.M=function(){qe.Z.M.call(this),Ge(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},We.prototype.Aa=function(){this.g=!1},We.prototype.info=function(){};var He={},Ye=null;function Qe(){return Ye=Ye||new Se}function Xe(e){re.call(this,He.Ma,e)}function Je(e){const t=Qe();ke(t,new Xe(t,e))}function et(e,t){re.call(this,He.STAT_EVENT,e),this.stat=t}function tt(e){const t=Qe();ke(t,new et(t,e))}function nt(e,t){re.call(this,He.Na,e),this.size=t}function rt(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){e()}),t)}He.Ma="serverreachability",I(Xe,re),He.STAT_EVENT="statevent",I(et,re),He.Na="timingevent",I(nt,re);var it={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},st={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ot(){}function at(e){return e.h||(e.h=e.i())}function ct(){}ot.prototype.h=null;var ut,lt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ht(){re.call(this,"d")}function dt(){re.call(this,"c")}function ft(){}function pt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new qe(this),this.P=gt,e=z?125:void 0,this.W=new Ve(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}I(ht,re),I(dt,re),I(ft,ot),ft.prototype.g=function(){return new XMLHttpRequest},ft.prototype.i=function(){return{}},ut=new ft;var gt=45e3,yt={},vt={};function wt(e,t,n){e.K=1,e.v=$t(Mt(t)),e.s=n,e.U=!0,bt(e,null)}function bt(e,t){e.F=Date.now(),Et(e),e.A=Mt(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),tn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new mt,e.g=rr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new $e(w(e.Ia,e,e.g),e.O)),Ke(e.V,e.g,"readystatechange",e.gb),t=e.H?M(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Je(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function It(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function _t(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=Tt(e,n),r==vt){4==t&&(e.o=4,tt(14),i=!1),Ze(e.j,e.m,null,"[Incomplete Response]");break}if(r==yt){e.o=4,tt(15),Ze(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ze(e.j,e.m,r,null),xt(e,r)}It(e)&&r!=vt&&r!=yt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,tt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hn(t),t.L=!0,tt(11))):(Ze(e.j,e.m,n,"[Invalid Chunked Response]"),Ct(e),At(e))}function Tt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vt:(n=Number(t.substring(n,r)),isNaN(n)?yt:(r+=1)+n>t.length?vt:(t=t.substr(r,n),e.C=r+n,t))}function Et(e){e.Y=Date.now()+e.P,St(e,e.P)}function St(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=rt(w(e.eb,e),t)}function kt(e){e.B&&(h.clearTimeout(e.B),e.B=null)}function At(e){0==e.l.G||e.I||Xn(e.l,e)}function Ct(e){kt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ue(e.W),Ge(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function xt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||un(n.i,e)))if(n.I=e.N,!e.J&&un(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Qn(n),jn(n)}Zn(n),tt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=rt(w(n.ab,n),6e3));if(1>=cn(n.i)&&n.ka){try{n.ka()}catch(u){}n.ka=void 0}}else er(n,11)}else if((e.J||n.g==e)&&Qn(n),!C(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=u[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(R(e,"spdy")||R(e,"quic")||R(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(ln(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,Bt(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=nr(r,r.H?r.la:null,r.W),o.J){hn(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(kt(a),Et(a)),r.g=o}else Wn(r);0<n.l.length&&qn(n)}else"stop"!=u[0]&&"close"!=u[0]||er(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?er(n,7):Un(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}Je(4)}catch(u){}}function Nt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"===typeof e)S(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(f(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Rt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Rt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Dt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ot(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ot(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=pt.prototype).setTimeout=function(e){this.P=e},r.gb=function(e){e=e.target;const t=this.L;t&&3==Pn(e)?t.l():this.Ia(e)},r.Ia=function(e){try{if(e==this.g)e:{const l=Pn(this.g);var t=this.g.Da();const d=this.g.ba();if(!(3>l)&&(3!=l||z||this.g&&(this.h.h||this.g.ga()||Ln(this.g)))){this.I||4!=l||7==t||Je(8==t||0>=d?3:2),kt(this);var n=this.g.ba();this.N=n;t:if(It(this)){var r=Ln(this.g);e="";var i=r.length,s=4==Pn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ct(this),At(this);var o="";break t}this.h.i=new h.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,tt(12),Ct(this),At(this);break e}Ze(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xt(this,n)}this.U?(_t(this,l,o),z&&this.i&&3==l&&(Ke(this.V,this.W,"tick",this.fb),this.W.start())):(Ze(this.j,this.m,o,null),xt(this,o)),4==l&&Ct(this),this.i&&!this.I&&(4==l?Xn(this.l,this):(this.i=!1,Et(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,tt(12)):(this.o=0,tt(13)),Ct(this),At(this)}}}catch(l){}},r.fb=function(){if(this.g){var e=Pn(this.g),t=this.g.ga();this.C<t.length&&(kt(this),_t(this,e,t),this.i&&4!=e&&Et(this))}},r.cancel=function(){this.I=!0,Ct(this)},r.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Je(3),tt(17)),Ct(this),this.o=2,At(this)):St(this,this.Y-e)},(r=Rt.prototype).R=function(){Dt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},r.T=function(){return Dt(this),this.g.concat()},r.get=function(e,t){return Ot(this.h,e)?this.h[e]:t},r.set=function(e,t){Ot(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},r.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Pt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Lt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Lt){this.g=void 0!==t?t:e.g,Ft(this,e.j),this.s=e.s,Vt(this,e.i),Ut(this,e.m),this.l=e.l,t=e.h;var n=new Qt;n.i=t.i,t.g&&(n.g=new Rt(t.g),n.h=t.h),jt(this,n),this.o=e.o}else e&&(n=String(e).match(Pt))?(this.g=!!t,Ft(this,n[1]||"",!0),this.s=qt(n[2]||""),Vt(this,n[3]||"",!0),Ut(this,n[4]),this.l=qt(n[5]||"",!0),jt(this,n[6]||"",!0),this.o=qt(n[7]||"")):(this.g=!!t,this.h=new Qt(null,this.g))}function Mt(e){return new Lt(e)}function Ft(e,t,n){e.j=n?qt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vt(e,t,n){e.i=n?qt(t,!0):t}function Ut(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function jt(e,t,n){t instanceof Qt?(e.h=t,function(e,t){t&&!e.j&&(Xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Jt(this,t),tn(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=zt(t,Ht)),e.h=new Qt(t,e.g))}function Bt(e,t,n){e.h.set(t,n)}function $t(e){return Bt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Lt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(zt(t,Gt,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(zt(t,Gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(zt(n,"/"==n.charAt(0)?Zt:Wt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",zt(n,Yt)),e.join("")};var Gt=/[#\/\?@]/g,Wt=/[#\?:]/g,Zt=/[#\?]/g,Ht=/[#\?@]/g,Yt=/#/g;function Qt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Xt(e){e.g||(e.g=new Rt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Jt(e,t){Xt(e),t=nn(e,t),Ot(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ot((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Dt(e)))}function en(e,t){return Xt(e),t=nn(e,t),Ot(e.g.h,t)}function tn(e,t,n){Jt(e,t),0<n.length&&(e.i=null,e.g.set(nn(e,t),A(n)),e.h+=n.length)}function nn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Qt.prototype).add=function(e,t){Xt(this),this.i=null,e=nn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Xt(this),this.g.forEach((function(n,r){S(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.T=function(){Xt(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},r.R=function(e){Xt(this);var t=[];if("string"===typeof e)en(this,e)&&(t=k(t,this.g.get(nn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=k(t,e[n])}return t},r.set=function(e,t){return Xt(this),this.i=null,en(this,e=nn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};function rn(e){this.l=e||on,h.PerformanceNavigationTiming?e=0<(e=h.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(h.g&&h.g.Ea&&h.g.Ea()&&h.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var sn,on=10;function an(e){return!!e.h||!!e.g&&e.g.size>=e.j}function cn(e){return e.h?1:e.g?e.g.size:0}function un(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ln(e,t){e.g?e.g.add(t):e.h=t}function hn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function dn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return A(e.i)}function fn(){}function pn(){this.g=new fn}function mn(e,t,n){const r=n||"";try{Nt(e,(function(e,n){let i=e;p(e)&&(i=Ce(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function gn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function yn(e){this.l=e.$b||null,this.j=e.ib||!1}function vn(e,t){Se.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=wn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rn.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},fn.prototype.stringify=function(e){return h.JSON.stringify(e,void 0)},fn.prototype.parse=function(e){return h.JSON.parse(e,void 0)},I(yn,ot),yn.prototype.g=function(){return new vn(this.l,this.j)},yn.prototype.i=(sn={},function(){return sn}),I(vn,Se);var wn=0;function bn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function In(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_n(e)}function _n(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=vn.prototype).open=function(e,t){if(this.readyState!=wn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_n(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||h).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,In(this)),this.readyState=wn},r.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_n(this)),this.g&&(this.readyState=3,_n(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof h.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?In(this):_n(this),3==this.readyState&&bn(this)}},r.Ua=function(e){this.g&&(this.response=this.responseText=e,In(this))},r.Ta=function(e){this.g&&(this.response=e,In(this))},r.ha=function(){this.g&&In(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(vn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Tn=h.JSON.parse;function En(e){Se.call(this),this.headers=new Rt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sn,this.K=this.L=!1}I(En,Se);var Sn="",kn=/^https?$/i,An=["POST","PUT"];function Cn(e){return"content-type"==e.toLowerCase()}function xn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Nn(e),Dn(e)}function Nn(e){e.D||(e.D=!0,ke(e,"complete"),ke(e,"error"))}function Rn(e){if(e.h&&"undefined"!=typeof l&&(!e.C[1]||4!=Pn(e)||2!=e.ba()))if(e.v&&4==Pn(e))je(e.Fa,0,e);else if(ke(e,"readystatechange"),4==Pn(e)){e.h=!1;try{const c=e.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===c){var i=String(e.H).match(Pt)[1]||null;if(!i&&h.self&&h.self.location){var s=h.self.location.protocol;i=s.substr(0,s.length-1)}r=!kn.test(i?i.toLowerCase():"")}n=r}if(n)ke(e,"complete"),ke(e,"success");else{e.m=6;try{var o=2<Pn(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",Nn(e)}}finally{Dn(e)}}}function Dn(e,t){if(e.g){On(e);const r=e.g,i=e.C[0]?d:null;e.g=null,e.C=null,t||ke(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function On(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(h.clearTimeout(e.A),e.A=null)}function Pn(e){return e.g?e.g.readyState:0}function Ln(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Sn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Mn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return L(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Bt(e,t,n))}function Fn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vn(e){this.za=0,this.l=[],this.h=new We,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fn("baseRetryDelayMs",5e3,e),this.$a=Fn("retryDelaySeedMs",1e4,e),this.Ya=Fn("forwardChannelMaxRetries",2,e),this.ra=Fn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new rn(e&&e.concurrentRequestLimit),this.Ca=new pn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Un(e){if(Bn(e),3==e.G){var t=e.V++,n=Mt(e.F);Bt(n,"SID",e.J),Bt(n,"RID",t),Bt(n,"TYPE","terminate"),Kn(e,n),(t=new pt(e,e.h,t,void 0)).K=2,t.v=$t(Mt(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(t.v.toString(),"")),!n&&h.Image&&((new Image).src=t.v,n=!0),n||(t.g=rr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Et(t)}tr(e)}function jn(e){e.g&&(Hn(e),e.g.cancel(),e.g=null)}function Bn(e){jn(e),e.u&&(h.clearTimeout(e.u),e.u=null),Qn(e),e.i.cancel(),e.m&&("number"===typeof e.m&&h.clearTimeout(e.m),e.m=null)}function $n(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&qn(e)}function qn(e){an(e.i)||e.m||(e.m=!0,Pe(e.Ha,e),e.C=0)}function zn(e,t){var n;n=t?t.m:e.V++;const r=Mt(e.F);Bt(r,"SID",e.J),Bt(r,"RID",n),Bt(r,"AID",e.U),Kn(e,r),e.o&&e.s&&Mn(r,e.o,e.s),n=new pt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Gn(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ln(e.i,n),wt(n,r,t)}function Kn(e,t){e.j&&Nt({},(function(e,n){Bt(t,n,e)}))}function Gn(e,t,n){n=Math.min(e.l.length,n);var r=e.j?w(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{mn(a,e,"req"+n+"_")}catch(Pr){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function Wn(e){e.g||e.u||(e.Y=1,Pe(e.Ga,e),e.A=0)}function Zn(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=rt(w(e.Ga,e),Jn(e,e.A)),e.A++,!0)}function Hn(e){null!=e.B&&(h.clearTimeout(e.B),e.B=null)}function Yn(e){e.g=new pt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Mt(e.oa);Bt(t,"RID","rpc"),Bt(t,"SID",e.J),Bt(t,"CI",e.N?"0":"1"),Bt(t,"AID",e.U),Kn(e,t),Bt(t,"TYPE","xmlhttp"),e.o&&e.s&&Mn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=$t(Mt(t)),n.s=null,n.U=!0,bt(n,e)}function Qn(e){null!=e.v&&(h.clearTimeout(e.v),e.v=null)}function Xn(e,t){var n=null;if(e.g==t){Qn(e),Hn(e),e.g=null;var r=2}else{if(!un(e.i,t))return;n=t.D,hn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ke(r=Qe(),new nt(r,n,t,i)),qn(e)}else Wn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(cn(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=rt(w(e.Ha,e,t),Jn(e,e.C)),e.C++,!0))}(e,t)||2==r&&Zn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:er(e,5);break;case 4:er(e,10);break;case 3:er(e,6);break;default:er(e,2)}}function Jn(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function er(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=w(e.jb,e);n||(n=new Lt("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Ft(n,"https"),$t(n)),function(e,t){const n=new We;if(h.Image){const r=new Image;r.onload=b(gn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(gn,n,r,"TestLoadImage: error",!1,t),r.onabort=b(gn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(gn,n,r,"TestLoadImage: timeout",!1,t),h.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else tt(2);e.G=0,e.j&&e.j.va(t),tr(e),Bn(e)}function tr(e){e.G=0,e.I=-1,e.j&&(0==dn(e.i).length&&0==e.l.length||(e.i.i.length=0,A(e.l),e.l.length=0),e.j.ua())}function nr(e,t,n){let r=function(e){return e instanceof Lt?Mt(e):new Lt(e,void 0)}(n);if(""!=r.i)t&&Vt(r,t+"."+r.i),Ut(r,r.m);else{const e=h.location;r=function(e,t,n,r){var i=new Lt(null,void 0);return e&&Ft(i,e),t&&Vt(i,t),n&&Ut(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&L(e.aa,(function(e,t){Bt(r,t,e)})),t=e.D,n=e.sa,t&&n&&Bt(r,t,n),Bt(r,"VER",e.ma),Kn(e,r),r}function rr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new En(new yn({ib:!0})):new En(e.qa)).L=e.H,t}function ir(){}function sr(){if($&&!(10<=Number(te)))throw Error("Environmental error: no available transport.")}function or(e,t){Se.call(this),this.g=new Vn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!C(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ur(this)}function ar(e){ht.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function cr(){dt.call(this),this.status=1}function ur(e){this.g=e}(r=En.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ut.g(),this.C=this.u?at(this.u):at(ut),this.g.onreadystatechange=w(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void xn(this,s)}e=n||"";const i=new Rt(this.headers);r&&Nt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{var t=Cn;const n=e.length,r="string"===typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=h.FormData&&e instanceof h.FormData,!(0<=E(An,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{On(this),0<this.B&&((this.K=function(e){return $&&J()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.pa,this)):this.A=je(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){xn(this,s)}},r.pa=function(){"undefined"!=typeof l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ke(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ke(this,"complete"),ke(this,"abort"),Dn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dn(this,!0)),En.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?Rn(this):this.cb())},r.cb=function(){Rn(this)},r.ba=function(){try{return 2<Pn(this)?this.g.status:-1}catch(sn){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(sn){return""}},r.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Tn(t)}},r.Da=function(){return this.m},r.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=Vn.prototype).ma=8,r.G=1,r.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},r.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new pt(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=M(s),V(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"===typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Gn(this,i,t),Bt(n=Mt(this.F),"RID",e),Bt(n,"CVER",22),this.D&&Bt(n,"X-HTTP-Session-Id",this.D),Kn(this,n),this.o&&s&&Mn(n,this.o,s),ln(this.i,i),this.Ra&&Bt(n,"TYPE","init"),this.ja?(Bt(n,"$req",t),Bt(n,"SID","null"),i.$=!0,wt(i,n,null)):wt(i,n,t),this.G=2}}else 3==this.G&&(e?zn(this,e):0==this.l.length||an(this.i)||zn(this))},r.Ga=function(){if(this.u=null,Yn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=rt(w(this.bb,this),e)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,tt(10),jn(this),Yn(this))},r.ab=function(){null!=this.v&&(this.v=null,jn(this),Zn(this),tt(19))},r.jb=function(e){e?(this.h.info("Successfully pinged google.com"),tt(2)):(this.h.info("Failed to ping google.com"),tt(1))},(r=ir.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},sr.prototype.g=function(e,t){return new or(e,t)},I(or,Se),or.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Pe(w(e.hb,e,t))),tt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=nr(e,null,e.W),qn(e)},or.prototype.close=function(){Un(this.g)},or.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,$n(this.g,t)}else this.v?((t={}).__data__=Ce(e),$n(this.g,t)):$n(this.g,e)},or.prototype.M=function(){this.g.j=null,delete this.j,Un(this.g),delete this.g,or.Z.M.call(this)},I(ar,ht),I(cr,dt),I(ur,ir),ur.prototype.xa=function(){ke(this.g,"a")},ur.prototype.wa=function(e){ke(this.g,new ar(e))},ur.prototype.va=function(e){ke(this.g,new cr(e))},ur.prototype.ua=function(){ke(this.g,"b")},sr.prototype.createWebChannel=sr.prototype.g,or.prototype.send=or.prototype.u,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,st.COMPLETE="complete",ct.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",Se.prototype.listen=Se.prototype.N,En.prototype.listenOnce=En.prototype.O,En.prototype.getLastError=En.prototype.La,En.prototype.getLastErrorCode=En.prototype.Da,En.prototype.getStatus=En.prototype.ba,En.prototype.getResponseJson=En.prototype.Qa,En.prototype.getResponseText=En.prototype.ga,En.prototype.send=En.prototype.ea;var lr=u.createWebChannelTransport=function(){return new sr},hr=u.getStatEventTarget=function(){return Qe()},dr=u.ErrorCode=it,fr=u.EventType=st,pr=u.Event=He,mr=u.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gr=u.FetchXmlHttpFactory=yn,yr=u.WebChannel=ct,vr=u.XhrIo=En,wr=n(3454);const br="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let _r="9.6.11";const Tr=new o.Yd("@firebase/firestore");function Er(){return Tr.logLevel}function Sr(e){Tr.setLogLevel(e)}function kr(e,...t){if(Tr.logLevel<=o.in.DEBUG){const n=t.map(xr);Tr.debug(`Firestore (${_r}): ${e}`,...n)}}function Ar(e,...t){if(Tr.logLevel<=o.in.ERROR){const n=t.map(xr);Tr.error(`Firestore (${_r}): ${e}`,...n)}}function Cr(e,...t){if(Tr.logLevel<=o.in.WARN){const n=t.map(xr);Tr.warn(`Firestore (${_r}): ${e}`,...n)}}function xr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Nr(e="Unexpected state"){const t=`FIRESTORE (${_r}) INTERNAL ASSERTION FAILED: `+e;throw Ar(t),new Error(t)}function Rr(e,t){e||Nr()}function Dr(e,t){e||Nr()}function Or(e,t){return e}const Pr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lr extends a.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Fr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ir.UNAUTHENTICATED)))}shutdown(){}}class Ur{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jr{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mr,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{kr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(kr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mr)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(kr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Rr("string"==typeof t.accessToken),new Fr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rr(null===e||"string"==typeof e),new Ir(e)}}class Br{constructor(e,t,n){this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class $r{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Br(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Ir.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zr{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&kr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,kr("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{kr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?r(e):kr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Rr("string"==typeof e.token),this.p=e.token,new qr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Kr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Gr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Kr.A=-1;class Wr{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Gr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Zr(e,t){return e<t?-1:e>t?1:0}function Hr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Yr(e){return e+"\0"}class Qr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lr(Pr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lr(Pr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Lr(Pr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lr(Pr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Qr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zr(this.nanoseconds,e.nanoseconds):Zr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xr(e)}static min(){return new Xr(new Qr(0,0))}static max(){return new Xr(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Jr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ei(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ti(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ni{constructor(e,t,n){void 0===t?t=0:t>e.length&&Nr(),void 0===n?n=e.length-t:n>e.length-t&&Nr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ni.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ri extends ni{construct(e,t,n){return new ri(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ri(t)}static emptyPath(){return new ri([])}}const ii=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class si extends ni{construct(e,t,n){return new si(e,t,n)}static isValidIdentifier(e){return ii.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),si.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new si(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Lr(Pr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Lr(Pr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Lr(Pr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new si(t)}static emptyPath(){return new si([])}}class oi{constructor(e){this.fields=e,e.sort(si.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}function ai(){return"undefined"!=typeof atob}class ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ci(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ci(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ci.EMPTY_BYTE_STRING=new ci("");const ui=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(e){if(Rr(!!e),"string"==typeof e){let t=0;const n=ui.exec(e);if(Rr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:hi(e.seconds),nanos:hi(e.nanos)}}function hi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function di(e){return"string"==typeof e?ci.fromBase64String(e):ci.fromUint8Array(e)}function fi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pi(e){const t=e.mapValue.fields.__previous_value__;return fi(t)?pi(t):t}function mi(e){const t=li(e.mapValue.fields.__local_write_time__.timestampValue);return new Qr(t.seconds,t.nanos)}class gi{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class yi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yi&&e.projectId===this.projectId&&e.database===this.database}}function vi(e){return null==e}function wi(e){return 0===e&&1/e==-1/0}function bi(e){return"number"==typeof e&&Number.isInteger(e)&&!wi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Ii{constructor(e){this.path=e}static fromPath(e){return new Ii(ri.fromString(e))}static fromName(e){return new Ii(ri.fromString(e).popFirst(5))}static empty(){return new Ii(ri.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ri.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ri.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ii(new ri(e.slice()))}}const _i={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ti={nullValue:"NULL_VALUE"};function Ei(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fi(e)?4:Vi(e)?9:10:Nr()}function Si(e,t){if(e===t)return!0;const n=Ei(e);if(n!==Ei(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mi(e).isEqual(mi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=li(e.timestampValue),r=li(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return di(e.bytesValue).isEqual(di(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return hi(e.geoPointValue.latitude)===hi(t.geoPointValue.latitude)&&hi(e.geoPointValue.longitude)===hi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return hi(e.integerValue)===hi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=hi(e.doubleValue),r=hi(t.doubleValue);return n===r?wi(n)===wi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Hr(e.arrayValue.values||[],t.arrayValue.values||[],Si);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Jr(n)!==Jr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Si(n[i],r[i])))return!1;return!0}(e,t);default:return Nr()}}function ki(e,t){return void 0!==(e.values||[]).find((e=>Si(e,t)))}function Ai(e,t){if(e===t)return 0;const n=Ei(e),r=Ei(t);if(n!==r)return Zr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=hi(e.integerValue||e.doubleValue),r=hi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ci(e.timestampValue,t.timestampValue);case 4:return Ci(mi(e),mi(t));case 5:return Zr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=di(e),r=di(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Zr(n[i],r[i]);if(0!==e)return e}return Zr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zr(hi(e.latitude),hi(t.latitude));return 0!==n?n:Zr(hi(e.longitude),hi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ai(n[i],r[i]);if(e)return e}return Zr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Zr(r[o],s[o]);if(0!==e)return e;const t=Ai(n[r[o]],i[s[o]]);if(0!==t)return t}return Zr(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Nr()}}function Ci(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zr(e,t);const n=li(e),r=li(t),i=Zr(n.seconds,r.seconds);return 0!==i?i:Zr(n.nanos,r.nanos)}function xi(e){return Ni(e)}function Ni(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=li(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?di(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ii.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ni(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ni(e.fields[i])}`;return n+"}"}(e.mapValue):Nr();var t,n}function Ri(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Di(e){return!!e&&"integerValue"in e}function Oi(e){return!!e&&"arrayValue"in e}function Pi(e){return!!e&&"nullValue"in e}function Li(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mi(e){return!!e&&"mapValue"in e}function Fi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ei(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Fi(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fi(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Vi(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ui(e){return"nullValue"in e?Ti:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ri(yi.empty(),Ii.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Nr()}function ji(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ri(yi.empty(),Ii.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?_i:Nr()}function Bi(e,t){return void 0===e?t:void 0===t||Ai(e,t)>0?e:t}function $i(e,t){return void 0===e?t:void 0===t||Ai(e,t)<0?e:t}class qi{constructor(e){this.value=e}static empty(){return new qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Mi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fi(t)}setAll(e){let t=si.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Fi(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Mi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Mi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ei(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new qi(Fi(this.value))}}function zi(e){const t=[];return ei(e.fields,((e,n)=>{const r=new si([e]);if(Mi(n)){const e=zi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new oi(t)}class Ki{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Ki(e,0,Xr.min(),Xr.min(),qi.empty(),0)}static newFoundDocument(e,t,n){return new Ki(e,1,t,Xr.min(),n,0)}static newNoDocument(e,t){return new Ki(e,2,t,Xr.min(),qi.empty(),0)}static newUnknownDocument(e,t){return new Ki(e,3,t,Xr.min(),qi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ki&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ki(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gi{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Wi(e){return e.fields.find((e=>2===e.kind))}function Zi(e){return e.fields.filter((e=>2!==e.kind))}Gi.UNKNOWN_ID=-1;class Hi{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yi(0,Ji.min())}}function Qi(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Xr.fromTimestamp(1e9===r?new Qr(n+1,0):new Qr(n,r));return new Ji(i,Ii.empty(),t)}function Xi(e){return new Ji(e.readTime,e.key,-1)}class Ji{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ji(Xr.min(),Ii.empty(),-1)}static max(){return new Ji(Xr.max(),Ii.empty(),-1)}}function es(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ii.comparator(e.documentKey,t.documentKey),0!==n?n:Zr(e.largestBatchId,t.largestBatchId))}class ts{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.P=null}}function ns(e,t=null,n=[],r=[],i=null,s=null,o=null){return new ts(e,t,n,r,i,s,o)}function rs(e){const t=Or(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+xi(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),vi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>xi(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>xi(e))).join(",")),t.P=e}return t.P}function is(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!bs(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Si(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_s(e.startAt,t.startAt)&&_s(e.endAt,t.endAt)}function ss(e){return Ii.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function os(e,t){return e.filters.filter((e=>e instanceof us&&e.field.isEqual(t)))}function as(e,t,n){let r,i=!0;for(const s of os(e,t)){let e,t=!0;switch(s.op){case"<":case"<=":e=Ui(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Ti}Bi(r,e)===e&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Bi(r,e)===e&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function cs(e,t,n){let r,i=!0;for(const s of os(e,t)){let e,t=!0;switch(s.op){case">=":case">":e=ji(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=_i}$i(r,e)===e&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];$i(r,e)===e&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class us extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new ls(e,t,n):"array-contains"===t?new ps(e,n):"in"===t?new ms(e,n):"not-in"===t?new gs(e,n):"array-contains-any"===t?new ys(e,n):new us(e,t,n)}static V(e,t,n){return"in"===t?new hs(e,n):new ds(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ai(t,this.value)):null!==t&&Ei(this.value)===Ei(t)&&this.v(Ai(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nr()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ls extends us{constructor(e,t,n){super(e,t,n),this.key=Ii.fromName(n.referenceValue)}matches(e){const t=Ii.comparator(e.key,this.key);return this.v(t)}}class hs extends us{constructor(e,t){super(e,"in",t),this.keys=fs("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ds extends us{constructor(e,t){super(e,"not-in",t),this.keys=fs("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ii.fromName(e.referenceValue)))}class ps extends us{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Oi(t)&&ki(t.arrayValue,this.value)}}class ms extends us{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ki(this.value.arrayValue,t)}}class gs extends us{constructor(e,t){super(e,"not-in",t)}matches(e){if(ki(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ki(this.value.arrayValue,t)}}class ys extends us{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Oi(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>ki(this.value.arrayValue,e)))}}class vs{constructor(e,t){this.position=e,this.inclusive=t}}class ws{constructor(e,t="asc"){this.field=e,this.dir=t}}function bs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Is(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ii.comparator(Ii.fromName(o.referenceValue),n.key):Ai(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function _s(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Si(e.position[n],t.position[n]))return!1;return!0}class Ts{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.D=null,this.C=null,this.startAt,this.endAt}}function Es(e,t,n,r,i,s,o,a){return new Ts(e,t,n,r,i,s,o,a)}function Ss(e){return new Ts(e)}function ks(e){return!vi(e.limit)&&"F"===e.limitType}function As(e){return!vi(e.limit)&&"L"===e.limitType}function Cs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function xs(e){for(const t of e.filters)if(t.S())return t.field;return null}function Ns(e){return null!==e.collectionGroup}function Rs(e){const t=Or(e);if(null===t.D){t.D=[];const e=xs(t),n=Cs(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new ws(e)),t.D.push(new ws(si.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new ws(si.keyField(),e))}}}return t.D}function Ds(e){const t=Or(e);if(!t.C)if("F"===t.limitType)t.C=ns(t.path,t.collectionGroup,Rs(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Rs(t)){const t="desc"===i.dir?"asc":"desc";e.push(new ws(i.field,t))}const n=t.endAt?new vs(t.endAt.position,!t.endAt.inclusive):null,r=t.startAt?new vs(t.startAt.position,!t.startAt.inclusive):null;t.C=ns(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.C}function Os(e,t,n){return new Ts(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ps(e,t){return is(Ds(e),Ds(t))&&e.limitType===t.limitType}function Ls(e){return`${rs(Ds(e))}|lt:${e.limitType}`}function Ms(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${xi(t.value)}`;var t})).join(", ")}]`),vi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>xi(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>xi(e))).join(",")),`Target(${t})`}(Ds(e))}; limitType=${e.limitType})`}function Fs(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ii.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Is(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Rs(e),t))&&!(e.endAt&&!function(e,t,n){const r=Is(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Rs(e),t))}(e,t)}function Vs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Us(e){return(t,n)=>{let r=!1;for(const i of Rs(e)){const e=js(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function js(e,t,n){const r=e.field.isKeyField()?Ii.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ai(r,i):Nr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nr()}}function Bs(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wi(t)?"-0":t}}function $s(e){return{integerValue:""+e}}function qs(e,t){return bi(t)?$s(t):Bs(e,t)}class zs{constructor(){this._=void 0}}function Ks(e,t,n){return e instanceof Zs?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Hs?Ys(e,t):e instanceof Qs?Xs(e,t):function(e,t){const n=Ws(e,t),r=eo(n)+eo(e.k);return Di(n)&&Di(e.k)?$s(r):Bs(e.M,r)}(e,t)}function Gs(e,t,n){return e instanceof Hs?Ys(e,t):e instanceof Qs?Xs(e,t):n}function Ws(e,t){return e instanceof Js?Di(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Zs extends zs{}class Hs extends zs{constructor(e){super(),this.elements=e}}function Ys(e,t){const n=to(t);for(const r of e.elements)n.some((e=>Si(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Qs extends zs{constructor(e){super(),this.elements=e}}function Xs(e,t){let n=to(t);for(const r of e.elements)n=n.filter((e=>!Si(e,r)));return{arrayValue:{values:n}}}class Js extends zs{constructor(e,t){super(),this.M=e,this.k=t}}function eo(e){return hi(e.integerValue||e.doubleValue)}function to(e){return Oi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class no{constructor(e,t){this.field=e,this.transform=t}}class ro{constructor(e,t){this.version=e,this.transformResults=t}}class io{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new io}static exists(e){return new io(void 0,e)}static updateTime(e){return new io(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function so(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class oo{}function ao(e,t,n){e instanceof fo?function(e,t,n){const r=e.value.clone(),i=go(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof po?function(e,t,n){if(!so(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=go(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(mo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function co(e,t,n){e instanceof fo?function(e,t,n){if(!so(e.precondition,t))return;const r=e.value.clone(),i=yo(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(ho(t),r).setHasLocalMutations()}(e,t,n):e instanceof po?function(e,t,n){if(!so(e.precondition,t))return;const r=yo(e.fieldTransforms,n,t),i=t.data;i.setAll(mo(e)),i.setAll(r),t.convertToFoundDocument(ho(t),i).setHasLocalMutations()}(e,t,n):function(e,t){so(e.precondition,t)&&t.convertToNoDocument(Xr.min())}(e,t)}function uo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ws(r.transform,e||null);null!=i&&(null==n&&(n=qi.empty()),n.set(r.field,i))}return n||null}function lo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Hr(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hs&&t instanceof Hs||e instanceof Qs&&t instanceof Qs?Hr(e.elements,t.elements,Si):e instanceof Js&&t instanceof Js?Si(e.k,t.k):e instanceof Zs&&t instanceof Zs}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function ho(e){return e.isFoundDocument()?e.version:Xr.min()}class fo extends oo{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class po extends oo{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function mo(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function go(e,t,n){const r=new Map;Rr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Gs(o,a,n[i]))}return r}function yo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ks(e,s,t))}return r}class vo extends oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class wo extends oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class bo{constructor(e){this.count=e}}var Io,_o;function To(e){switch(e){default:return Nr();case Pr.CANCELLED:case Pr.UNKNOWN:case Pr.DEADLINE_EXCEEDED:case Pr.RESOURCE_EXHAUSTED:case Pr.INTERNAL:case Pr.UNAVAILABLE:case Pr.UNAUTHENTICATED:return!1;case Pr.INVALID_ARGUMENT:case Pr.NOT_FOUND:case Pr.ALREADY_EXISTS:case Pr.PERMISSION_DENIED:case Pr.FAILED_PRECONDITION:case Pr.ABORTED:case Pr.OUT_OF_RANGE:case Pr.UNIMPLEMENTED:case Pr.DATA_LOSS:return!0}}function Eo(e){if(void 0===e)return Ar("GRPC error has no .code"),Pr.UNKNOWN;switch(e){case Io.OK:return Pr.OK;case Io.CANCELLED:return Pr.CANCELLED;case Io.UNKNOWN:return Pr.UNKNOWN;case Io.DEADLINE_EXCEEDED:return Pr.DEADLINE_EXCEEDED;case Io.RESOURCE_EXHAUSTED:return Pr.RESOURCE_EXHAUSTED;case Io.INTERNAL:return Pr.INTERNAL;case Io.UNAVAILABLE:return Pr.UNAVAILABLE;case Io.UNAUTHENTICATED:return Pr.UNAUTHENTICATED;case Io.INVALID_ARGUMENT:return Pr.INVALID_ARGUMENT;case Io.NOT_FOUND:return Pr.NOT_FOUND;case Io.ALREADY_EXISTS:return Pr.ALREADY_EXISTS;case Io.PERMISSION_DENIED:return Pr.PERMISSION_DENIED;case Io.FAILED_PRECONDITION:return Pr.FAILED_PRECONDITION;case Io.ABORTED:return Pr.ABORTED;case Io.OUT_OF_RANGE:return Pr.OUT_OF_RANGE;case Io.UNIMPLEMENTED:return Pr.UNIMPLEMENTED;case Io.DATA_LOSS:return Pr.DATA_LOSS;default:return Nr()}}(_o=Io||(Io={}))[_o.OK=0]="OK",_o[_o.CANCELLED=1]="CANCELLED",_o[_o.UNKNOWN=2]="UNKNOWN",_o[_o.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_o[_o.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_o[_o.NOT_FOUND=5]="NOT_FOUND",_o[_o.ALREADY_EXISTS=6]="ALREADY_EXISTS",_o[_o.PERMISSION_DENIED=7]="PERMISSION_DENIED",_o[_o.UNAUTHENTICATED=16]="UNAUTHENTICATED",_o[_o.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_o[_o.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_o[_o.ABORTED=10]="ABORTED",_o[_o.OUT_OF_RANGE=11]="OUT_OF_RANGE",_o[_o.UNIMPLEMENTED=12]="UNIMPLEMENTED",_o[_o.INTERNAL=13]="INTERNAL",_o[_o.UNAVAILABLE=14]="UNAVAILABLE",_o[_o.DATA_LOSS=15]="DATA_LOSS";class So{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ti(this.inner)}size(){return this.innerSize}}class ko{constructor(e,t){this.comparator=e,this.root=t||Co.EMPTY}insert(e,t){return new ko(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Co.BLACK,null,null))}remove(e){return new ko(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Co.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ao(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ao(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ao(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ao(this.root,e,this.comparator,!0)}}class Ao{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Co{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Co.RED,this.left=null!=r?r:Co.EMPTY,this.right=null!=i?i:Co.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Co(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Co.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Co.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Co.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nr();if(this.right.isRed())throw Nr();const e=this.left.check();if(e!==this.right.check())throw Nr();return e+(this.isRed()?0:1)}}Co.EMPTY=null,Co.RED=!0,Co.BLACK=!1,Co.EMPTY=new class{constructor(){this.size=0}get key(){throw Nr()}get value(){throw Nr()}get color(){throw Nr()}get left(){throw Nr()}get right(){throw Nr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Co(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xo{constructor(e){this.comparator=e,this.data=new ko(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new No(this.data.getIterator())}getIteratorFrom(e){return new No(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof xo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xo(this.comparator);return t.data=e,t}}class No{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ro(e){return e.hasNext()?e.getNext():void 0}const Do=new ko(Ii.comparator);function Oo(){return Do}const Po=new ko(Ii.comparator);function Lo(){return Po}function Mo(){return new So((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Fo=new ko(Ii.comparator),Vo=new xo(Ii.comparator);function Uo(...e){let t=Vo;for(const n of e)t=t.add(n);return t}const jo=new xo(Zr);function Bo(){return jo}class $o{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,qo.createSynthesizedTargetChangeForCurrentChange(e,t)),new $o(Xr.min(),n,Bo(),Oo(),Uo())}}class qo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qo(ci.EMPTY_BYTE_STRING,t,Uo(),Uo(),Uo())}}class zo{constructor(e,t,n,r){this.O=e,this.removedTargetIds=t,this.key=n,this.F=r}}class Ko{constructor(e,t){this.targetId=e,this.$=t}}class Go{constructor(e,t,n=ci.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Wo{constructor(){this.B=0,this.L=Yo(),this.U=ci.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Uo(),t=Uo(),n=Uo();return this.L.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Nr()}})),new qo(this.U,this.q,e,t,n)}J(){this.K=!1,this.L=Yo()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Zo{constructor(e){this.nt=e,this.st=new Map,this.it=Oo(),this.rt=Ho(),this.ot=new xo(Zr)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,(t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:Nr()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(((e,n)=>{this.ft(n)&&t(n)}))}_t(e){const t=e.targetId,n=e.$.count,r=this.wt(t);if(r){const e=r.target;if(ss(e))if(0===n){const n=new Ii(e.path);this.ct(t,n,Ki.newNoDocument(n,Xr.min()))}else Rr(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach(((n,r)=>{const i=this.wt(r);if(i){if(n.current&&ss(i.target)){const t=new Ii(i.target.path);null!==this.it.get(t)||this.It(r,t)||this.ct(r,t,Ki.newNoDocument(t,e))}n.j&&(t.set(r,n.H()),n.J())}}));let n=Uo();this.rt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.it.forEach(((t,n)=>n.setReadTime(e)));const r=new $o(e,t,this.ot,this.it,n);return this.it=Oo(),this.rt=Ho(),this.ot=new xo(Zr),r}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Wo,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new xo(Zr),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||kr("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Wo),this.nt.getRemoteKeysForTarget(e).forEach((t=>{this.ct(e,t,null)}))}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Ho(){return new ko(Ii.comparator)}function Yo(){return new ko(Ii.comparator)}const Qo={asc:"ASCENDING",desc:"DESCENDING"},Xo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Jo{constructor(e,t){this.databaseId=e,this.N=t}}function ea(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ta(e,t){return e.N?t.toBase64():t.toUint8Array()}function na(e,t){return ea(e,t.toTimestamp())}function ra(e){return Rr(!!e),Xr.fromTimestamp(function(e){const t=li(e);return new Qr(t.seconds,t.nanos)}(e))}function ia(e,t){return function(e){return new ri(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function sa(e){const t=ri.fromString(e);return Rr(Aa(t)),t}function oa(e,t){return ia(e.databaseId,t.path)}function aa(e,t){const n=sa(t);if(n.get(1)!==e.databaseId.projectId)throw new Lr(Pr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lr(Pr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ii(ha(n))}function ca(e,t){return ia(e.databaseId,t)}function ua(e){const t=sa(e);return 4===t.length?ri.emptyPath():ha(t)}function la(e){return new ri(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ha(e){return Rr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function da(e,t,n){return{name:oa(e,t),fields:n.value.mapValue.fields}}function fa(e,t,n){const r=aa(e,t.name),i=ra(t.updateTime),s=new qi({mapValue:{fields:t.fields}}),o=Ki.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function pa(e,t){let n;if(t instanceof fo)n={update:da(e,t.key,t.value)};else if(t instanceof vo)n={delete:oa(e,t.key)};else if(t instanceof po)n={update:da(e,t.key,t.data),updateMask:ka(t.fieldMask)};else{if(!(t instanceof wo))return Nr();n={verify:oa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Zs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Js)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Nr()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:na(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Nr()}(e,t.precondition)),n}function ma(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?io.updateTime(ra(e.updateTime)):void 0!==e.exists?io.exists(e.exists):io.none()}(t.currentDocument):io.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Rr("REQUEST_TIME"===t.setToServerValue),n=new Zs;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Hs(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Qs(e)}else"increment"in t?n=new Js(e,t.increment):Nr();const r=si.fromServerFormat(t.fieldPath);return new no(r,n)}(e,t))):[];if(t.update){t.update.name;const i=aa(e,t.update.name),s=new qi({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new oi(t.map((e=>si.fromServerFormat(e))))}(t.updateMask);return new po(i,s,e,n,r)}return new fo(i,s,n,r)}if(t.delete){const r=aa(e,t.delete);return new vo(r,n)}if(t.verify){const r=aa(e,t.verify);return new wo(r,n)}return Nr()}function ga(e,t){return{documents:[ca(e,t.path)]}}function ya(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ca(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ca(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Li(e.value))return{unaryFilter:{field:_a(e.field),op:"IS_NAN"}};if(Pi(e.value))return{unaryFilter:{field:_a(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Li(e.value))return{unaryFilter:{field:_a(e.field),op:"IS_NOT_NAN"}};if(Pi(e.value))return{unaryFilter:{field:_a(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_a(e.field),op:Ia(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:_a(e.field),direction:ba(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.N||vi(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function va(e){let t=ua(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Rr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=wa(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new ws(Ta(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,vi(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new vs(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new vs(n,t)}(n.endAt)),Es(t,i,o,s,a,"F",c,u)}function wa(e){return e?void 0!==e.unaryFilter?[Sa(e)]:void 0!==e.fieldFilter?[Ea(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>wa(e))).reduce(((e,t)=>e.concat(t))):Nr():[]}function ba(e){return Qo[e]}function Ia(e){return Xo[e]}function _a(e){return{fieldPath:e.canonicalString()}}function Ta(e){return si.fromServerFormat(e.fieldPath)}function Ea(e){return us.create(Ta(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nr()}}(e.fieldFilter.op),e.fieldFilter.value)}function Sa(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ta(e.unaryFilter.field);return us.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ta(e.unaryFilter.field);return us.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ta(e.unaryFilter.field);return us.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ta(e.unaryFilter.field);return us.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Nr()}}function ka(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Aa(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ca(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Na(t)),t=xa(e.get(n),t);return Na(t)}function xa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Na(e){return e+"\x01\x01"}function Ra(e){const t=e.length;if(Rr(t>=2),2===t)return Rr("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ri.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Nr(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Nr()}s=t+2}return new ri(r)}const Da=["userId","batchId"];function Oa(e,t){return[e,Ca(t)]}function Pa(e,t,n){return[e,Ca(t),n]}const La={},Ma=["prefixPath","collectionGroup","readTime","documentId"],Fa=["prefixPath","collectionGroup","documentId"],Va=["collectionGroup","readTime","prefixPath","documentId"],Ua=["canonicalId","targetId"],ja=["targetId","path"],Ba=["path","targetId"],$a=["collectionId","parent"],qa=["indexId","uid"],za=["uid","sequenceNumber"],Ka=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ga=["indexId","uid","orderedDocumentKey"],Wa=["userId","collectionPath","documentId"],Za=["userId","collectionPath","largestBatchId"],Ha=["userId","collectionGroup","largestBatchId"],Ya=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qa=[...Ya,"documentOverlays"],Xa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ja=[...Xa,"indexConfiguration","indexState","indexEntries"],ec="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class nc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof nc?t:nc.resolve(t)}catch(e){return nc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):nc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):nc.reject(t)}static resolve(e){return new nc(((t,n)=>{t(e)}))}static reject(e){return new nc(((t,n)=>{n(e)}))}static waitFor(e){return new nc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=nc.resolve(!1);for(const n of e)t=t.next((e=>e?nc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}}class rc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Mr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new oc(e,t.error)):this.At.resolve()},this.transaction.onerror=t=>{const n=hc(t.target.error);this.At.reject(new oc(e,n))}}static open(e,t,n,r){try{return new rc(t,e.transaction(r,n))}catch(e){throw new oc(t,e)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(kr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cc(t)}}class ic{constructor(e,t,n){this.name=e,this.version=t,this.bt=n,12.2===ic.Vt((0,a.z$)())&&Ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return kr("SimpleDb","Removing database:",e),uc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,a.hl)())return!1;if(ic.St())return!0;const e=(0,a.z$)(),t=ic.Vt(e),n=0<t&&t<10,r=ic.Dt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static St(){var e;return"undefined"!=typeof wr&&"YES"===(null===(e=wr.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Nt(e){return this.db||(kr("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new oc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Lr(Pr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Lr(Pr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new oc(e,r))},r.onupgradeneeded=e=>{kr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.bt.kt(t,r.transaction,e.oldVersion,this.version).next((()=>{kr("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Mt&&(this.db.onversionchange=e=>this.Mt(e)),this.db}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Nt(e);const t=rc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.Pt(),e))).catch((e=>(t.abort(e),nc.reject(e)))).toPromise();return s.catch((()=>{})),await t.Rt,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(kr("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class sc{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return uc(this.Ft.delete())}}class oc extends Lr{constructor(e,t){super(Pr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ac(e){return"IndexedDbTransactionError"===e.name}class cc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(kr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(kr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),uc(n)}add(e){return kr("SimpleDb","ADD",this.store.name,e,e),uc(this.store.add(e))}get(e){return uc(this.store.get(e)).next((t=>(void 0===t&&(t=null),kr("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return kr("SimpleDb","DELETE",this.store.name,e),uc(this.store.delete(e))}count(){return kr("SimpleDb","COUNT",this.store.name),uc(this.store.count())}qt(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.Kt(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new nc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}Gt(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new nc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}Qt(e,t){kr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.jt=!1;const r=this.cursor(n);return this.Kt(r,((e,t,n)=>n.delete()))}Wt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Kt(r,t)}zt(e){const t=this.cursor({});return new nc(((n,r)=>{t.onerror=e=>{const t=hc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}Kt(e,t){const n=[];return new nc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new sc(i),o=t(i.primaryKey,i.value,s);if(o instanceof nc){const e=o.catch((e=>(s.done(),nc.reject(e))));n.push(e)}s.isDone?r():null===s.Lt?i.continue():i.continue(s.Lt)}})).next((()=>nc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uc(e){return new nc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=hc(e.target.error);n(t)}}))}let lc=!1;function hc(e){const t=ic.Vt((0,a.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Lr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lc||(lc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class dc extends tc{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function fc(e,t){const n=Or(e);return ic.xt(n.Ht,t)}class pc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ao(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&co(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&co(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Xr.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Uo())}isEqual(e){return this.batchId===e.batchId&&Hr(this.mutations,e.mutations,((e,t)=>lo(e,t)))&&Hr(this.baseMutations,e.baseMutations,((e,t)=>lo(e,t)))}}class mc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Rr(e.mutations.length===n.length);let r=Fo;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new mc(e,t,n,r)}}class gc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yc{constructor(e,t,n,r,i=Xr.min(),s=Xr.min(),o=ci.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new yc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vc{constructor(e){this.Jt=e}}function wc(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bc(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:oa(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ea(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ic(t.version)};else{if(!t.isUnknownDocument())return Nr();r.unknownDocument={path:n.path.toArray(),version:Ic(t.version)}}return r}function bc(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ic(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _c(e){const t=new Qr(e.seconds,e.nanoseconds);return Xr.fromTimestamp(t)}function Tc(e,t){const n=(t.baseMutations||[]).map((t=>ma(e.Jt,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>ma(e.Jt,t))),i=Qr.fromMillis(t.localWriteTimeMs);return new pc(t.batchId,i,n,r)}function Ec(e){const t=_c(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?_c(e.lastLimboFreeSnapshotVersion):Xr.min();let r;var i;return void 0!==e.query.documents?(Rr(1===(i=e.query).documents.length),r=Ds(Ss(ua(i.documents[0])))):r=function(e){return Ds(va(e))}(e.query),new yc(r,e.targetId,0,e.lastListenSequenceNumber,t,n,ci.fromBase64String(e.resumeToken))}function Sc(e,t){const n=Ic(t.snapshotVersion),r=Ic(t.lastLimboFreeSnapshotVersion);let i;i=ss(t.target)?ga(e.Jt,t.target):ya(e.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:rs(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function kc(e){const t=va({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Os(t,t.limit,"L"):t}function Ac(e,t){return new gc(t.largestBatchId,ma(e.Jt,t.overlayMutation))}function Cc(e,t){const n=t.path.lastSegment();return[e,Ca(t.path.popLast()),n]}class xc{getBundleMetadata(e,t){return Nc(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:_c(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Nc(e).put({bundleId:(n=t).id,createTime:Ic(ra(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Rc(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:kc(t.bundledQuery),readTime:_c(t.readTime)};var t}))}saveNamedQuery(e,t){return Rc(e).put(function(e){return{name:e.name,readTime:Ic(ra(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Nc(e){return fc(e,"bundles")}function Rc(e){return fc(e,"namedQueries")}class Dc{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){const n=t.uid||"";return new Dc(e,n)}getOverlay(e,t){return Oc(e).get(Cc(this.userId,t)).next((e=>e?Ac(this.M,e):null))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new gc(t,i);r.push(this.Xt(e,s))})),nc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Ca(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Oc(e).Qt("collectionPathOverlayIndex",r))})),nc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Mo(),i=Ca(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Oc(e).qt("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Ac(this.M,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Mo();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Oc(e).Wt({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Ac(this.M,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}Xt(e,t){return Oc(e).put(function(e,t,n){const[r,i,s]=Cc(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:pa(e.Jt,n.mutation)}}(this.M,this.userId,t))}}function Oc(e){return fc(e,"documentOverlays")}class Pc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(hi(e.integerValue));else if("doubleValue"in e){const n=hi(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),wi(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(di(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?Vi(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Nr()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const r of Object.keys(n))this.re(r,t),this.te(n[r],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const r of n)this.te(r,t)}ae(e,t){this.ne(t,37),Ii.fromName(e).path.forEach((e=>{this.ne(t,60),this.le(e,t)}))}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Lc(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Mc(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Lc(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Pc.fe=new Pc;class Fc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this._e(n.value),n=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.ge(n.value),n=t.next();this.ye()}pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this._e(e);else if(e<2048)this._e(960|e>>>6),this._e(128|63&e);else if(t<"\ud800"||"\udbff"<t)this._e(480|e>>>12),this._e(128|63&e>>>6),this._e(128|63&e);else{const e=t.codePointAt(0);this._e(240|e>>>18),this._e(128|63&e>>>12),this._e(128|63&e>>>6),this._e(128|63&e)}}this.we()}Ie(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.ge(e);else if(e<2048)this.ge(960|e>>>6),this.ge(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.ge(480|e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e);else{const e=t.codePointAt(0);this.ge(240|e>>>18),this.ge(128|63&e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e)}}this.ye()}Te(e){const t=this.Ee(e),n=Mc(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Re(e){const t=this.Ee(e),n=Mc(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Vc{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Uc{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class jc{constructor(){this.De=new Fc,this.Ce=new Vc(this.De),this.xe=new Uc(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Bc{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Bc(this.indexId,this.documentKey,this.arrayValue,n)}}function $c(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=qc(e.arrayValue,t.arrayValue),0!==n?n:(n=qc(e.directionalValue,t.directionalValue),0!==n?n:Ii.comparator(e.documentKey,t.documentKey)))}function qc(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class zc{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const e=t;e.S()?this.Fe=e:this.Oe.push(e)}}$e(e){const t=Wi(e);if(void 0!==t&&!this.Be(t))return!1;const n=Zi(e);let r=0,i=0;for(;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){const e=n[r];if(!this.Le(this.Fe,e)||!this.Ue(this.Me[i++],e))return!1;++r}for(;r<n.length;++r){const e=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],e))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Kc{constructor(){this.qe=new Gc}addToCollectionParentIndex(e,t){return this.qe.add(t),nc.resolve()}getCollectionParents(e,t){return nc.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return nc.resolve()}deleteFieldIndex(e,t){return nc.resolve()}getDocumentsMatchingTarget(e,t){return nc.resolve(null)}getFieldIndex(e,t){return nc.resolve(null)}getFieldIndexes(e,t){return nc.resolve([])}getNextCollectionGroupToUpdate(e){return nc.resolve(null)}updateCollectionGroup(e,t,n){return nc.resolve()}updateIndexEntries(e,t){return nc.resolve()}}class Gc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xo(ri.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new xo(ri.comparator)).toArray()}}const Wc=new Uint8Array(0);class Zc{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Gc,this.Ge=new So((e=>rs(e)),((e,t)=>is(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Ke.add(t)}));const i={collectionId:n,parent:Ca(r)};return Hc(e).put(i)}return nc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Yr(t),""],!1,!0);return Hc(e).qt(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ra(r.parent))}return n}))}addFieldIndex(e,t){const n=Qc(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);return delete r.indexId,n.add(r).next()}deleteFieldIndex(e,t){const n=Qc(e),r=Xc(e),i=Yc(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=Yc(e);let r=!0;const i=new Map;return nc.forEach(this.Qe(t),(t=>this.getFieldIndex(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Uo();const r=[];return nc.forEach(i,((i,s)=>{var o;kr("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`} to execute ${rs(t)}`);const a=function(e,t){const n=Wi(t);if(void 0===n)return null;for(const r of os(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of Zi(t))for(const t of os(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Zi(t)){const t=0===i.kind?as(e,i.fieldPath,e.startAt):cs(e,i.fieldPath,e.startAt);if(!t.value)return null;n.push(t.value),r&&(r=t.inclusive)}return new vs(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Zi(t)){const t=0===i.kind?cs(e,i.fieldPath,e.endAt):as(e,i.fieldPath,e.endAt);if(!t.value)return null;n.push(t.value),r&&(r=t.inclusive)}return new vs(n,r)}(s,i),h=this.je(i,s,u),d=this.je(i,s,l),f=this.We(i,s,c),p=this.ze(i.indexId,a,h,!!u&&u.inclusive,d,!!l&&l.inclusive,f);return nc.forEach(p,(i=>n.Gt(i,t.limit).next((t=>{t.forEach((t=>{const n=Ii.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return nc.resolve(null)}))}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.He(t[l/c]):Wc,h=n?this.Je(e,a,n[l%c],r):this.Ye(e),d=i?this.Xe(e,a,i[l%c],s):this.Ye(e+1);u.push(...this.createRange(h,d,o.map((t=>this.Je(e,a,t,!0)))))}return u}Je(e,t,n,r){const i=new Bc(e,Ii.empty(),t,n);return r?i:i.ke()}Xe(e,t,n,r){const i=new Bc(e,Ii.empty(),t,n);return r?i.ke():i}Ye(e){return new Bc(e,Ii.empty(),Wc,Wc)}getFieldIndex(e,t){const n=new zc(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{const t=e.filter((e=>n.$e(e)));return t.sort(((e,t)=>t.fields.length-e.fields.length)),t.length>0?t[0]:null}))}Ze(e,t){const n=new jc;for(const r of Zi(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ne(r.kind);Pc.fe.Zt(e,i)}return n.Se()}He(e){const t=new jc;return Pc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const n=new jc;return Pc.fe.Zt(Ri(this.databaseId,t),n.Ne(function(e){const t=Zi(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}We(e,t,n){if(null===n)return[];let r=[];r.push(new jc);let i=0;for(const s of Zi(e)){const e=n[i++];for(const n of r)if(this.en(t,s.fieldPath)&&Oi(e))r=this.nn(r,s,e);else{const t=n.Ne(s.kind);Pc.fe.Zt(e,t)}}return this.sn(r)}je(e,t,n){return null==n?null:this.We(e,t,n.position)}sn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Se();return t}nn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new jc;n.seed(e.Se()),Pc.fe.Zt(s,n.Ne(t.kind)),i.push(n)}return i}en(e,t){return!!e.filters.find((e=>e instanceof us&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Qc(e),r=Xc(e);return(t?n.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.qt()).next((e=>{const t=[];return nc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Yi(t.sequenceNumber,new Ji(_c(t.readTime),new Ii(Ra(t.documentKey)),t.largestBatchId)):Yi.empty(),r=e.fields.map((([e,t])=>new Hi(si.fromServerFormat(e),t)));return new Gi(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Zr(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Qc(e),i=Xc(e);return this.rn(e).next((e=>r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>nc.forEach(t,(t=>i.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Ic(r.readTime),documentKey:Ca(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return nc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?nc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),nc.forEach(i,(n=>this.on(e,t,n).next((t=>{const i=this.un(r,n);return t.isEqual(i)?nc.resolve():this.an(e,r,n,t,i)})))))))}))}cn(e,t,n,r){return Yc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}hn(e,t,n,r){return Yc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}on(e,t,n){const r=Yc(e);let i=new xo($c);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},((e,r)=>{i=i.add(new Bc(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}un(e,t){let n=new xo($c);const r=this.Ze(t,e);if(null==r)return n;const i=Wi(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Oi(s))for(const i of s.arrayValue.values||[])n=n.add(new Bc(t.indexId,e.key,this.He(i),r))}else n=n.add(new Bc(t.indexId,e.key,Wc,r));return n}an(e,t,n,r,i){kr("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Ro(s),c=Ro(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Ro(o)):t?(i(a),a=Ro(s)):(a=Ro(s),c=Ro(o))}}(r,i,$c,(r=>{s.push(this.cn(e,t,n,r))}),(r=>{s.push(this.hn(e,t,n,r))})),nc.waitFor(s)}rn(e){let t=1;return Xc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>$c(e,t))).filter(((e,t,n)=>!t||0!==$c(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=$c(s,e),i=$c(s,t);if(0===n)r[0]=e.ke();else if(n>0&&i<0)r.push(s),r.push(s.ke());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2)i.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Wc,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Wc,[]]));return i}}function Hc(e){return fc(e,"collectionParents")}function Yc(e){return fc(e,"indexEntries")}function Qc(e){return fc(e,"indexConfiguration")}function Xc(e){return fc(e,"indexState")}const Jc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class eu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new eu(e,eu.DEFAULT_COLLECTION_PERCENTILE,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tu(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Wt({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Rr(1===a)})));const u=[];for(const l of n.mutations){const e=Pa(t,l.key.path,n.batchId);s.push(i.delete(e)),u.push(l.key)}return nc.waitFor(s).next((()=>u))}function nu(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Nr();t=e.noDocument}return JSON.stringify(t).length}eu.DEFAULT_COLLECTION_PERCENTILE=10,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eu.DEFAULT=new eu(41943040,eu.DEFAULT_COLLECTION_PERCENTILE,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eu.DISABLED=new eu(-1,0,0);class ru{constructor(e,t,n,r){this.userId=e,this.M=t,this.indexManager=n,this.referenceDelegate=r,this.ln={}}static Yt(e,t,n,r){Rr(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new ru(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return su(e).Wt({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=ou(e),s=su(e);return s.add({}).next((o=>{Rr("number"==typeof o);const a=new pc(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>pa(e.Jt,t))),i=n.mutations.map((t=>pa(e.Jt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.M,this.userId,a),u=[];let l=new xo(((e,t)=>Zr(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Pa(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,La))}return l.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.ln[o]=a.keys()})),nc.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return su(e).get(t).next((e=>e?(Rr(e.userId===this.userId),Tc(this.M,e)):null))}fn(e,t){return this.ln[t]?nc.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.ln[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return su(e).Wt({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Rr(t.batchId>=n),i=Tc(this.M,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return su(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return su(e).qt("userMutationsIndex",t).next((e=>e.map((e=>Tc(this.M,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Oa(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ou(e).Wt({range:r},((n,r,s)=>{const[o,a,c]=n,u=Ra(a);if(o===this.userId&&t.path.isEqual(u))return su(e).get(c).next((e=>{if(!e)throw Nr();Rr(e.userId===this.userId),i.push(Tc(this.M,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xo(Zr);const r=[];return t.forEach((t=>{const i=Oa(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ou(e).Wt({range:s},((e,r,i)=>{const[s,o,a]=e,c=Ra(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),nc.waitFor(r).next((()=>this.dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Oa(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new xo(Zr);return ou(e).Wt({range:s},((e,t,i)=>{const[s,a,c]=e,u=Ra(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()})).next((()=>this.dn(e,o)))}dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(su(e).get(t).next((e=>{if(null===e)throw Nr();Rr(e.userId===this.userId),n.push(Tc(this.M,e))})))})),nc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return tu(e.Ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this._n(t.batchId)})),nc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return nc.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return ou(e).Wt({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ra(e[1]);r.push(t)}else n.done()})).next((()=>{Rr(0===r.length)}))}))}containsKey(e,t){return iu(e,this.userId,t)}wn(e){return au(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function iu(e,t,n){const r=Oa(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ou(e).Wt({range:s,jt:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function su(e){return fc(e,"mutations")}function ou(e){return fc(e,"documentMutations")}function au(e){return fc(e,"mutationQueues")}class cu{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new cu(0)}static yn(){return new cu(-1)}}class uu{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next((t=>{const n=new cu(t.highestTargetId);return t.highestTargetId=n.next(),this.In(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.pn(e).next((e=>Xr.fromTimestamp(new Qr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.pn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.pn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.In(e,r))))}addTargetData(e,t){return this.Tn(e,t).next((()=>this.pn(e).next((n=>(n.targetCount+=1,this.En(t,n),this.In(e,n))))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>lu(e).delete(t.targetId))).next((()=>this.pn(e))).next((t=>(Rr(t.targetCount>0),t.targetCount-=1,this.In(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return lu(e).Wt(((s,o)=>{const a=Ec(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>nc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return lu(e).Wt(((e,n)=>{const r=Ec(n);t(r)}))}pn(e){return hu(e).get("targetGlobalKey").next((e=>(Rr(null!==e),e)))}In(e,t){return hu(e).put("targetGlobalKey",t)}Tn(e,t){return lu(e).put(Sc(this.M,t))}En(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.pn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=rs(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return lu(e).Wt({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Ec(n);is(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=du(e);return t.forEach((t=>{const s=Ca(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),nc.waitFor(r)}removeMatchingKeys(e,t,n){const r=du(e);return nc.forEach(t,(t=>{const i=Ca(t.path);return nc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=du(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=du(e);let i=Uo();return r.Wt({range:n,jt:!0},((e,t,n)=>{const r=Ra(e[1]),s=new Ii(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Ca(t.path),r=IDBKeyRange.bound([n],[Yr(n)],!1,!0);let i=0;return du(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}Et(e,t){return lu(e).get(t).next((e=>e?Ec(e):null))}}function lu(e){return fc(e,"targets")}function hu(e){return fc(e,"targetGlobal")}function du(e){return fc(e,"targetDocuments")}async function fu(e){if(e.code!==Pr.FAILED_PRECONDITION||e.message!==ec)throw e;kr("LocalStore","Unexpectedly lost primary lease")}function pu([e,t],[n,r]){const i=Zr(e,n);return 0===i?Zr(t,r):i}class mu{constructor(e){this.An=e,this.buffer=new xo(pu),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();pu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gu{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){const t=this.Vn?3e5:6e4;kr("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.vn=null,this.Vn=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){ac(e)?kr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await fu(e)}await this.Sn(e)}))}}class yu{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return nc.resolve(Kr.A);const n=new mu(t);return this.Dn.forEachTarget(e,(e=>n.bn(e.sequenceNumber))).next((()=>this.Dn.xn(e,(e=>n.bn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Dn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(kr("LruGarbageCollector","Garbage collection skipped; disabled"),nc.resolve(Jc)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(kr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jc):this.Nn(e,t)))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let n,r,i,s,a,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(kr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),Er()<=o.in.DEBUG&&kr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${r} in `+(a-s)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${e} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-l}ms`),nc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class vu{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new yu(e,t)}(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}kn(e){let t=0;return this.xn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,((e,n)=>t(n)))}addReference(e,t,n){return wu(e,n)}removeReference(e,t,n){return wu(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return wu(e,t)}On(e,t){return function(e,t){let n=!1;return au(e).zt((r=>iu(e,r,t).next((e=>(e&&(n=!0),nc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Mn(e,((s,o)=>{if(o<=t){const t=this.On(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Xr.min()),du(e).delete([0,Ca(s.path)]))))}));r.push(t)}})).next((()=>nc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return wu(e,t)}Mn(e,t){const n=du(e);let r,i=Kr.A;return n.Wt({index:"documentTargetsIndex"},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Kr.A&&t(new Ii(Ra(r)),i),i=o,r=s):i=Kr.A})).next((()=>{i!==Kr.A&&t(new Ii(Ra(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wu(e,t){return du(e).put(function(e,t){return{targetId:0,path:Ca(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class bu{constructor(){this.changes=new So((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ki.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?nc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Iu{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Eu(e).put(n)}removeEntry(e,t,n){return Eu(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],bc(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Fn(e,n))))}getEntry(e,t){let n=Ki.newInvalidDocument(t);return Eu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Su(t))},((e,r)=>{n=this.$n(t,r)})).next((()=>n))}Bn(e,t){let n={size:0,document:Ki.newInvalidDocument(t)};return Eu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Su(t))},((e,r)=>{n={document:this.$n(t,r),size:nu(r)}})).next((()=>n))}getEntries(e,t){let n=Oo();return this.Ln(e,t,((e,t)=>{const r=this.$n(e,t);n=n.insert(e,r)})).next((()=>n))}Un(e,t){let n=Oo(),r=new ko(Ii.comparator);return this.Ln(e,t,((e,t)=>{const i=this.$n(e,t);n=n.insert(e,i),r=r.insert(e,nu(t))})).next((()=>({documents:n,qn:r})))}Ln(e,t,n){if(t.isEmpty())return nc.resolve();let r=new xo(Au);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Su(r.first()),Su(r.last())),s=r.getIterator();let o=s.getNext();return Eu(e).Wt({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ii.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Au(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.Ut(Su(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getAllFromCollection(e,t,n){const r=[t.popLast().toArray(),t.lastSegment(),bc(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Eu(e).qt(IDBKeyRange.bound(r,i,!0)).next((e=>{let t=Oo();for(const n of e){const e=this.$n(Ii.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t}))}getAllFromCollectionGroup(e,t,n,r){let i=Oo();const s=ku(t,n),o=ku(t,Ji.max());return Eu(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.$n(Ii.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new _u(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Tu(e).get("remoteDocumentGlobalKey").next((e=>(Rr(!!e),e)))}Fn(e,t){return Tu(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const e=function(e,t){let n;if(t.document)n=fa(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ii.fromSegments(t.noDocument.path),r=_c(t.noDocument.readTime);n=Ki.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Nr();{const e=Ii.fromSegments(t.unknownDocument.path),r=_c(t.unknownDocument.version);n=Ki.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Qr(e[0],e[1]);return Xr.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!e.isNoDocument()||!e.version.isEqual(Xr.min()))return e}return Ki.newInvalidDocument(e)}}class _u extends bu{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new So((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new xo(((e,t)=>Zr(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Gn.get(i);if(t.push(this.Kn.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=wc(this.Kn.M,s);r=r.add(i.path.popLast());const c=nu(a);n+=c-o.size,t.push(this.Kn.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=wc(this.Kn.M,s.convertToNoDocument(Xr.min()));t.push(this.Kn.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Kn.updateMetadata(e,n)),nc.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next((e=>(this.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Kn.Un(e,t).next((({documents:e,qn:t})=>(t.forEach(((t,n)=>{this.Gn.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function Tu(e){return fc(e,"remoteDocumentGlobal")}function Eu(e){return fc(e,"remoteDocumentsV14")}function Su(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ku(e,t){const n=t.documentKey.path.toArray();return[e,bc(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Au(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Zr(n[s],r[s]),i)return i;return i=Zr(n.length,r.length),i||(i=Zr(n[n.length-2],r[r.length-2]),i||Zr(n[n.length-1],r[r.length-1]))}class Cu{constructor(e){this.M=e}kt(e,t,n,r){const i=new rc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Da,{unique:!0}),e.createObjectStore("documentMutations")}(e),xu(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=nc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),xu(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xr.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").qt().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Da,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return nc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Qn(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.jn(i))))),n<7&&r>=7&&(s=s.next((()=>this.Wn(i)))),n<8&&r>=8&&(s=s.next((()=>this.zn(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.Hn(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Wa});t.createIndex("collectionPathOverlayIndex",Za,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ha,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ma});t.createIndex("documentKeyIndex",Fa),t.createIndex("collectionGroupIndex",Va)}(e))).next((()=>this.Jn(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>{!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:qa}).createIndex("sequenceNumberIndex",za,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ka}).createIndex("documentKeyIndex",Ga,{unique:!1})}(e)}))),s}jn(e){let t=0;return e.store("remoteDocuments").Wt(((e,n)=>{t+=nu(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Qn(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.qt().next((t=>nc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",r).next((n=>nc.forEach(n,(n=>{Rr(n.userId===t.userId);const r=Tc(this.M,n);return tu(e,t.userId,r).next((()=>{}))}))))}))))}Wn(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Wt(((n,i)=>{const s=new ri(n),o=function(e){return[0,Ca(e)]}(s);r.push(t.get(o).next((n=>n?nc.resolve():(n=>t.put({targetId:0,path:Ca(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>nc.waitFor(r)))}))}zn(e,t){e.createObjectStore("collectionParents",{keyPath:$a});const n=t.store("collectionParents"),r=new Gc,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ca(r)})}};return t.store("remoteDocuments").Wt({jt:!0},((e,t)=>{const n=new ri(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Wt({jt:!0},(([e,t,n],r)=>{const s=Ra(t);return i(s.popLast())}))))}Hn(e){const t=e.store("targets");return t.Wt(((e,n)=>{const r=Ec(n),i=Sc(this.M,r);return t.put(i)}))}Jn(e,t){const n=t.store("remoteDocuments"),r=[];return n.Wt(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new Ii(ri.fromString(o.document.name).popFirst(5)):o.noDocument?Ii.fromSegments(o.noDocument.path):o.unknownDocument?Ii.fromSegments(o.unknownDocument.path):Nr()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>nc.waitFor(r)))}}function xu(e){e.createObjectStore("targetDocuments",{keyPath:ja}).createIndex("documentTargetsIndex",Ba,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ua,{unique:!0}),e.createObjectStore("targetGlobal")}const Nu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ru{constructor(e,t,n,r,i,s,o,a,c,u,l=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Yn=i,this.window=s,this.document=o,this.Xn=c,this.Zn=u,this.ts=l,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=e=>Promise.resolve(),!Ru.vt())throw new Lr(Pr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vu(this,r),this.hs=t+"main",this.M=new vc(a),this.ls=new ic(this.hs,this.ts,new Cu(this.M)),this.fs=new uu(this.referenceDelegate,this.M),this.ds=function(e){return new Iu(e)}(this.M),this._s=new xc,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===u&&Ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Lr(Pr.FAILED_PRECONDITION,Nu);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.fs.getHighestSequenceNumber(e)))})).then((e=>{this.es=new Kr(e,this.Xn)})).then((()=>{this.ns=!0})).catch((e=>(this.ls&&this.ls.close(),Promise.reject(e))))}Ts(e){return this.cs=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((async()=>{this.started&&await this.gs()})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ou(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Es(e).next((e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable((()=>this.cs(!1))))}))})).next((()=>this.As(e))).next((t=>this.isPrimary&&!t?this.Rs(e).next((()=>!1)):!!t&&this.Ps(e).next((()=>!0)))))).catch((e=>{if(ac(e))return kr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return kr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable((()=>this.cs(e))),this.isPrimary=e}))}Es(e){return Du(e).get("owner").next((e=>nc.resolve(this.bs(e))))}Vs(e){return Ou(e).delete(this.clientId)}async vs(){if(this.isPrimary&&!this.Ss(this.us,18e5)){this.us=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=fc(e,"clientMetadata");return t.qt().next((e=>{const n=this.Ds(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return nc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.ws)for(const t of e)this.ws.removeItem(this.Cs(t.clientId))}}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.gs().then((()=>this.vs())).then((()=>this.Is()))))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?nc.resolve(!0):Du(e).get("owner").next((t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Lr(Pr.FAILED_PRECONDITION,Nu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ou(e).qt().next((e=>void 0===this.Ds(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&kr("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),await this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new dc(e,Kr.A);return this.Rs(t).next((()=>this.Vs(t)))})),this.ls.close(),this.Os()}Ds(e,t){return e.filter((e=>this.Ss(e.updateTimeMs,t)&&!this.xs(e.clientId)))}Fs(){return this.runTransaction("getActiveClients","readonly",(e=>Ou(e).qt().next((e=>this.Ds(e,18e5).map((e=>e.clientId))))))}get started(){return this.ns}getMutationQueue(e,t){return ru.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Zc(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Dc.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,n){kr("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=14===(s=this.ts)?Ja:13===s?Xa:12===s?Qa:11===s?Ya:void Nr();var s;let o;return this.ls.runTransaction(e,r,i,(r=>(o=new dc(r,this.es?this.es.next():Kr.A),"readwrite-primary"===t?this.Es(o).next((e=>!!e||this.As(o))).next((t=>{if(!t)throw Ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable((()=>this.cs(!1))),new Lr(Pr.FAILED_PRECONDITION,ec);return n(o)})).next((e=>this.Ps(o).next((()=>e)))):this.$s(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}$s(e){return Du(e).get("owner").next((e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Lr(Pr.FAILED_PRECONDITION,Nu)}))}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Du(e).put("owner",t)}static vt(){return ic.vt()}Rs(e){const t=Du(e);return t.get("owner").next((e=>this.bs(e)?(kr("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):nc.resolve()))}Ss(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ar(`Detected an update time that is in the future: ${e} > ${n}`),!1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.gs())))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,a.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return kr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ar("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(I){Ar("Failed to set zombie client id.",I)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(I){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Du(e){return fc(e,"owner")}function Ou(e){return fc(e,"clientMetadata")}function Pu(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Lu{constructor(e,t,n){this.ds=e,this.Bs=t,this.indexManager=n}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.Us(e,t,n)))}Us(e,t,n){return this.ds.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}qs(e,t){e.forEach(((e,n)=>{for(const r of t)r.applyToLocalView(n)}))}Ks(e,t){return this.ds.getEntries(e,t).next((t=>this.Gs(e,t).next((()=>t))))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.qs(t,e)))}Qs(e,t,n){return function(e){return Ii.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Ns(t)?this.Ws(e,t,n):this.zs(e,t,n)}js(e,t){return this.Ls(e,new Ii(t)).next((e=>{let t=Lo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Ws(e,t,n){const r=t.collectionGroup;let i=Lo();return this.indexManager.getCollectionParents(e,r).next((s=>nc.forEach(s,(s=>{const o=function(e,t){return new Ts(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.zs(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}zs(e,t,n){let r;return this.ds.getAllFromCollection(e,t.path,n).next((n=>(r=n,this.Bs.getAllMutationBatchesAffectingQuery(e,t)))).next((e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Ki.newInvalidDocument(n),r=r.insert(n,i)),co(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}})).next((()=>(r.forEach(((e,n)=>{Fs(t,n)||(r=r.remove(e))})),r)))}}class Mu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hs=n,this.Js=r}static Ys(e,t){let n=Uo(),r=Uo();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Mu(e,t.fromCache,n,r)}}class Fu{Xs(e){this.Zs=e}Qs(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Xr.min())?this.ti(e,t):this.Zs.Ks(e,r).next((i=>{const s=this.ei(t,i);return(ks(t)||As(t))&&this.ni(t.limitType,s,r,n)?this.ti(e,t):(Er()<=o.in.DEBUG&&kr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ms(t)),this.Zs.Qs(e,t,Qi(n,-1)).next((e=>(s.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}ei(e,t){let n=new xo(Us(e));return t.forEach(((t,r)=>{Fs(e,r)&&(n=n.add(r))})),n}ni(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ti(e,t){return Er()<=o.in.DEBUG&&kr("QueryEngine","Using full collection scan to execute query:",Ms(t)),this.Zs.Qs(e,t,Ji.min())}}class Vu{constructor(e,t,n,r){this.persistence=e,this.si=t,this.M=r,this.ii=new ko(Zr),this.ri=new So((e=>rs(e)),is),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(n)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Lu(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ii)))}}function Uu(e,t,n,r){return new Vu(e,t,n,r)}async function ju(e,t){const n=Or(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.Bs.getAllMutationBatches(e).next((i=>(r=i,n.ai(t),n.Bs.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Uo();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.ci.Ks(e,o).next((e=>({hi:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Bu(e){const t=Or(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.fs.getLastRemoteSnapshotVersion(e)))}function $u(e,t,n){let r=Uo();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Oo();return n.forEach(((n,i)=>{const s=e.get(n);i.isNoDocument()&&i.version.isEqual(Xr.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):kr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)})),r}))}function qu(e,t){const n=Or(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t))))}function zu(e,t){const n=Or(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.fs.getTargetData(e,t).next((i=>i?(r=i,nc.resolve(r)):n.fs.allocateTargetId(e).next((i=>(r=new yc(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}async function Ku(e,t,n){const r=Or(e),i=r.ii.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ac(e))throw e;kr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)}function Gu(e,t,n){const r=Or(e);let i=Xr.min(),s=Uo();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Or(e),i=r.ri.get(n);return void 0!==i?nc.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,Ds(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.si.Qs(e,t,n?i:Xr.min(),n?s:Uo()))).next((e=>(Hu(r,Vs(t),e),{documents:e,li:s})))))}function Wu(e,t){const n=Or(e),r=Or(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.Et(e,t).next((e=>e?e.target:null))))}function Zu(e,t){const n=Or(e),r=n.oi.get(t)||Xr.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ui.getAllFromCollectionGroup(e,t,Qi(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Hu(n,t,e),e)))}function Hu(e,t,n){let r=Xr.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}async function Yu(e,t,n=Uo()){const r=await zu(e,Ds(kc(t.bundledQuery))),i=Or(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=ra(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i._s.saveNamedQuery(e,t);const o=r.withResumeToken(ci.EMPTY_BYTE_STRING,s);return i.ii=i.ii.insert(o.targetId,o),i.fs.updateTargetData(e,o).next((()=>i.fs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.fs.addMatchingKeys(e,n,r.targetId))).next((()=>i._s.saveNamedQuery(e,t)))}))}class Qu{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return nc.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:ra(n.createTime)}),nc.resolve()}getNamedQuery(e,t){return nc.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:kc(e.bundledQuery),readTime:ra(e.readTime)}}(t)),nc.resolve()}}class Xu{constructor(){this.overlays=new ko(Ii.comparator),this.gi=new Map}getOverlay(e,t){return nc.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Xt(e,t,r)})),nc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.gi.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.gi.delete(n)),nc.resolve()}getOverlaysForCollection(e,t,n){const r=Mo(),i=t.length+1,s=new Ii(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return nc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ko(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Mo(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Mo(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return nc.resolve(o)}Xt(e,t,n){if(null===n)return;const r=this.overlays.get(n.key);if(null!==r){const e=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new gc(t,n));let i=this.gi.get(t);void 0===i&&(i=Uo(),this.gi.set(t,i)),this.gi.set(t,i.add(n.key))}}class Ju{constructor(){this.yi=new xo(el.pi),this.Ii=new xo(el.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const n=new el(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}Ei(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ai(new el(e,t))}Ri(e,t){e.forEach((e=>this.removeReference(e,t)))}Pi(e){const t=new Ii(new ri([])),n=new el(t,e),r=new el(t,e+1),i=[];return this.Ii.forEachInRange([n,r],(e=>{this.Ai(e),i.push(e.key)})),i}bi(){this.yi.forEach((e=>this.Ai(e)))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Ii(new ri([])),n=new el(t,e),r=new el(t,e+1);let i=Uo();return this.Ii.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new el(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class el{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Ii.comparator(e.key,t.key)||Zr(e.vi,t.vi)}static Ti(e,t){return Zr(e.vi,t.vi)||Ii.comparator(e.key,t.key)}}class tl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new xo(el.pi)}checkEmpty(e){return nc.resolve(0===this.Bs.length)}addMutationBatch(e,t,n,r){const i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];const s=new pc(i,t,n,r);this.Bs.push(s);for(const o of r)this.Di=this.Di.add(new el(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return nc.resolve(s)}lookupMutationBatch(e,t){return nc.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.xi(n),i=r<0?0:r;return nc.resolve(this.Bs.length>i?this.Bs[i]:null)}getHighestUnacknowledgedBatchId(){return nc.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return nc.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new el(t,0),r=new el(t,Number.POSITIVE_INFINITY),i=[];return this.Di.forEachInRange([n,r],(e=>{const t=this.Ci(e.vi);i.push(t)})),nc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xo(Zr);return t.forEach((e=>{const t=new el(e,0),r=new el(e,Number.POSITIVE_INFINITY);this.Di.forEachInRange([t,r],(e=>{n=n.add(e.vi)}))})),nc.resolve(this.Ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ii.isDocumentKey(i)||(i=i.child(""));const s=new el(new Ii(i),0);let o=new xo(Zr);return this.Di.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),s),nc.resolve(this.Ni(o))}Ni(e){const t=[];return e.forEach((e=>{const n=this.Ci(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Rr(0===this.ki(t.batchId,"removed")),this.Bs.shift();let n=this.Di;return nc.forEach(t.mutations,(r=>{const i=new el(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Di=n}))}_n(e){}containsKey(e,t){const n=new el(t,0),r=this.Di.firstAfterOrEqual(n);return nc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.Bs.length,nc.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nl{constructor(e){this.Mi=e,this.docs=new ko(Ii.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return nc.resolve(n?n.document.mutableCopy():Ki.newInvalidDocument(t))}getEntries(e,t){let n=Oo();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ki.newInvalidDocument(e))})),nc.resolve(n)}getAllFromCollection(e,t,n){let r=Oo();const i=new Ii(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||es(Xi(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return nc.resolve(r)}getAllFromCollectionGroup(e,t,n,r){Nr()}Oi(e,t){return nc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new rl(this)}getSize(e){return nc.resolve(this.size)}}class rl extends bu{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Kn.addEntry(e,r)):this.Kn.removeEntry(n)})),nc.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class il{constructor(e){this.persistence=e,this.Fi=new So((e=>rs(e)),is),this.lastRemoteSnapshotVersion=Xr.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Ju,this.targetCount=0,this.Li=cu.gn()}forEachTarget(e,t){return this.Fi.forEach(((e,n)=>t(n))),nc.resolve()}getLastRemoteSnapshotVersion(e){return nc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nc.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),nc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),nc.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new cu(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,nc.resolve()}updateTargetData(e,t){return this.Tn(t),nc.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,nc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fi.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fi.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),nc.waitFor(i).next((()=>r))}getTargetCount(e){return nc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fi.get(t)||null;return nc.resolve(n)}addMatchingKeys(e,t,n){return this.Bi.Ei(t,n),nc.resolve()}removeMatchingKeys(e,t,n){this.Bi.Ri(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),nc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),nc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Bi.Vi(t);return nc.resolve(n)}containsKey(e,t){return nc.resolve(this.Bi.containsKey(t))}}class sl{constructor(e,t){this.Ui={},this.overlays={},this.es=new Kr(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new il(this),this.indexManager=new Kc,this.ds=function(e){return new nl(e)}((e=>this.referenceDelegate.qi(e))),this.M=new vc(t),this._s=new Qu(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Ui[e.toKey()];return n||(n=new tl(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,n){kr("MemoryPersistence","Starting transaction:",e);const r=new ol(this.es.next());return this.referenceDelegate.Ki(),n(r).next((e=>this.referenceDelegate.Gi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Qi(e,t){return nc.or(Object.values(this.Ui).map((n=>()=>n.containsKey(e,t))))}}class ol extends tc{constructor(e){super(),this.currentSequenceNumber=e}}class al{constructor(e){this.persistence=e,this.ji=new Ju,this.Wi=null}static zi(e){return new al(e)}get Hi(){if(this.Wi)return this.Wi;throw Nr()}addReference(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),nc.resolve()}removeReference(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),nc.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),nc.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach((e=>this.Hi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nc.forEach(this.Hi,(n=>{const r=Ii.fromPath(n);return this.Ji(e,r).next((e=>{e||t.removeEntry(r,Xr.min())}))})).next((()=>(this.Wi=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ji(e,t).next((e=>{e?this.Hi.delete(t.toString()):this.Hi.add(t.toString())}))}qi(e){return 0}Ji(e,t){return nc.or([()=>nc.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function cl(e,t){return`firestore_clients_${e}_${t}`}function ul(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function ll(e,t){return`firestore_targets_${e}_${t}`}class hl{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Yi(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Lr(r.error.code,r.error.message))),s?new hl(e,t,r.state,i):(Ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dl{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Yi(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Lr(n.error.code,n.error.message))),i?new dl(e,n.state,r):(Ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Bo();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=bi(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new fl(e,i):(Ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pl{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pl(t.clientId,t.onlineState):(Ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ml{constructor(){this.activeTargetIds=Bo()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gl{constructor(e,t,n,r,i){this.window=e,this.Yn=t,this.persistenceKey=n,this.er=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new ko(Zr),this.started=!1,this.rr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ur=cl(this.persistenceKey,this.er),this.ar=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.ir=this.ir.insert(this.er,new ml),this.cr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.dr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this._r=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Fs();for(const n of e){if(n===this.er)continue;const e=this.getItem(cl(this.persistenceKey,n));if(e){const t=fl.Yi(n,e);t&&(this.ir=this.ir.insert(t.clientId,t))}}this.wr();const t=this.storage.getItem(this.dr);if(t){const e=this.mr(t);e&&this.gr(e)}for(const n of this.rr)this.sr(n);this.rr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,n){this.pr(e,t,n),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ll(this.persistenceKey,e));if(n){const r=dl.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ll(this.persistenceKey,e))}updateQueryState(e,t,n){this.Er(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ir(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return kr("SharedClientState","READ",e,t),t}setItem(e,t){kr("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){kr("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){const t=e;if(t.storageArea===this.storage){if(kr("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ur)return void Ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.cr.test(t.key)){if(null==t.newValue){const e=this.Pr(t.key);return this.br(e,null)}{const e=this.Vr(t.key,t.newValue);if(e)return this.br(e.clientId,e)}}else if(this.hr.test(t.key)){if(null!==t.newValue){const e=this.vr(t.key,t.newValue);if(e)return this.Sr(e)}}else if(this.lr.test(t.key)){if(null!==t.newValue){const e=this.Dr(t.key,t.newValue);if(e)return this.Cr(e)}}else if(t.key===this.dr){if(null!==t.newValue){const e=this.mr(t.newValue);if(e)return this.gr(e)}}else if(t.key===this.ar){const e=function(e){let t=Kr.A;if(null!=e)try{const n=JSON.parse(e);Rr("number"==typeof n),t=n}catch(e){Ar("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Kr.A&&this.sequenceNumberHandler(e)}else if(t.key===this._r){const e=this.Nr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.kr(e))))}}else this.rr.push(t)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,n){const r=new hl(this.currentUser,e,t,n),i=ul(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}Ir(e){const t=ul(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){const t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}Er(e,t,n){const r=ll(this.persistenceKey,e),i=new dl(e,t,n);this.setItem(r,i.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const n=this.Pr(e);return fl.Yi(n,t)}vr(e,t){const n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hl.Yi(new Ir(i),r,t)}Dr(e,t){const n=this.lr.exec(e),r=Number(n[1]);return dl.Yi(r,t)}mr(e){return pl.Yi(e)}Nr(e){return JSON.parse(e)}async Sr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Mr(e.batchId,e.state,e.error);kr("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const n=t?this.ir.insert(e,t):this.ir.remove(e),r=this.yr(this.ir),i=this.yr(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Fr(s,o).then((()=>{this.ir=n}))}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Bo();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class yl{constructor(){this.$r=new ml,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,n){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new ml,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vl{Lr(e){}shutdown(){}}class wl{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){kr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){kr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const bl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Il{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class _l extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.io=t+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,n,r,i){const s=this.uo(e,t);kr("RestConnection","Sending: ",s,n);const o={};return this.ao(o,r,i),this.co(e,s,o,n).then((e=>(kr("RestConnection","Received: ",e),e)),(t=>{throw Cr("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t}))}ho(e,t,n,r,i){return this.oo(e,t,n,r,i)}ao(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_r,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}uo(e,t){const n=bl[e];return`${this.io}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,n,r){return new Promise(((i,s)=>{const o=new vr;o.listenOnce(fr.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case dr.NO_ERROR:const t=o.getResponseJson();kr("Connection","XHR received:",JSON.stringify(t)),i(t);break;case dr.TIMEOUT:kr("Connection",'RPC "'+e+'" timed out'),s(new Lr(Pr.DEADLINE_EXCEEDED,"Request time out"));break;case dr.HTTP_ERROR:const n=o.getStatus();if(kr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pr).indexOf(t)>=0?t:Pr.UNKNOWN}(e.status);s(new Lr(t,e.message))}else s(new Lr(Pr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Lr(Pr.UNAVAILABLE,"Connection failed."));break;default:Nr()}}finally{kr("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}lo(e,t,n){const r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=lr(),s=hr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new gr({})),this.ao(o.initMessageHeaders,t,n),(0,a.uI)()||(0,a.b$)()||(0,a.d)()||(0,a.w1)()||(0,a.Mn)()||(0,a.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const c=r.join("");kr("Connection","Creating WebChannel: "+c,o);const u=i.createWebChannel(c,o);let l=!1,h=!1;const d=new Il({Wr:e=>{h?kr("Connection","Not sending because WebChannel is closed:",e):(l||(kr("Connection","Opening WebChannel transport."),u.open(),l=!0),kr("Connection","WebChannel sending:",e),u.send(e))},zr:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,yr.EventType.OPEN,(()=>{h||kr("Connection","WebChannel transport opened.")})),f(u,yr.EventType.CLOSE,(()=>{h||(h=!0,kr("Connection","WebChannel transport closed"),d.no())})),f(u,yr.EventType.ERROR,(e=>{h||(h=!0,Cr("Connection","WebChannel transport errored:",e),d.no(new Lr(Pr.UNAVAILABLE,"The operation could not be completed")))})),f(u,yr.EventType.MESSAGE,(e=>{var t;if(!h){const n=e.data[0];Rr(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){kr("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Io[e];if(void 0!==t)return Eo(t)}(e),n=i.message;void 0===t&&(t=Pr.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),h=!0,d.no(new Lr(t,n)),u.close()}else kr("Connection","WebChannel received:",n),d.so(n)}})),f(s,pr.STAT_EVENT,(e=>{e.stat===mr.PROXY?kr("Connection","Detected buffering proxy"):e.stat===mr.NOPROXY&&kr("Connection","Detected no buffering proxy")})),setTimeout((()=>{d.eo()}),0),d}}function Tl(){return"undefined"!=typeof window?window:null}function El(){return"undefined"!=typeof document?document:null}function Sl(e){return new Jo(e,!0)}class kl{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Yn=e,this.timerId=t,this.fo=n,this._o=r,this.wo=i,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),n=Math.max(0,Date.now()-this.po),r=Math.max(0,t-n);r>0&&kr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,r,(()=>(this.po=Date.now(),e()))),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class Al{constructor(e,t,n,r,i,s,o,a){this.Yn=e,this.Ro=n,this.Po=r,this.bo=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new kl(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}async stop(){this.Co()&&await this.close(0)}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(()=>this.Oo())))}Fo(e){this.$o(),this.stream.send(e)}async Oo(){if(this.xo())return this.close(0)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}async close(e,t){this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==e?this.Do.reset():t&&t.code===Pr.RESOURCE_EXHAUSTED?(Ar(t.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):t&&t.code===Pr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Yr(t)}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Vo===t&&this.qo(e,n)}),(t=>{e((()=>{const e=new Lr(Pr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ko(e)}))}))}qo(e,t){const n=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((()=>{n((()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,(()=>(this.xo()&&(this.state=3),Promise.resolve()))),this.listener.Hr())))})),this.stream.Yr((e=>{n((()=>this.Ko(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}No(){this.state=5,this.Do.To((async()=>{this.state=0,this.start()}))}Ko(e){return kr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget((()=>this.Vo===e?t():(kr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cl extends Al{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.M=i}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Nr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.N?(Rr(void 0===t||"string"==typeof t),ci.fromBase64String(t||"")):(Rr(void 0===t||t instanceof Uint8Array),ci.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Pr.UNKNOWN:Eo(e.code);return new Lr(t,e.message||"")}(o);n=new Go(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=aa(e,r.document.name),s=ra(r.document.updateTime),o=new qi({mapValue:{fields:r.document.fields}}),a=Ki.newFoundDocument(i,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new zo(c,u,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=aa(e,r.document),s=r.readTime?ra(r.readTime):Xr.min(),o=Ki.newNoDocument(i,s),a=r.removedTargetIds||[];n=new zo([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=aa(e,r.document),s=r.removedTargetIds||[];n=new zo([],s,i,null)}else{if(!("filter"in t))return Nr();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new bo(r),s=e.targetId;n=new Ko(s,i)}}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Xr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Xr.min():t.readTime?ra(t.readTime):Xr.min()}(e);return this.listener.Qo(t,n)}jo(e){const t={};t.database=la(this.M),t.addTarget=function(e,t){let n;const r=t.target;return n=ss(r)?{documents:ga(e,r)}:{query:ya(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ta(e,t.resumeToken):t.snapshotVersion.compareTo(Xr.min())>0&&(n.readTime=ea(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nr()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}Wo(e){const t={};t.database=la(this.M),t.removeTarget=e,this.Fo(t)}}class xl extends Al{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.M=i,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Rr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function(e,t){return e&&e.length>0?(Rr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ra(e.updateTime):ra(t);return n.isEqual(Xr.min())&&(n=ra(t)),new ro(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ra(e.commitTime);return this.listener.Yo(n,t)}return Rr(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=la(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>pa(this.M,e)))};this.Fo(t)}}class Nl extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.M=r,this.tu=!1}eu(){if(this.tu)throw new Lr(Pr.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,n){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.bo.oo(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Pr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Lr(Pr.UNKNOWN,e.toString())}))}ho(e,t,n){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.bo.ho(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Pr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Lr(Pr.UNKNOWN,e.toString())}))}terminate(){this.tu=!0}}class Rl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve()))))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Ar(t),this.iu=!1):kr("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Dl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=i,this._u.Lr((e=>{n.enqueueAndForget((async()=>{Bl(this)&&(kr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Or(e);t.fu.add(4),await Pl(t),t.wu.set("Unknown"),t.fu.delete(4),await Ol(t)}(this))}))})),this.wu=new Rl(n,r)}}async function Ol(e){if(Bl(e))for(const t of e.du)await t(!0)}async function Pl(e){for(const t of e.du)await t(!1)}function Ll(e,t){const n=Or(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),jl(n)?Ul(n):sh(n).xo()&&Fl(n,t))}function Ml(e,t){const n=Or(e),r=sh(n);n.lu.delete(t),r.xo()&&Vl(n,t),0===n.lu.size&&(r.xo()?r.Mo():Bl(n)&&n.wu.set("Unknown"))}function Fl(e,t){e.mu.Z(t.targetId),sh(e).jo(t)}function Vl(e,t){e.mu.Z(t),sh(e).Wo(t)}function Ul(e){e.mu=new Zo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.lu.get(t)||null}),sh(e).start(),e.wu.ru()}function jl(e){return Bl(e)&&!sh(e).Co()&&e.lu.size>0}function Bl(e){return 0===Or(e).fu.size}function $l(e){e.mu=void 0}async function ql(e){e.lu.forEach(((t,n)=>{Fl(e,t)}))}async function zl(e,t){$l(e),jl(e)?(e.wu.au(t),Ul(e)):e.wu.set("Unknown")}async function Kl(e,t,n){if(e.wu.set("Online"),t instanceof Go&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.lu.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.lu.delete(r),e.mu.removeTarget(r))}(e,t)}catch(n){kr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Gl(e,n)}else if(t instanceof zo?e.mu.ut(t):t instanceof Ko?e.mu._t(t):e.mu.ht(t),!n.isEqual(Xr.min()))try{const t=await Bu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.mu.yt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.lu.get(t);if(!n)return;e.lu.set(t,n.withResumeToken(ci.EMPTY_BYTE_STRING,n.snapshotVersion)),Vl(e,t);const r=new yc(n.target,t,1,n.sequenceNumber);Fl(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){kr("RemoteStore","Failed to raise snapshot:",t),await Gl(e,t)}}async function Gl(e,t,n){if(!ac(t))throw t;e.fu.add(1),await Pl(e),e.wu.set("Offline"),n||(n=()=>Bu(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{kr("RemoteStore","Retrying IndexedDB access"),await n(),e.fu.delete(1),await Ol(e)}))}function Wl(e,t){return t().catch((n=>Gl(e,n,t)))}async function Zl(e){const t=Or(e),n=oh(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;Hl(t);)try{const e=await qu(t.localStore,r);if(null===e){0===t.hu.length&&n.Mo();break}r=e.batchId,Yl(t,e)}catch(e){await Gl(t,e)}Ql(t)&&Xl(t)}function Hl(e){return Bl(e)&&e.hu.length<10}function Yl(e,t){e.hu.push(t);const n=oh(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function Ql(e){return Bl(e)&&!oh(e).Co()&&e.hu.length>0}function Xl(e){oh(e).start()}async function Jl(e){oh(e).Zo()}async function eh(e){const t=oh(e);for(const n of e.hu)t.Jo(n.mutations)}async function th(e,t,n){const r=e.hu.shift(),i=mc.from(r,t,n);await Wl(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Zl(e)}async function nh(e,t){t&&oh(e).Ho&&await async function(e,t){if(To(n=t.code)&&n!==Pr.ABORTED){const n=e.hu.shift();oh(e).ko(),await Wl(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Zl(e)}var n}(e,t),Ql(e)&&Xl(e)}async function rh(e,t){const n=Or(e);n.asyncQueue.verifyOperationInProgress(),kr("RemoteStore","RemoteStore received new credentials");const r=Bl(n);n.fu.add(3),await Pl(n),r&&n.wu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.fu.delete(3),await Ol(n)}async function ih(e,t){const n=Or(e);t?(n.fu.delete(2),await Ol(n)):t||(n.fu.add(2),await Pl(n),n.wu.set("Unknown"))}function sh(e){return e.gu||(e.gu=function(e,t,n){const r=Or(e);return r.eu(),new Cl(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:ql.bind(null,e),Yr:zl.bind(null,e),Qo:Kl.bind(null,e)}),e.du.push((async t=>{t?(e.gu.ko(),jl(e)?Ul(e):e.wu.set("Unknown")):(await e.gu.stop(),$l(e))}))),e.gu}function oh(e){return e.yu||(e.yu=function(e,t,n){const r=Or(e);return r.eu(),new xl(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Jl.bind(null,e),Yr:nh.bind(null,e),Xo:eh.bind(null,e),Yo:th.bind(null,e)}),e.du.push((async t=>{t?(e.yu.ko(),await Zl(e)):(await e.yu.stop(),e.hu.length>0&&(kr("RemoteStore",`Stopping write stream with ${e.hu.length} pending writes`),e.hu=[]))}))),e.yu}class ah{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ah(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lr(Pr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ch(e,t){if(Ar("AsyncQueue",`${t}: ${e}`),ac(e))return new Lr(Pr.UNAVAILABLE,`${t}: ${e}`);throw e}class uh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ii.comparator(t.key,n.key):(e,t)=>Ii.comparator(e.key,t.key),this.keyedMap=Lo(),this.sortedSet=new ko(this.comparator)}static emptySet(e){return new uh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new uh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class lh{constructor(){this.pu=new ko(Ii.comparator)}track(e){const t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Nr():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class hh{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new hh(e,t,uh.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ps(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class dh{constructor(){this.Tu=void 0,this.listeners=[]}}class fh{constructor(){this.queries=new So((e=>Ls(e)),Ps),this.onlineState="Unknown",this.Eu=new Set}}async function ph(e,t){const n=Or(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new dh),i)try{s.Tu=await n.onListen(r)}catch(e){const n=ch(e,`Initialization of query '${Ms(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Au(n.onlineState),s.Tu&&t.Ru(s.Tu)&&vh(n)}async function mh(e,t){const n=Or(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function gh(e,t){const n=Or(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.Ru(i)&&(r=!0);t.Tu=i}}r&&vh(n)}function yh(e,t,n){const r=Or(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function vh(e){e.Eu.forEach((e=>{e.next()}))}class wh{constructor(e,t,n){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=n||{}}Ru(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new hh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}vu(e){if(e.docChanges.length>0)return!0;const t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Du(e){e=hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class bh{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class Ih{constructor(e){this.M=e}fi(e){return aa(this.M,e)}di(e){return e.metadata.exists?fa(this.M,e.document,!1):Ki.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return ra(e)}}class _h{constructor(e,t,n){this.Nu=e,this.localStore=t,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Th(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=ri.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,n=new Ih(this.M);for(const r of e)if(r.metadata.queries){const e=n.fi(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Uo()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Or(e);let s=Uo(),o=Oo();for(const u of n){const e=t.fi(u.metadata.name);u.document&&(s=s.add(e));const n=t.di(u);n.setReadTime(t._i(u.metadata.readTime)),o=o.insert(e,n)}const a=i.ui.newChangeBuffer({trackRemovals:!0}),c=await zu(i,function(e){return Ds(Ss(ri.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>$u(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.fs.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.fs.addMatchingKeys(e,s,c.targetId))).next((()=>i.ci.Gs(e,t))).next((()=>t))))))}(this.localStore,new Ih(this.M),this.documents,this.Nu.id),t=this.Mu(this.documents);for(const n of this.queries)await Yu(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:e}}}function Th(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Eh{constructor(e){this.key=e}}class Sh{constructor(e){this.key=e}}class kh{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Uo(),this.mutatedKeys=Uo(),this.Uu=Us(e),this.qu=new uh(this.Uu)}get Ku(){return this.$u}Gu(e,t){const n=t?t.Qu:new lh,r=t?t.qu:this.qu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=ks(this.query)&&r.size===this.query.limit?r.last():null,c=As(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),l=Fs(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.ju(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Uu(l,a)>0||c&&this.Uu(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),ks(this.query)||As(this.query))for(;s.size>this.query.limit;){const e=ks(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{qu:s,Qu:n,ni:o,mutatedKeys:i}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const i=e.Qu.Iu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nr()}};return n(e)-n(t)}(e.type,t.type)||this.Uu(e.doc,t.doc))),this.Wu(n);const s=t?this.zu():[],o=0===this.Lu.size&&this.current?1:0,a=o!==this.Bu;return this.Bu=o,0!==i.length||a?{snapshot:new hh(this.query,e.qu,r,i,e.mutatedKeys,0===o,a,!1),Hu:s}:{Hu:s}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new lh,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach((e=>this.$u=this.$u.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.$u=this.$u.delete(e))),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Uo(),this.qu.forEach((e=>{this.Ju(e.key)&&(this.Lu=this.Lu.add(e.key))}));const t=[];return e.forEach((e=>{this.Lu.has(e)||t.push(new Sh(e))})),this.Lu.forEach((n=>{e.has(n)||t.push(new Eh(n))})),t}Yu(e){this.$u=e.li,this.Lu=Uo();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return hh.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Ah{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ch{constructor(e){this.key=e,this.Zu=!1}}class xh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ta={},this.ea=new So((e=>Ls(e)),Ps),this.na=new Map,this.sa=new Set,this.ia=new ko(Ii.comparator),this.ra=new Map,this.oa=new Ju,this.ua={},this.aa=new Map,this.ca=cu.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}async function Nh(e,t){const n=nd(e);let r,i;const s=n.ea.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Xu();else{const e=await zu(n.localStore,Ds(t));n.isPrimaryClient&&Ll(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Rh(n,t,r,"current"===s)}return i}async function Rh(e,t,n,r){e.la=(t,n,r)=>async function(e,t,n,r){let i=t.view.Gu(n);i.ni&&(i=await Gu(e.localStore,t.query,!1).then((({documents:e})=>t.view.Gu(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return $h(e,t.targetId,o.Hu),o.snapshot}(e,t,n,r);const i=await Gu(e.localStore,t,!0),s=new kh(t,i.li),o=s.Gu(i.documents),a=qo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=s.applyChanges(o,e.isPrimaryClient,a);$h(e,n,c.Hu);const u=new Ah(t,n,s);return e.ea.set(t,u),e.na.has(n)?e.na.get(n).push(t):e.na.set(n,[t]),c.snapshot}async function Dh(e,t){const n=Or(e),r=n.ea.get(t),i=n.na.get(r.targetId);if(i.length>1)return n.na.set(r.targetId,i.filter((e=>!Ps(e,t)))),void n.ea.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ku(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Ml(n.remoteStore,r.targetId),jh(n,r.targetId)})).catch(fu)):(jh(n,r.targetId),await Ku(n.localStore,r.targetId,!0))}async function Oh(e,t){const n=Or(e);try{const e=await function(e,t){const n=Or(e),r=t.snapshotVersion;let i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.fs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.fs.addMatchingKeys(e,s.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?u=u.withResumeToken(ci.EMPTY_BYTE_STRING,Xr.min()).withLastLimboFreeSnapshotVersion(Xr.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.fs.updateTargetData(e,u))}));let a=Oo();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push($u(e,s,t.documentUpdates).next((e=>{a=e}))),!r.isEqual(Xr.min())){const t=n.fs.getLastRemoteSnapshotVersion(e).next((t=>n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return nc.waitFor(o).next((()=>s.apply(e))).next((()=>n.ci.Gs(e,a))).next((()=>a))})).then((e=>(n.ii=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ra.get(t);r&&(Rr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Zu=!0:e.modifiedDocuments.size>0?Rr(r.Zu):e.removedDocuments.size>0&&(Rr(r.Zu),r.Zu=!1))})),await Kh(n,e,t)}catch(e){await fu(e)}}function Ph(e,t,n){const r=Or(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ea.forEach(((n,r)=>{const i=r.view.Au(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Or(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Au(t)&&(r=!0)})),r&&vh(n)}(r.eventManager,t),e.length&&r.ta.Qo(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lh(e,t,n){const r=Or(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ra.get(t),s=i&&i.key;if(s){let e=new ko(Ii.comparator);e=e.insert(s,Ki.newNoDocument(s,Xr.min()));const n=Uo().add(s),i=new $o(Xr.min(),new Map,new xo(Zr),e,n);await Oh(r,i),r.ia=r.ia.remove(s),r.ra.delete(t),zh(r)}else await Ku(r.localStore,t,!1).then((()=>jh(r,t,n))).catch(fu)}async function Mh(e,t){const n=Or(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Or(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=nc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Rr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.Bs.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.Bs.performConsistencyCheck(e))).next((()=>n.ci.Ks(e,r)))}))}(n.localStore,t);Uh(n,r,null),Vh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kh(n,e)}catch(e){await fu(e)}}async function Fh(e,t,n){const r=Or(e);try{const e=await function(e,t){const n=Or(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.Bs.lookupMutationBatch(e,t).next((t=>(Rr(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)))).next((()=>n.Bs.performConsistencyCheck(e))).next((()=>n.ci.Ks(e,r)))}))}(r.localStore,t);Uh(r,t,n),Vh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Kh(r,e)}catch(n){await fu(n)}}function Vh(e,t){(e.aa.get(t)||[]).forEach((e=>{e.resolve()})),e.aa.delete(t)}function Uh(e,t,n){const r=Or(e);let i=r.ua[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function jh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.na.get(t))e.ea.delete(r),n&&e.ta.fa(r,n);e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((t=>{e.oa.containsKey(t)||Bh(e,t)}))}function Bh(e,t){e.sa.delete(t.path.canonicalString());const n=e.ia.get(t);null!==n&&(Ml(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),zh(e))}function $h(e,t,n){for(const r of n)r instanceof Eh?(e.oa.addReference(r.key,t),qh(e,r)):r instanceof Sh?(kr("SyncEngine","Document no longer in limbo: "+r.key),e.oa.removeReference(r.key,t),e.oa.containsKey(r.key)||Bh(e,r.key)):Nr()}function qh(e,t){const n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(kr("SyncEngine","New document in limbo: "+n),e.sa.add(r),zh(e))}function zh(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){const t=e.sa.values().next().value;e.sa.delete(t);const n=new Ii(ri.fromString(t)),r=e.ca.next();e.ra.set(r,new Ch(n)),e.ia=e.ia.insert(n,r),Ll(e.remoteStore,new yc(Ds(Ss(n.path)),r,2,Kr.A))}}async function Kh(e,t,n){const r=Or(e),i=[],s=[],o=[];r.ea.isEmpty()||(r.ea.forEach(((e,a)=>{o.push(r.la(a,t,n).then((e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Mu.Ys(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.ta.Qo(i),await async function(e,t){const n=Or(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>nc.forEach(t,(t=>nc.forEach(t.Hs,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>nc.forEach(t.Js,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ac(e))throw e;kr("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ii.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ii=n.ii.insert(e,i)}}}(r.localStore,s))}async function Gh(e,t){const n=Or(e);if(!n.currentUser.isEqual(t)){kr("SyncEngine","User change. New user:",t.toKey());const e=await ju(n.localStore,t);n.currentUser=t,function(e,t){e.aa.forEach((e=>{e.forEach((e=>{e.reject(new Lr(Pr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Kh(n,e.hi)}}function Wh(e,t){const n=Or(e),r=n.ra.get(t);if(r&&r.Zu)return Uo().add(r.key);{let e=Uo();const r=n.na.get(t);if(!r)return e;for(const t of r){const r=n.ea.get(t);e=e.unionWith(r.view.Ku)}return e}}async function Zh(e,t){const n=Or(e),r=await Gu(n.localStore,t.query,!0),i=t.view.Yu(r);return n.isPrimaryClient&&$h(n,t.targetId,i.Hu),i}async function Hh(e,t){const n=Or(e);return Zu(n.localStore,t).then((e=>Kh(n,e)))}async function Yh(e,t,n,r){const i=Or(e),s=await function(e,t){const n=Or(e),r=Or(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.fn(e,t).next((t=>t?n.ci.Ks(e,t):nc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Zl(i.remoteStore):"acknowledged"===n||"rejected"===n?(Uh(i,t,r||null),Vh(i,t),function(e,t){Or(Or(e).Bs)._n(t)}(i.localStore,t)):Nr(),await Kh(i,s)):kr("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Qh(e,t,n){const r=Or(e),i=[],s=[];for(const o of t){let e;const t=r.na.get(o);if(t&&0!==t.length){e=await zu(r.localStore,Ds(t[0]));for(const e of t){const t=r.ea.get(e),n=await Zh(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Wu(r.localStore,o);e=await zu(r.localStore,t),await Rh(r,Xh(t),o,!1)}i.push(e)}return r.ta.Qo(s),i}function Xh(e){return Es(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Jh(e){const t=Or(e);return Or(Or(t.localStore).persistence).Fs()}async function ed(e,t,n,r){const i=Or(e);if(i.ha)return void kr("SyncEngine","Ignoring unexpected query state notification.");const s=i.na.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Zu(i.localStore,Vs(s[0])),r=$o.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Kh(i,e,r);break}case"rejected":await Ku(i.localStore,t,!0),jh(i,t,r);break;default:Nr()}}async function td(e,t,n){const r=nd(e);if(r.ha){for(const e of t){if(r.na.has(e)){kr("SyncEngine","Adding an already active target "+e);continue}const t=await Wu(r.localStore,e),n=await zu(r.localStore,t);await Rh(r,Xh(t),n.targetId,!1),Ll(r.remoteStore,n)}for(const e of n)r.na.has(e)&&await Ku(r.localStore,e,!1).then((()=>{Ml(r.remoteStore,e),jh(r,e)})).catch(fu)}}function nd(e){const t=Or(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Oh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lh.bind(null,t),t.ta.Qo=gh.bind(null,t.eventManager),t.ta.fa=yh.bind(null,t.eventManager),t}function rd(e){const t=Or(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fh.bind(null,t),t}class id{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=Sl(e.databaseInfo.databaseId),this.sharedClientState=this._a(e),this.persistence=this.wa(e),await this.persistence.start(),this.gcScheduler=this.ma(e),this.localStore=this.ga(e)}ma(e){return null}ga(e){return Uu(this.persistence,new Fu,e.initialUser,this.M)}wa(e){return new sl(al.zi,this.M)}_a(e){return new yl}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sd extends id{constructor(e,t,n){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ya.initialize(this,e),await rd(this.ya.syncEngine),await Zl(this.ya.remoteStore),await this.persistence.Ts((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}ga(e){return Uu(this.persistence,new Fu,e.initialUser,this.M)}ma(e){const t=this.persistence.referenceDelegate.garbageCollector;return new gu(t,e.asyncQueue)}wa(e){const t=Pu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?eu.withCacheSize(this.cacheSizeBytes):eu.DEFAULT;return new Ru(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Tl(),El(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new yl}}class od extends sd{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ya.syncEngine;this.sharedClientState instanceof gl&&(this.sharedClientState.syncEngine={Mr:Yh.bind(null,t),Or:ed.bind(null,t),Fr:td.bind(null,t),Fs:Jh.bind(null,t),kr:Hh.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ts((async e=>{await async function(e,t){const n=Or(e);if(nd(n),rd(n),!0===t&&!0!==n.ha){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Qh(n,e.toArray());n.ha=!0,await ih(n.remoteStore,!0);for(const r of t)Ll(n.remoteStore,r)}else if(!1===t&&!1!==n.ha){const e=[];let t=Promise.resolve();n.na.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(jh(n,i),Ku(n.localStore,i,!0)))),Ml(n.remoteStore,i)})),await t,await Qh(n,e),function(e){const t=Or(e);t.ra.forEach(((e,n)=>{Ml(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new ko(Ii.comparator)}(n),n.ha=!1,await ih(n.remoteStore,!1)}}(this.ya.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())}))}_a(e){const t=Tl();if(!gl.vt(t))throw new Lr(Pr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Pu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gl(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ad{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ph(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gh.bind(null,this.syncEngine),await ih(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new fh}createDatastore(e){const t=Sl(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new _l(r));var r;return function(e,t,n,r){return new Nl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Ph(this.syncEngine,e,0),s=wl.vt()?new wl:new vl,new Dl(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new xh(e,t,n,r,i,s);return o&&(a.ha=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Or(e);kr("RemoteStore","RemoteStore shutting down."),t.fu.add(5),await Pl(t),t._u.shutdown(),t.wu.set("Unknown")}(this.remoteStore)}}function cd(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class ud{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ld{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Mr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((e=>{e&&e.xu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Ta.cancel()}async getMetadata(){return this.metadata.promise}async da(){return await this.getMetadata(),this.Aa()}async Aa(){const e=await this.Ra();if(null===e)return null;const t=this.Ea.decode(e),n=Number(t);isNaN(n)&&this.Pa(`length string (${t}) is not valid number`);const r=await this.ba(n);return new bh(JSON.parse(r),e.length+n)}Va(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ra(){for(;this.Va()<0&&!(await this.va()););if(0===this.buffer.length)return null;const e=this.Va();e<0&&this.Pa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ba(e){for(;this.buffer.length<e;)await this.va()&&this.Pa("Reached the end of bundle when more is expected.");const t=this.Ea.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}async va(){const e=await this.Ta.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class hd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Lr(Pr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Or(e),r=la(n.M)+"/documents",i={documents:t.map((e=>oa(n.M,e)))},s=await n.ho("BatchGetDocuments",r,i),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Rr(!!t.found),t.found.name,t.found.updateTime;const n=aa(e,t.found.name),r=ra(t.found.updateTime),i=new qi({mapValue:{fields:t.found.fields}});return Ki.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Rr(!!t.missing),Rr(!!t.readTime);const n=aa(e,t.missing),r=ra(t.readTime);return Ki.newNoDocument(n,r)}(e,t):Nr()}(n.M,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Rr(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new vo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ii.fromPath(t);this.mutations.push(new wo(n,this.precondition(n)))})),await async function(e,t){const n=Or(e),r=la(n.M)+"/documents",i={writes:t.map((e=>pa(n.M,e)))};await n.oo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Nr();t=Xr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Lr(Pr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?io.updateTime(t):io.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Xr.min()))throw new Lr(Pr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return io.updateTime(t)}return io.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dd{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.Sa=5,this.Do=new kl(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){this.Do.To((async()=>{const e=new hd(this.datastore),t=this.Ca(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.xa(e)}))))})).catch((e=>{this.xa(e)}))}))}Ca(e){try{const t=this.updateFunction(e);return!vi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Da(),Promise.resolve())))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!To(t)}return!1}}class fd{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ir.UNAUTHENTICATED,this.clientId=Wr.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{kr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(kr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Lr(Pr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ch(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function pd(e,t){e.asyncQueue.verifyOperationInProgress(),kr("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ju(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function md(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gd(e);kr("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>rh(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>rh(t.remoteStore,n))),e.onlineComponents=t}async function gd(e){return e.offlineComponents||(kr("FirestoreClient","Using default OfflineComponentProvider"),await pd(e,new id)),e.offlineComponents}async function yd(e){return e.onlineComponents||(kr("FirestoreClient","Using default OnlineComponentProvider"),await md(e,new ad)),e.onlineComponents}function vd(e){return gd(e).then((e=>e.persistence))}function wd(e){return gd(e).then((e=>e.localStore))}function bd(e){return yd(e).then((e=>e.remoteStore))}function Id(e){return yd(e).then((e=>e.syncEngine))}async function _d(e){const t=await yd(e),n=t.eventManager;return n.onListen=Nh.bind(null,t.syncEngine),n.onUnlisten=Dh.bind(null,t.syncEngine),n}function Td(e,t,n={}){const r=new Mr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ud({next:s=>{t.enqueueAndForget((()=>mh(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Lr(Pr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Lr(Pr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new wh(Ss(n.path),s,{includeMetadataChanges:!0,Cu:!0});return ph(e,o)}(await _d(e),e.asyncQueue,t,n,r))),r.promise}function Ed(e,t,n={}){const r=new Mr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ud({next:n=>{t.enqueueAndForget((()=>mh(e,o))),n.fromCache&&"server"===r.source?i.reject(new Lr(Pr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new wh(n,s,{includeMetadataChanges:!0,Cu:!0});return ph(e,o)}(await _d(e),e.asyncQueue,t,n,r))),r.promise}function Sd(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new ld(e,t)}(function(e,t){if(e instanceof Uint8Array)return cd(e,t);if(e instanceof ArrayBuffer)return cd(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Sl(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Or(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Or(e),r=ra(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n._s.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Th(r));const i=new _h(r,e.localStore,t.M);let s=await t.da();for(;s;){const e=await i.ku(s);e&&n._updateProgress(e),s=await t.da()}const o=await i.complete();return await Kh(e,o.Fu,void 0),await function(e,t){const n=Or(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n._s.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ou)}catch(e){return Cr("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Id(e),i,r)}))}const kd=new Map;function Ad(e,t,n){if(!n)throw new Lr(Pr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Cd(e,t,n,r){if(!0===t&&!0===r)throw new Lr(Pr.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function xd(e){if(!Ii.isDocumentKey(e))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Nd(e){if(Ii.isDocumentKey(e))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Rd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Nr()}function Dd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lr(Pr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rd(e);throw new Lr(Pr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Od(e,t){if(t<=0)throw new Lr(Pr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Pd{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Lr(Pr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Lr(Pr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Cd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ld{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pd({}),this._settingsFrozen=!1,e instanceof yi?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lr(Pr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yi(e.options.projectId)}(e))}get app(){if(!this._app)throw new Lr(Pr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Lr(Pr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Vr;switch(e.type){case"gapi":const t=e.client;return Rr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new $r(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Lr(Pr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kd.get(e);t&&(kr("ComponentProvider","Removing Datastore"),kd.delete(e),t.terminate())}(this),Promise.resolve()}}function Md(e,t,n,r={}){var i;const s=(e=Dd(e,Ld))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Cr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ir.MOCK_USER;else{t=(0,a.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Lr(Pr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ir(s)}e._authCredentials=new Ur(new Fr(t,n))}}class Fd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ud(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fd(this.firestore,e,this._key)}}class Vd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vd(this.firestore,e,this._query)}}class Ud extends Vd{constructor(e,t,n){super(e,t,Ss(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fd(this.firestore,null,new Ii(e))}withConverter(e){return new Ud(this.firestore,e,this._path)}}function jd(e,t,...n){if(e=(0,a.m9)(e),Ad("collection","path",t),e instanceof Ld){const r=ri.fromString(t,...n);return Nd(r),new Ud(e,null,r)}{if(!(e instanceof Fd||e instanceof Ud))throw new Lr(Pr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ri.fromString(t,...n));return Nd(r),new Ud(e.firestore,null,r)}}function Bd(e,t){if(e=Dd(e,Ld),Ad("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vd(e,null,function(e){return new Ts(ri.emptyPath(),e)}(t))}function $d(e,t,...n){if(e=(0,a.m9)(e),1===arguments.length&&(t=Wr.R()),Ad("doc","path",t),e instanceof Ld){const r=ri.fromString(t,...n);return xd(r),new Fd(e,null,new Ii(r))}{if(!(e instanceof Fd||e instanceof Ud))throw new Lr(Pr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ri.fromString(t,...n));return xd(r),new Fd(e.firestore,e instanceof Ud?e.converter:null,new Ii(r))}}function qd(e,t){return e=(0,a.m9)(e),t=(0,a.m9)(t),(e instanceof Fd||e instanceof Ud)&&(t instanceof Fd||t instanceof Ud)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function zd(e,t){return e=(0,a.m9)(e),t=(0,a.m9)(t),e instanceof Vd&&t instanceof Vd&&e.firestore===t.firestore&&Ps(e._query,t._query)&&e.converter===t.converter}class Kd{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new kl(this,"async_queue_retry"),this.qa=()=>{const e=El();e&&kr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const e=El();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=El();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise((()=>{}));const t=new Mr;return this.Ga((()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ma.push(e),this.Qa())))}async Qa(){if(0!==this.Ma.length){try{await this.Ma[0](),this.Ma.shift(),this.Do.reset()}catch(I){if(!ac(I))throw I;kr("AsyncQueue","Operation failed with retryable error: "+I)}this.Ma.length>0&&this.Do.To((()=>this.Qa()))}}Ga(e){const t=this.ka.then((()=>(this.Ba=!0,e().catch((e=>{this.$a=e,this.Ba=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ar("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Ba=!1,e))))));return this.ka=t,t}enqueueAfterDelay(e,t,n){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const r=ah.createAndSchedule(this,e,t,n,(e=>this.ja(e)));return this.Fa.push(r),r}Ka(){this.$a&&Nr()}verifyOperationInProgress(){}async Wa(){let e;do{e=this.ka,await e}while(e!==this.ka)}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then((()=>{this.Fa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()}))}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Gd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Wd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Zd=-1;class Hd extends Ld{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new Kd,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Qd(this),this._firestoreClient.terminate()}}function Yd(e){return e._firestoreClient||Qd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Qd(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new gi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new fd(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Xd(e,t){cf(e=Dd(e,Hd));const n=Yd(e),r=e._freezeSettings(),i=new ad;return ef(n,i,new sd(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Jd(e){cf(e=Dd(e,Hd));const t=Yd(e),n=e._freezeSettings(),r=new ad;return ef(t,r,new od(r,n.cacheSizeBytes))}function ef(e,t,n){const r=new Mr;return e.asyncQueue.enqueue((async()=>{try{await pd(e,n),await md(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Pr.FAILED_PRECONDITION||e.code===Pr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then((()=>r.promise))}function tf(e){if(e._initialized&&!e._terminated)throw new Lr(Pr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Mr;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!ic.vt())return Promise.resolve();const t=e+"main";await ic.delete(t)}(Pu(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function nf(e){return function(e){const t=new Mr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Or(e);Bl(n.remoteStore)||kr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Or(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.Bs.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.aa.get(e)||[];r.push(t),n.aa.set(e,r)}catch(e){const n=ch(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Id(e),t))),t.promise}(Yd(e=Dd(e,Hd)))}function rf(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await vd(e),n=await bd(e);return t.setNetworkEnabled(!0),function(e){const t=Or(e);return t.fu.delete(0),Ol(t)}(n)}))}(Yd(e=Dd(e,Hd)))}function sf(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await vd(e),n=await bd(e);return t.setNetworkEnabled(!1),async function(e){const t=Or(e);t.fu.add(0),await Pl(t),t.wu.set("Offline")}(n)}))}(Yd(e=Dd(e,Hd)))}function of(e,t){const n=Yd(e=Dd(e,Hd)),r=new Wd;return Sd(n,e._databaseId,t,r),r}function af(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Or(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n._s.getNamedQuery(e,t)))}(await wd(e),t)))}(Yd(e=Dd(e,Hd)),t).then((t=>t?new Vd(e,null,t.query):null))}function cf(e){if(e._initialized||e._terminated)throw new Lr(Pr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Lr(Pr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lf(ci.fromBase64String(e))}catch(e){throw new Lr(Pr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new lf(ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hf{constructor(e){this._methodName=e}}class df{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lr(Pr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lr(Pr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zr(this._lat,e._lat)||Zr(this._long,e._long)}}const ff=/^__.*__$/;class pf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new po(e,this.data,this.fieldMask,t,this.fieldTransforms):new fo(e,this.data,t,this.fieldTransforms)}}class mf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new po(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nr()}}class yf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ya(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new yf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}sc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Ff(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(gf(this.Xa)&&ff.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class vf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||Sl(e)}ac(e,t,n,r=!1){return new yf({Xa:e,methodName:t,uc:n,path:si.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function wf(e){const t=e._freezeSettings(),n=Sl(e._databaseId);return new vf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bf(e,t,n,r,i,s={}){const o=e.ac(s.merge||s.mergeFields?2:0,t,n,i);Of("Data must be an object, but it was:",o,r);const a=Rf(r,o);let c,u;if(s.merge)c=new oi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Pf(t,r,n);if(!o.contains(i))throw new Lr(Pr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Vf(e,i)||e.push(i)}c=new oi(e),u=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=o.fieldTransforms;return new pf(new qi(a),c,u)}class If extends hf{_toFieldTransform(e){if(2!==e.Xa)throw 1===e.Xa?e.rc(`${this._methodName}() can only appear at the top level of your update data`):e.rc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof If}}function _f(e,t,n){return new yf({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}class Tf extends hf{_toFieldTransform(e){return new no(e.path,new Zs)}isEqual(e){return e instanceof Tf}}class Ef extends hf{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=_f(this,e,!0),n=this.cc.map((e=>Nf(e,t))),r=new Hs(n);return new no(e.path,r)}isEqual(e){return this===e}}class Sf extends hf{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=_f(this,e,!0),n=this.cc.map((e=>Nf(e,t))),r=new Qs(n);return new no(e.path,r)}isEqual(e){return this===e}}class kf extends hf{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Js(e.M,qs(e.M,this.hc));return new no(e.path,t)}isEqual(e){return this===e}}function Af(e,t,n,r){const i=e.ac(1,t,n);Of("Data must be an object, but it was:",i,r);const s=[],o=qi.empty();ei(r,((e,r)=>{const c=Mf(t,e,n);r=(0,a.m9)(r);const u=i.sc(c);if(r instanceof If)s.push(c);else{const e=Nf(r,u);null!=e&&(s.push(c),o.set(c,e))}}));const c=new oi(s);return new mf(o,c,i.fieldTransforms)}function Cf(e,t,n,r,i,s){const o=e.ac(1,t,n),c=[Pf(t,r,n)],u=[i];if(s.length%2!=0)throw new Lr(Pr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let a=0;a<s.length;a+=2)c.push(Pf(t,s[a])),u.push(s[a+1]);const l=[],h=qi.empty();for(let f=c.length-1;f>=0;--f)if(!Vf(l,c[f])){const e=c[f];let t=u[f];t=(0,a.m9)(t);const n=o.sc(e);if(t instanceof If)l.push(e);else{const r=Nf(t,n);null!=r&&(l.push(e),h.set(e,r))}}const d=new oi(l);return new mf(h,d,o.fieldTransforms)}function xf(e,t,n,r=!1){return Nf(n,e.ac(r?4:3,t))}function Nf(e,t){if(Df(e=(0,a.m9)(e)))return Of("Unsupported field value:",t,e),Rf(e,t);if(e instanceof hf)return function(e,t){if(!gf(t.Xa))throw t.rc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.rc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Nf(i,t.ic(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,a.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qs(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Qr.fromDate(e);return{timestampValue:ea(t.M,n)}}if(e instanceof Qr){const n=new Qr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ea(t.M,n)}}if(e instanceof df)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lf)return{bytesValue:ta(t.M,e._byteString)};if(e instanceof Fd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.rc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ia(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc(`Unsupported field value: ${Rd(e)}`)}(e,t)}function Rf(e,t){const n={};return ti(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ei(e,((e,r)=>{const i=Nf(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Df(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qr||e instanceof df||e instanceof lf||e instanceof Fd||e instanceof hf)}function Of(e,t,n){if(!Df(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Rd(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function Pf(e,t,n){if((t=(0,a.m9)(t))instanceof uf)return t._internalPath;if("string"==typeof t)return Mf(e,t);throw Ff("Field path arguments must be of type string or ",e,!1,void 0,n)}const Lf=new RegExp("[~\\*/\\[\\]]");function Mf(e,t,n){if(t.search(Lf)>=0)throw Ff(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new uf(...t.split("."))._internalPath}catch(r){throw Ff(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ff(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Lr(Pr.INVALID_ARGUMENT,a+e+c)}function Vf(e,t){return e.some((e=>e.isEqual(t)))}class Uf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jf extends Uf{data(){return super.data()}}function Bf(e,t){return"string"==typeof t?Mf(e,t):t instanceof uf?t._internalPath:t._delegate._internalPath}class $f{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qf extends Uf{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Bf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class zf extends qf{data(e={}){return super.data(e)}}class Kf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $f(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new zf(this._firestore,this._userDataWriter,n.key,n,new $f(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lr(Pr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new zf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new $f(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new zf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $f(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Gf(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Gf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nr()}}function Wf(e,t){return e instanceof qf&&t instanceof qf?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Kf&&t instanceof Kf&&e._firestore===t._firestore&&zd(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Zf(e){if(As(e)&&0===e.explicitOrderBy.length)throw new Lr(Pr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hf{}function Yf(e,...t){for(const n of t)e=n._apply(e);return e}class Qf extends Hf{constructor(e,t,n){super(),this.lc=e,this.fc=t,this.dc=n,this.type="where"}_apply(e){const t=wf(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){dp(o,s);const t=[];for(const n of o)t.push(hp(r,e,n));a={arrayValue:{values:t}}}else a=hp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||dp(o,s),a=xf(n,"where",o,"in"===s||"not-in"===s);const c=us.create(i,s,a);return function(e,t){if(t.S()){const n=xs(e);if(null!==n&&!n.isEqual(t.field))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=Cs(e);null!==r&&fp(e,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Lr(Pr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Lr(Pr.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,c),c}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Vd(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Ts(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function Xf(e,t,n){const r=t,i=Bf("where",e);return new Qf(i,r,n)}class Jf extends Hf{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Lr(Pr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Lr(Pr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ws(t,n);return function(e,t){if(null===Cs(e)){const n=xs(e);null!==n&&fp(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new Vd(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ts(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ep(e,t="asc"){const n=t,r=Bf("orderBy",e);return new Jf(r,n)}class tp extends Hf{constructor(e,t,n){super(),this.type=e,this.wc=t,this.mc=n}_apply(e){return new Vd(e.firestore,e.converter,Os(e._query,this.wc,this.mc))}}function np(e){return Od("limit",e),new tp("limit",e,"F")}function rp(e){return Od("limitToLast",e),new tp("limitToLast",e,"L")}class ip extends Hf{constructor(e,t,n){super(),this.type=e,this.gc=t,this.yc=n}_apply(e){const t=lp(e,this.type,this.gc,this.yc);return new Vd(e.firestore,e.converter,function(e,t){return new Ts(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function sp(...e){return new ip("startAt",e,!0)}function op(...e){return new ip("startAfter",e,!1)}class ap extends Hf{constructor(e,t,n){super(),this.type=e,this.gc=t,this.yc=n}_apply(e){const t=lp(e,this.type,this.gc,this.yc);return new Vd(e.firestore,e.converter,function(e,t){return new Ts(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function cp(...e){return new ap("endBefore",e,!1)}function up(...e){return new ap("endAt",e,!0)}function lp(e,t,n,r){if(n[0]=(0,a.m9)(n[0]),n[0]instanceof Uf)return function(e,t,n,r,i){if(!r)throw new Lr(Pr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of Rs(e))if(o.field.isKeyField())s.push(Ri(t,r.key));else{const e=r.data.field(o.field);if(fi(e))throw new Lr(Pr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new vs(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=wf(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Lr(Pr.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Ns(e)&&-1!==s.indexOf("/"))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(ri.fromString(s));if(!Ii.isDocumentKey(n))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Ii(n);a.push(Ri(t,i))}else{const e=xf(n,r,s);a.push(e)}}return new vs(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function hp(e,t,n){if("string"==typeof(n=(0,a.m9)(n))){if(""===n)throw new Lr(Pr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ns(t)&&-1!==n.indexOf("/"))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ri.fromString(n));if(!Ii.isDocumentKey(r))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ri(e,new Ii(r))}if(n instanceof Fd)return Ri(e,n._key);throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(n)}.`)}function dp(e,t){if(!Array.isArray(e)||0===e.length)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Lr(Pr.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function fp(e,t,n){if(!n.isEqual(t))throw new Lr(Pr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class pp{convertValue(e,t="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nr()}}convertObject(e,t){const n={};return ei(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new df(hi(e.latitude),hi(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=pi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(mi(e));default:return null}}convertTimestamp(e){const t=li(e);return new Qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ri.fromString(e);Rr(Aa(n));const r=new yi(n.get(1),n.get(3)),i=new Ii(n.popFirst(5));return r.isEqual(t)||Ar(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function mp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class gp extends pp{constructor(e){super(),this.firestore=e}convertBytes(e){return new lf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fd(this.firestore,null,t)}}class yp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wf(e)}set(e,t,n){this._verifyNotCommitted();const r=vp(e,this._firestore),i=mp(r.converter,t,n),s=bf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,io.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=vp(e,this._firestore);let s;return s="string"==typeof(t=(0,a.m9)(t))||t instanceof uf?Cf(this._dataReader,"WriteBatch.update",i._key,t,n,r):Af(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,io.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vp(e,this._firestore);return this._mutations=this._mutations.concat(new vo(t._key,io.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Lr(Pr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vp(e,t){if((e=(0,a.m9)(e)).firestore!==t)throw new Lr(Pr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function wp(e){e=Dd(e,Fd);const t=Dd(e.firestore,Hd);return Td(Yd(t),e._key).then((n=>Op(t,e,n)))}class bp extends pp{constructor(e){super(),this.firestore=e}convertBytes(e){return new lf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fd(this.firestore,null,t)}}function Ip(e){e=Dd(e,Fd);const t=Dd(e.firestore,Hd),n=Yd(t),r=new bp(t);return function(e,t){const n=new Mr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Or(e);return n.persistence.runTransaction("read document","readonly",(e=>n.ci.Ls(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Lr(Pr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=ch(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await wd(e),t,n))),n.promise}(n,e._key).then((n=>new qf(t,r,e._key,n,new $f(null!==n&&n.hasLocalMutations,!0),e.converter)))}function _p(e){e=Dd(e,Fd);const t=Dd(e.firestore,Hd);return Td(Yd(t),e._key,{source:"server"}).then((n=>Op(t,e,n)))}function Tp(e){e=Dd(e,Vd);const t=Dd(e.firestore,Hd),n=Yd(t),r=new bp(t);return Zf(e._query),Ed(n,e._query).then((n=>new Kf(t,r,e,n)))}function Ep(e){e=Dd(e,Vd);const t=Dd(e.firestore,Hd),n=Yd(t),r=new bp(t);return function(e,t){const n=new Mr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Gu(e,t,!0),i=new kh(t,r.li),s=i.Gu(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=ch(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await wd(e),t,n))),n.promise}(n,e._query).then((n=>new Kf(t,r,e,n)))}function Sp(e){e=Dd(e,Vd);const t=Dd(e.firestore,Hd),n=Yd(t),r=new bp(t);return Ed(n,e._query,{source:"server"}).then((n=>new Kf(t,r,e,n)))}function kp(e,t,n){e=Dd(e,Fd);const r=Dd(e.firestore,Hd),i=mp(e.converter,t,n);return Dp(r,[bf(wf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,io.none())])}function Ap(e,t,n,...r){e=Dd(e,Fd);const i=Dd(e.firestore,Hd),s=wf(i);let o;return o="string"==typeof(t=(0,a.m9)(t))||t instanceof uf?Cf(s,"updateDoc",e._key,t,n,r):Af(s,"updateDoc",e._key,t),Dp(i,[o.toMutation(e._key,io.exists(!0))])}function Cp(e){return Dp(Dd(e.firestore,Hd),[new vo(e._key,io.none())])}function xp(e,t){const n=Dd(e.firestore,Hd),r=$d(e),i=mp(e.converter,t);return Dp(n,[bf(wf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,io.exists(!1))]).then((()=>r))}function Np(e,...t){var n,r,i;e=(0,a.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Gd(t[o])||(s=t[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Gd(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,l,h;if(e instanceof Fd)l=Dd(e.firestore,Hd),h=Ss(e._key.path),u={next:n=>{t[o]&&t[o](Op(l,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Dd(e,Vd);l=Dd(n.firestore,Hd),h=n._query;const r=new bp(l);u={next:e=>{t[o]&&t[o](new Kf(l,r,n,e))},error:t[o+1],complete:t[o+2]},Zf(e._query)}return function(e,t,n,r){const i=new ud(r),s=new wh(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>ph(await _d(e),s))),()=>{i.Ia(),e.asyncQueue.enqueueAndForget((async()=>mh(await _d(e),s)))}}(Yd(l),h,c,u)}function Rp(e,t){return function(e,t){const n=new ud(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Or(e).Eu.add(t),t.next()}(await _d(e),n))),()=>{n.Ia(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Or(e).Eu.delete(t)}(await _d(e),n)))}}(Yd(e=Dd(e,Hd)),Gd(t)?t:{next:t})}function Dp(e,t){return function(e,t){const n=new Mr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=rd(e);try{const e=await function(e,t){const n=Or(e),r=Qr.now(),i=t.reduce(((e,t)=>e.add(t.key)),Uo());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.ci.Ks(e,i).next((i=>{s=i;const o=[];for(const e of t){const t=uo(e,s.get(e.key));null!=t&&o.push(new po(e.key,t,zi(t.value.mapValue),io.exists(!0)))}return n.Bs.addMutationBatch(e,r,o,t)})))).then((e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.ua[e.currentUser.toKey()];r||(r=new ko(Zr)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(r,e.batchId,n),await Kh(r,e.changes),await Zl(r.remoteStore)}catch(e){const t=ch(e,"Failed to persist write");n.reject(t)}}(await Id(e),t,n))),n.promise}(Yd(e),t)}function Op(e,t,n){const r=n.docs.get(t._key),i=new bp(e);return new qf(e,i,t._key,r,new $f(n.hasPendingWrites,n.fromCache),t.converter)}class Pp extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wf(e)}get(e){const t=vp(e,this._firestore),n=new gp(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Nr();const r=e[0];if(r.isFoundDocument())return new Uf(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Uf(this._firestore,n,t._key,null,t.converter);throw Nr()}))}set(e,t,n){const r=vp(e,this._firestore),i=mp(r.converter,t,n),s=bf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=vp(e,this._firestore);let s;return s="string"==typeof(t=(0,a.m9)(t))||t instanceof uf?Cf(this._dataReader,"Transaction.update",i._key,t,n,r):Af(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=vp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vp(e,this._firestore),n=new bp(this._firestore);return super.get(e).then((e=>new qf(this._firestore,n,t._key,e._document,new $f(!1,!1),t.converter)))}}function Lp(e,t){return function(e,t){const n=new Mr;return e.asyncQueue.enqueueAndForget((async()=>{const r=await function(e){return yd(e).then((e=>e.datastore))}(e);new dd(e.asyncQueue,r,t,n).run()})),n.promise}(Yd(e=Dd(e,Hd)),(n=>t(new Pp(e,n))))}function Mp(){return new If("deleteField")}function Fp(){return new Tf("serverTimestamp")}function Vp(...e){return new Ef("arrayUnion",e)}function Up(...e){return new Sf("arrayRemove",e)}function jp(e){return new kf("increment",e)}!function(e,t=!0){!function(e){_r=e}(i.SDK_VERSION),(0,i._registerComponent)(new s.wA("firestore",((e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Hd(r,new jr(e.getProvider("auth-internal")),new zr(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i}),"PUBLIC")),(0,i.registerVersion)(br,"3.4.8",e),(0,i.registerVersion)(br,"3.4.8","esm2017")}()},4444:function(e,t,n){"use strict";n.d(t,{BH:function(){return c},G6:function(){return w},L:function(){return s},LL:function(){return T},Mn:function(){return v},Sg:function(){return u},UG:function(){return d},X3:function(){return B},ZB:function(){return a},ZR:function(){return _},b$:function(){return m},d:function(){return g},eu:function(){return I},hl:function(){return b},jU:function(){return f},m9:function(){return L},ne:function(){return D},pd:function(){return R},r3:function(){return S},ru:function(){return p},tV:function(){return o},uI:function(){return h},vZ:function(){return A},w1:function(){return y},xO:function(){return x},xb:function(){return k},z$:function(){return l},zd:function(){return N}});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function a(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=a(e[n],t[n]));return e}class c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function u(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}function l(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function h(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function d(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function f(){return"object"===typeof self&&self.self===self}function p(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function m(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function g(){return l().indexOf("Electron/")>=0}function y(){const e=l();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function v(){return l().indexOf("MSAppHost/")>=0}function w(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"object"===typeof indexedDB}function I(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class _ extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new _(r,o,n)}}const E=/\{\$([^}]+)}/g;function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(C(n)&&C(s)){if(!A(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function C(e){return null!==e&&"object"===typeof e}function x(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function N(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function D(e,t){const n=new O(e,t);return n.subscribe.bind(n)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=P),void 0===r.error&&(r.error=P),void 0===r.complete&&(r.complete=P);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function P(){}function L(e){return e&&e._delegate?e._delegate:e}function M(e,t){return new Promise(((n,r)=>{e.onsuccess=e=>{n(e.target.result)},e.onerror=e=>{var n;r(`${t}: ${null===(n=e.target.error)||void 0===n?void 0:n.message}`)}}))}class F{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,t="readonly"){return new V(this._db.transaction.call(this._db,e,t))}createObjectStore(e,t){return new U(this._db.createObjectStore(e,t))}close(){this._db.close()}}class V{constructor(e){this._transaction=e,this.complete=new Promise(((e,t)=>{this._transaction.oncomplete=function(){e()},this._transaction.onerror=()=>{t(this._transaction.error)},this._transaction.onabort=()=>{t(this._transaction.error)}}))}objectStore(e){return new U(this._transaction.objectStore(e))}}class U{constructor(e){this._store=e}index(e){return new j(this._store.index(e))}createIndex(e,t,n){return new j(this._store.createIndex(e,t,n))}get(e){return M(this._store.get(e),"Error reading from IndexedDB")}put(e,t){return M(this._store.put(e,t),"Error writing to IndexedDB")}delete(e){return M(this._store.delete(e),"Error deleting from IndexedDB")}clear(){return M(this._store.clear(),"Error clearing IndexedDB object store")}}class j{constructor(e){this._index=e}get(e){return M(this._index.get(e),"Error reading from IndexedDB")}}function B(e,t,n){return new Promise(((r,i)=>{try{const s=indexedDB.open(e,t);s.onsuccess=e=>{r(new F(e.target.result))},s.onerror=e=>{var t;i(`Error opening indexedDB: ${null===(t=e.target.error)||void 0===t?void 0:t.message}`)},s.onupgradeneeded=e=>{n(new F(s.result),e.oldVersion,e.newVersion,new V(s.transaction))}}catch(s){i(`Error opening indexedDB: ${s.message}`)}}))}},8076:function(e,t){"use strict";const n=e=>e,r=(()=>{let e=n;return{configure(t){e=t},generate:t=>e(t),reset(){e=n}}})();t.Z=r},7192:function(e,t,n){"use strict";function r(e,t,n){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>(r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e)),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},8979:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8076);const i={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function s(e,t){return i[t]||`${r.Z.generate(e)}-${t}`}},6087:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(8979);function i(e,t){const n={};return t.forEach((t=>{n[t]=(0,r.Z)(e,t)})),n}},3321:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(3366),i=n(7462),s=n(7294),o=n(6010),a=n(7925),c=n(7192),u=n(1796),l=n(5596),h=n(1539),d=n(7162),f=n(8216),p=n(8979);function m(e){return(0,p.Z)("MuiButton",e)}var g=(0,n(6087).Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var y=s.createContext({}),v=n(5893);const w=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],b=e=>(0,i.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),I=(0,l.ZP)(d.Z,{shouldForwardProp:e=>(0,l.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,f.Z)(n.color)}`],t[`size${(0,f.Z)(n.size)}`],t[`${n.variant}Size${(0,f.Z)(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((({theme:e,ownerState:t})=>{var n,r;return(0,i.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,i.Z)({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,u.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===t.variant&&"inherit"!==t.color&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,u.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===t.variant&&"inherit"!==t.color&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,u.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===t.variant&&{backgroundColor:(e.vars||e).palette.grey.A100,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===t.variant&&"inherit"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":(0,i.Z)({},"contained"===t.variant&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${g.focusVisible}`]:(0,i.Z)({},"contained"===t.variant&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${g.disabled}`]:(0,i.Z)({color:(e.vars||e).palette.action.disabled},"outlined"===t.variant&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"outlined"===t.variant&&"secondary"===t.color&&{border:`1px solid ${(e.vars||e).palette.action.disabled}`},"contained"===t.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===t.variant&&{padding:"6px 8px"},"text"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].main},"outlined"===t.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${(0,u.Fq)(e.palette[t.color].main,.5)}`},"contained"===t.variant&&{color:e.vars?e.vars.palette.text.primary:null==(n=(r=e.palette).getContrastText)?void 0:n.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],boxShadow:(e.vars||e).shadows[2]},"contained"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},"inherit"===t.color&&{color:"inherit",borderColor:"currentColor"},"small"===t.size&&"text"===t.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"text"===t.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"outlined"===t.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"outlined"===t.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"contained"===t.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"contained"===t.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})}),(({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${g.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${g.disabled}`]:{boxShadow:"none"}})),_=(0,l.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${(0,f.Z)(n.size)}`]]}})((({ownerState:e})=>(0,i.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},b(e)))),T=(0,l.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${(0,f.Z)(n.size)}`]]}})((({ownerState:e})=>(0,i.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},b(e))));var E=s.forwardRef((function(e,t){const n=s.useContext(y),u=(0,a.Z)(n,e),l=(0,h.Z)({props:u,name:"MuiButton"}),{children:d,color:p="primary",component:g="button",className:b,disabled:E=!1,disableElevation:S=!1,disableFocusRipple:k=!1,endIcon:A,focusVisibleClassName:C,fullWidth:x=!1,size:N="medium",startIcon:R,type:D,variant:O="text"}=l,P=(0,r.Z)(l,w),L=(0,i.Z)({},l,{color:p,component:g,disabled:E,disableElevation:S,disableFocusRipple:k,fullWidth:x,size:N,type:D,variant:O}),M=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:s,variant:o,classes:a}=e,u={root:["root",o,`${o}${(0,f.Z)(t)}`,`size${(0,f.Z)(s)}`,`${o}Size${(0,f.Z)(s)}`,"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,f.Z)(s)}`],endIcon:["endIcon",`iconSize${(0,f.Z)(s)}`]},l=(0,c.Z)(u,m,a);return(0,i.Z)({},a,l)})(L),F=R&&(0,v.jsx)(_,{className:M.startIcon,ownerState:L,children:R}),V=A&&(0,v.jsx)(T,{className:M.endIcon,ownerState:L,children:A});return(0,v.jsxs)(I,(0,i.Z)({ownerState:L,className:(0,o.Z)(b,n.className),component:g,disabled:E,focusRipple:!k,focusVisibleClassName:(0,o.Z)(M.focusVisible,C),ref:t,type:D},P,{classes:M,children:[F,d,V]}))}))},7162:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var r=n(7462),i=n(3366),s=n(7294),o=n.t(s,2),a=n(6010),c=n(7192),u=n(5596),l=n(1539),h=n(8031),d=n(9327),f=n(8791);function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var m=s.createContext(null);function g(e,t){var n=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,s.isValidElement)(e)?t(e):e}(e)})),n}function y(e,t,n){return null!=n[t]?n[t]:e.props[t]}function v(e,t,n){var r=g(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),s=[];for(var o in e)o in t?s.length&&(i[o]=s,s=[]):s.push(o);var a={};for(var c in t){if(i[c])for(r=0;r<i[c].length;r++){var u=i[c][r];a[i[c][r]]=n(u)}a[c]=n(c)}for(r=0;r<s.length;r++)a[s[r]]=n(s[r]);return a}(t,r);return Object.keys(i).forEach((function(o){var a=i[o];if((0,s.isValidElement)(a)){var c=o in t,u=o in r,l=t[o],h=(0,s.isValidElement)(l)&&!l.props.in;!u||c&&!h?u||!c||h?u&&c&&(0,s.isValidElement)(l)&&(i[o]=(0,s.cloneElement)(a,{onExited:n.bind(null,a),in:l.props.in,exit:y(a,"exit",e),enter:y(a,"enter",e)})):i[o]=(0,s.cloneElement)(a,{in:!1}):i[o]=(0,s.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:y(a,"exit",e),enter:y(a,"enter",e)})}})),i}var w=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},b=function(e){var t,n;function o(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var a=o.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},o.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,g(n.children,(function(e){return(0,s.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:y(e,"appear",n),enter:y(e,"enter",n),exit:y(e,"exit",n)})}))):v(e,i,o),firstRender:!1}},a.handleExited=function(e,t){var n=g(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,r.Z)({},t.children);return delete n[e.key],{children:n}})))},a.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,i.Z)(e,["component","childFactory"]),o=this.state.contextValue,a=w(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?s.createElement(m.Provider,{value:o},a):s.createElement(m.Provider,{value:o},s.createElement(t,r,a))},o}(s.Component);b.propTypes={},b.defaultProps={component:"div",childFactory:function(e){return e}};var I=b,_=(n(8357),n(8679),n(4478));o.useInsertionEffect?o.useInsertionEffect:s.useLayoutEffect;function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,_.O)(t)}var E=function(){var e=T.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var S=n(5893);var k=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:c,in:u,onExited:l,timeout:h}=e,[d,f]=s.useState(!1),p=(0,a.Z)(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),m={width:c,height:c,top:-c/2+o,left:-c/2+i},g=(0,a.Z)(n.child,d&&n.childLeaving,r&&n.childPulsate);return u||d||f(!0),s.useEffect((()=>{if(!u&&null!=l){const e=setTimeout(l,h);return()=>{clearTimeout(e)}}}),[l,u,h]),(0,S.jsx)("span",{className:p,style:m,children:(0,S.jsx)("span",{className:g})})},A=n(6087);var C=(0,A.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);const x=["center","classes","className"];let N,R,D,O,P=e=>e;const L=E(N||(N=P`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),M=E(R||(R=P`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),F=E(D||(D=P`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),V=(0,u.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),U=(0,u.ZP)(k,{name:"MuiTouchRipple",slot:"Ripple"})(O||(O=P`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),C.rippleVisible,L,550,(({theme:e})=>e.transitions.easing.easeInOut),C.ripplePulsate,(({theme:e})=>e.transitions.duration.shorter),C.child,C.childLeaving,M,550,(({theme:e})=>e.transitions.easing.easeInOut),C.childPulsate,F,(({theme:e})=>e.transitions.easing.easeInOut));var j=s.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiTouchRipple"}),{center:o=!1,classes:c={},className:u}=n,h=(0,i.Z)(n,x),[d,f]=s.useState([]),p=s.useRef(0),m=s.useRef(null);s.useEffect((()=>{m.current&&(m.current(),m.current=null)}),[d]);const g=s.useRef(!1),y=s.useRef(null),v=s.useRef(null),w=s.useRef(null);s.useEffect((()=>()=>{clearTimeout(y.current)}),[]);const b=s.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:s}=e;f((e=>[...e,(0,S.jsx)(U,{classes:{ripple:(0,a.Z)(c.ripple,C.ripple),rippleVisible:(0,a.Z)(c.rippleVisible,C.rippleVisible),ripplePulsate:(0,a.Z)(c.ripplePulsate,C.ripplePulsate),child:(0,a.Z)(c.child,C.child),childLeaving:(0,a.Z)(c.childLeaving,C.childLeaving),childPulsate:(0,a.Z)(c.childPulsate,C.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},p.current)])),p.current+=1,m.current=s}),[c]),_=s.useCallback(((e={},t={},n)=>{const{pulsate:r=!1,center:i=o||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===e.type&&g.current)return void(g.current=!1);"touchstart"===e.type&&(g.current=!0);const a=s?null:w.current,c=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let u,l,h;if(i||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)u=Math.round(c.width/2),l=Math.round(c.height/2);else{const{clientX:t,clientY:n}=e.touches?e.touches[0]:e;u=Math.round(t-c.left),l=Math.round(n-c.top)}if(i)h=Math.sqrt((2*c.width**2+c.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-u),u)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-l),l)+2;h=Math.sqrt(e**2+t**2)}e.touches?null===v.current&&(v.current=()=>{b({pulsate:r,rippleX:u,rippleY:l,rippleSize:h,cb:n})},y.current=setTimeout((()=>{v.current&&(v.current(),v.current=null)}),80)):b({pulsate:r,rippleX:u,rippleY:l,rippleSize:h,cb:n})}),[o,b]),T=s.useCallback((()=>{_({},{pulsate:!0})}),[_]),E=s.useCallback(((e,t)=>{if(clearTimeout(y.current),"touchend"===e.type&&v.current)return v.current(),v.current=null,void(y.current=setTimeout((()=>{E(e,t)})));v.current=null,f((e=>e.length>0?e.slice(1):e)),m.current=t}),[]);return s.useImperativeHandle(t,(()=>({pulsate:T,start:_,stop:E})),[T,_,E]),(0,S.jsx)(V,(0,r.Z)({className:(0,a.Z)(c.root,C.root,u),ref:w},h,{children:(0,S.jsx)(I,{component:null,exit:!0,children:d})}))})),B=n(8979);function $(e){return(0,B.Z)("MuiButtonBase",e)}var q=(0,A.Z)("MuiButtonBase",["root","disabled","focusVisible"]);const z=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],K=(0,u.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${q.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});var G=s.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiButtonBase"}),{action:o,centerRipple:u=!1,children:p,className:m,component:g="button",disabled:y=!1,disableRipple:v=!1,disableTouchRipple:w=!1,focusRipple:b=!1,LinkComponent:I="a",onBlur:_,onClick:T,onContextMenu:E,onDragLeave:k,onFocus:A,onFocusVisible:C,onKeyDown:x,onKeyUp:N,onMouseDown:R,onMouseLeave:D,onMouseUp:O,onTouchEnd:P,onTouchMove:L,onTouchStart:M,tabIndex:F=0,TouchRippleProps:V,touchRippleRef:U,type:B}=n,q=(0,i.Z)(n,z),G=s.useRef(null),W=s.useRef(null),Z=(0,h.Z)(W,U),{isFocusVisibleRef:H,onFocus:Y,onBlur:Q,ref:X}=(0,f.Z)(),[J,ee]=s.useState(!1);y&&J&&ee(!1),s.useImperativeHandle(o,(()=>({focusVisible:()=>{ee(!0),G.current.focus()}})),[]);const[te,ne]=s.useState(!1);s.useEffect((()=>{ne(!0)}),[]);const re=te&&!v&&!y;function ie(e,t,n=w){return(0,d.Z)((r=>{t&&t(r);return!n&&W.current&&W.current[e](r),!0}))}s.useEffect((()=>{J&&b&&!v&&te&&W.current.pulsate()}),[v,b,J,te]);const se=ie("start",R),oe=ie("stop",E),ae=ie("stop",k),ce=ie("stop",O),ue=ie("stop",(e=>{J&&e.preventDefault(),D&&D(e)})),le=ie("start",M),he=ie("stop",P),de=ie("stop",L),fe=ie("stop",(e=>{Q(e),!1===H.current&&ee(!1),_&&_(e)}),!1),pe=(0,d.Z)((e=>{G.current||(G.current=e.currentTarget),Y(e),!0===H.current&&(ee(!0),C&&C(e)),A&&A(e)})),me=()=>{const e=G.current;return g&&"button"!==g&&!("A"===e.tagName&&e.href)},ge=s.useRef(!1),ye=(0,d.Z)((e=>{b&&!ge.current&&J&&W.current&&" "===e.key&&(ge.current=!0,W.current.stop(e,(()=>{W.current.start(e)}))),e.target===e.currentTarget&&me()&&" "===e.key&&e.preventDefault(),x&&x(e),e.target===e.currentTarget&&me()&&"Enter"===e.key&&!y&&(e.preventDefault(),T&&T(e))})),ve=(0,d.Z)((e=>{b&&" "===e.key&&W.current&&J&&!e.defaultPrevented&&(ge.current=!1,W.current.stop(e,(()=>{W.current.pulsate(e)}))),N&&N(e),T&&e.target===e.currentTarget&&me()&&" "===e.key&&!e.defaultPrevented&&T(e)}));let we=g;"button"===we&&(q.href||q.to)&&(we=I);const be={};"button"===we?(be.type=void 0===B?"button":B,be.disabled=y):(q.href||q.to||(be.role="button"),y&&(be["aria-disabled"]=y));const Ie=(0,h.Z)(X,G),_e=(0,h.Z)(t,Ie);const Te=(0,r.Z)({},n,{centerRipple:u,component:g,disabled:y,disableRipple:v,disableTouchRipple:w,focusRipple:b,tabIndex:F,focusVisible:J}),Ee=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,s={root:["root",t&&"disabled",n&&"focusVisible"]},o=(0,c.Z)(s,$,i);return n&&r&&(o.root+=` ${r}`),o})(Te);return(0,S.jsxs)(K,(0,r.Z)({as:we,className:(0,a.Z)(Ee.root,m),ownerState:Te,onBlur:fe,onClick:T,onContextMenu:oe,onFocus:pe,onKeyDown:ye,onKeyUp:ve,onMouseDown:se,onMouseLeave:ue,onMouseUp:ce,onDragLeave:ae,onTouchEnd:he,onTouchMove:de,onTouchStart:le,ref:_e,tabIndex:y?-1:F,type:B},be,q,{children:[p,re?(0,S.jsx)(j,(0,r.Z)({ref:Z,center:u},V)):null]}))}))},3230:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var r=n(7462),i=n(3366),s=n(9766),o=n(6500);var a=n(1387),c=n(1796);var u={black:"#000",white:"#fff"};var l={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var h={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var d={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var f={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var p={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var m={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var g={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const y=["mode","contrastThreshold","tonalOffset"],v={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:u.white,default:u.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},w={text:{primary:u.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:u.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function b(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,c.$n)(e.main,i):"dark"===t&&(e.dark=(0,c._j)(e.main,s)))}function I(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:o=.2}=e,I=(0,i.Z)(e,y),_=e.primary||function(e="light"){return"dark"===e?{main:p[200],light:p[50],dark:p[400]}:{main:p[700],light:p[400],dark:p[800]}}(t),T=e.secondary||function(e="light"){return"dark"===e?{main:h[200],light:h[50],dark:h[400]}:{main:h[500],light:h[300],dark:h[700]}}(t),E=e.error||function(e="light"){return"dark"===e?{main:d[500],light:d[300],dark:d[700]}:{main:d[700],light:d[400],dark:d[800]}}(t),S=e.info||function(e="light"){return"dark"===e?{main:m[400],light:m[300],dark:m[700]}:{main:m[700],light:m[500],dark:m[900]}}(t),k=e.success||function(e="light"){return"dark"===e?{main:g[400],light:g[300],dark:g[700]}:{main:g[800],light:g[500],dark:g[900]}}(t),A=e.warning||function(e="light"){return"dark"===e?{main:f[400],light:f[300],dark:f[700]}:{main:"#ed6c02",light:f[500],dark:f[900]}}(t);function C(e){return(0,c.mi)(e,w.text.primary)>=n?w.text.primary:v.text.primary}const x=({color:e,name:t,mainShade:n=500,lightShade:i=300,darkShade:s=700})=>{if(!(e=(0,r.Z)({},e)).main&&e[n]&&(e.main=e[n]),!e.hasOwnProperty("main"))throw new Error((0,a.Z)(11,t?` (${t})`:"",n));if("string"!==typeof e.main)throw new Error((0,a.Z)(12,t?` (${t})`:"",JSON.stringify(e.main)));return b(e,"light",i,o),b(e,"dark",s,o),e.contrastText||(e.contrastText=C(e.main)),e},N={dark:w,light:v};return(0,s.Z)((0,r.Z)({common:u,mode:t,primary:x({color:_,name:"primary"}),secondary:x({color:T,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:E,name:"error"}),warning:x({color:A,name:"warning"}),info:x({color:S,name:"info"}),success:x({color:k,name:"success"}),grey:l,contrastThreshold:n,getContrastText:C,augmentColor:x,tonalOffset:o},N[t]),I)}const _=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const T={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function S(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=E,fontSize:a=14,fontWeightLight:c=300,fontWeightRegular:u=400,fontWeightMedium:l=500,fontWeightBold:h=700,htmlFontSize:d=16,allVariants:f,pxToRem:p}=n,m=(0,i.Z)(n,_);const g=a/14,y=p||(e=>e/d*g+"rem"),v=(e,t,n,i,s)=>{return(0,r.Z)({fontFamily:o,fontWeight:e,fontSize:y(t),lineHeight:n},o===E?{letterSpacing:(a=i/t,Math.round(1e5*a)/1e5)+"em"}:{},s,f);var a},w={h1:v(c,96,1.167,-1.5),h2:v(c,60,1.2,-.5),h3:v(u,48,1.167,0),h4:v(u,34,1.235,.25),h5:v(u,24,1.334,0),h6:v(l,20,1.6,.15),subtitle1:v(u,16,1.75,.15),subtitle2:v(l,14,1.57,.1),body1:v(u,16,1.5,.15),body2:v(u,14,1.43,.15),button:v(l,14,1.75,.4,T),caption:v(u,12,1.66,.4),overline:v(u,12,2.66,1,T)};return(0,s.Z)((0,r.Z)({htmlFontSize:d,pxToRem:y,fontFamily:o,fontSize:a,fontWeightLight:c,fontWeightRegular:u,fontWeightMedium:l,fontWeightBold:h},w),m,{clone:!1})}function k(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}var A=["none",k(0,2,1,-1,0,1,1,0,0,1,3,0),k(0,3,1,-2,0,2,2,0,0,1,5,0),k(0,3,3,-2,0,3,4,0,0,1,8,0),k(0,2,4,-1,0,4,5,0,0,1,10,0),k(0,3,5,-1,0,5,8,0,0,1,14,0),k(0,3,5,-1,0,6,10,0,0,1,18,0),k(0,4,5,-2,0,7,10,1,0,2,16,1),k(0,5,5,-3,0,8,10,1,0,3,14,2),k(0,5,6,-3,0,9,12,1,0,3,16,2),k(0,6,6,-3,0,10,14,1,0,4,18,3),k(0,6,7,-4,0,11,15,1,0,4,20,3),k(0,7,8,-4,0,12,17,2,0,5,22,4),k(0,7,8,-4,0,13,19,2,0,5,24,4),k(0,7,9,-4,0,14,21,2,0,5,26,4),k(0,8,9,-5,0,15,22,2,0,6,28,5),k(0,8,10,-5,0,16,24,2,0,6,30,5),k(0,8,11,-5,0,17,26,2,0,6,32,5),k(0,9,11,-5,0,18,28,2,0,7,34,6),k(0,9,12,-6,0,19,29,2,0,7,36,6),k(0,10,13,-6,0,20,31,3,0,8,38,7),k(0,10,13,-6,0,21,33,3,0,8,40,7),k(0,10,14,-6,0,22,35,3,0,8,42,7),k(0,11,14,-7,0,23,36,3,0,9,44,8),k(0,11,15,-7,0,24,38,3,0,9,46,8)];const C=["duration","easing","delay"],x={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},N={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function R(e){return`${Math.round(e)}ms`}function D(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function O(e){const t=(0,r.Z)({},x,e.easing),n=(0,r.Z)({},N,e.duration);return(0,r.Z)({getAutoHeightDuration:D,create:(e=["all"],r={})=>{const{duration:s=n.standard,easing:o=t.easeInOut,delay:a=0}=r;(0,i.Z)(r,C);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof s?s:R(s)} ${o} ${"string"===typeof a?a:R(a)}`)).join(",")}},e,{easing:t,duration:n})}var P={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const L=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function M(e={},...t){const{mixins:n={},palette:a={},transitions:c={},typography:u={}}=e,l=(0,i.Z)(e,L),h=I(a),d=(0,o.Z)(e);let f=(0,s.Z)(d,{mixins:(p=d.breakpoints,d.spacing,m=n,(0,r.Z)({toolbar:{minHeight:56,[`${p.up("xs")} and (orientation: landscape)`]:{minHeight:48},[p.up("sm")]:{minHeight:64}}},m)),palette:h,shadows:A.slice(),typography:S(h,u),transitions:O(c),zIndex:(0,r.Z)({},P)});var p,m;return f=(0,s.Z)(f,l),f=t.reduce(((e,t)=>(0,s.Z)(e,t)),f),f}var F=M()},5596:function(e,t,n){"use strict";n.d(t,{ZP:function(){return De},FO:function(){return Ne}});var r=n(7462),i=n(3366),s=n(7294),o=n.t(s,2),a=n(9122),c=n(8357),u=n(4478),l=(0,s.createContext)("undefined"!==typeof HTMLElement?(0,c.Z)({key:"css"}):null);l.Provider;var h=function(e){return(0,s.forwardRef)((function(t,n){var r=(0,s.useContext)(l);return e(t,r,n)}))},d=(0,s.createContext)({});o.useInsertionEffect&&o.useInsertionEffect;function f(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var p=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},m=a.Z,g=function(e){return"theme"!==e},y=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?m:g},v=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},w=o.useInsertionEffect?o.useInsertionEffect:function(e){e()};var b=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;p(t,n,r);var i;i=function(){return function(e,t,n){p(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)},w(i);return null},I=function e(t,n){var i,o,a=t.__emotion_real===t,c=a&&t.__emotion_base||t;void 0!==n&&(i=n.label,o=n.target);var l=v(t,n,a),p=l||y(c),m=!p("as");return function(){var g=arguments,w=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&w.push("label:"+i+";"),null==g[0]||void 0===g[0].raw)w.push.apply(w,g);else{0,w.push(g[0][0]);for(var I=g.length,_=1;_<I;_++)w.push(g[_],g[0][_])}var T=h((function(e,t,n){var r=m&&e.as||c,i="",a=[],h=e;if(null==e.theme){for(var g in h={},e)h[g]=e[g];h.theme=(0,s.useContext)(d)}"string"===typeof e.className?i=f(t.registered,a,e.className):null!=e.className&&(i=e.className+" ");var v=(0,u.O)(w.concat(a),t.registered,h);i+=t.key+"-"+v.name,void 0!==o&&(i+=" "+o);var I=m&&void 0===l?y(r):p,_={};for(var T in e)m&&"as"===T||I(T)&&(_[T]=e[T]);return _.className=i,_.ref=n,(0,s.createElement)(s.Fragment,null,(0,s.createElement)(b,{cache:t,serialized:v,isStringTag:"string"===typeof r}),(0,s.createElement)(r,_))}));return T.displayName=void 0!==i?i:"Styled("+("string"===typeof c?c:c.displayName||c.name||"Component")+")",T.defaultProps=t.defaultProps,T.__emotion_real=T,T.__emotion_base=c,T.__emotion_styles=w,T.__emotion_forwardProp=l,Object.defineProperty(T,"toString",{value:function(){return"."+o}}),T.withComponent=function(t,i){return e(t,(0,r.Z)({},n,i,{shouldForwardProp:v(T,i,!0)})).apply(void 0,w)},T}},_=I.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){_[e]=_(e)}));var T=_;var E=n(6500),S=n(8320);const k=["variant"];function A(e){return 0===e.length}function C(e){const{variant:t}=e,n=(0,i.Z)(e,k);let r=t||"";return Object.keys(n).sort().forEach((t=>{r+="color"===t?A(r)?e[t]:(0,S.Z)(e[t]):`${A(r)?t:(0,S.Z)(t)}${(0,S.Z)(e[t].toString())}`})),r}var x=n(7730),N=n(4844);var R=function(...e){const t=e.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),n=e=>Object.keys(e).reduce(((n,r)=>t[r]?(0,x.Z)(n,t[r](e)):n),{});return n.propTypes={},n.filterProps=e.reduce(((e,t)=>e.concat(t.filterProps)),[]),n},D=n(8700),O=n(5408);function P(e){return"number"!==typeof e?e:`${e}px solid`}const L=(0,N.Z)({prop:"border",themeKey:"borders",transform:P}),M=(0,N.Z)({prop:"borderTop",themeKey:"borders",transform:P}),F=(0,N.Z)({prop:"borderRight",themeKey:"borders",transform:P}),V=(0,N.Z)({prop:"borderBottom",themeKey:"borders",transform:P}),U=(0,N.Z)({prop:"borderLeft",themeKey:"borders",transform:P}),j=(0,N.Z)({prop:"borderColor",themeKey:"palette"}),B=(0,N.Z)({prop:"borderTopColor",themeKey:"palette"}),$=(0,N.Z)({prop:"borderRightColor",themeKey:"palette"}),q=(0,N.Z)({prop:"borderBottomColor",themeKey:"palette"}),z=(0,N.Z)({prop:"borderLeftColor",themeKey:"palette"}),K=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,D.eI)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,D.NA)(t,e)});return(0,O.k9)(e,e.borderRadius,n)}return null};K.propTypes={},K.filterProps=["borderRadius"];var G=R(L,M,F,V,U,j,B,$,q,z,K);var W=R((0,N.Z)({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),(0,N.Z)({prop:"display"}),(0,N.Z)({prop:"overflow"}),(0,N.Z)({prop:"textOverflow"}),(0,N.Z)({prop:"visibility"}),(0,N.Z)({prop:"whiteSpace"}));var Z=R((0,N.Z)({prop:"flexBasis"}),(0,N.Z)({prop:"flexDirection"}),(0,N.Z)({prop:"flexWrap"}),(0,N.Z)({prop:"justifyContent"}),(0,N.Z)({prop:"alignItems"}),(0,N.Z)({prop:"alignContent"}),(0,N.Z)({prop:"order"}),(0,N.Z)({prop:"flex"}),(0,N.Z)({prop:"flexGrow"}),(0,N.Z)({prop:"flexShrink"}),(0,N.Z)({prop:"alignSelf"}),(0,N.Z)({prop:"justifyItems"}),(0,N.Z)({prop:"justifySelf"}));const H=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,D.eI)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,D.NA)(t,e)});return(0,O.k9)(e,e.gap,n)}return null};H.propTypes={},H.filterProps=["gap"];const Y=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,D.eI)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,D.NA)(t,e)});return(0,O.k9)(e,e.columnGap,n)}return null};Y.propTypes={},Y.filterProps=["columnGap"];const Q=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,D.eI)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,D.NA)(t,e)});return(0,O.k9)(e,e.rowGap,n)}return null};Q.propTypes={},Q.filterProps=["rowGap"];var X=R(H,Y,Q,(0,N.Z)({prop:"gridColumn"}),(0,N.Z)({prop:"gridRow"}),(0,N.Z)({prop:"gridAutoFlow"}),(0,N.Z)({prop:"gridAutoColumns"}),(0,N.Z)({prop:"gridAutoRows"}),(0,N.Z)({prop:"gridTemplateColumns"}),(0,N.Z)({prop:"gridTemplateRows"}),(0,N.Z)({prop:"gridTemplateAreas"}),(0,N.Z)({prop:"gridArea"}));var J=R((0,N.Z)({prop:"position"}),(0,N.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,N.Z)({prop:"top"}),(0,N.Z)({prop:"right"}),(0,N.Z)({prop:"bottom"}),(0,N.Z)({prop:"left"}));var ee=R((0,N.Z)({prop:"color",themeKey:"palette"}),(0,N.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,N.Z)({prop:"backgroundColor",themeKey:"palette"}));var te=(0,N.Z)({prop:"boxShadow",themeKey:"shadows"});function ne(e){return e<=1&&0!==e?100*e+"%":e}const re=(0,N.Z)({prop:"width",transform:ne}),ie=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||O.VO[t]||ne(t)}};return(0,O.k9)(e,e.maxWidth,t)}return null};ie.filterProps=["maxWidth"];const se=(0,N.Z)({prop:"minWidth",transform:ne}),oe=(0,N.Z)({prop:"height",transform:ne}),ae=(0,N.Z)({prop:"maxHeight",transform:ne}),ce=(0,N.Z)({prop:"minHeight",transform:ne});(0,N.Z)({prop:"size",cssProperty:"width",transform:ne}),(0,N.Z)({prop:"size",cssProperty:"height",transform:ne});var ue=R(re,ie,se,oe,ae,ce,(0,N.Z)({prop:"boxSizing"}));const le=(0,N.Z)({prop:"fontFamily",themeKey:"typography"}),he=(0,N.Z)({prop:"fontSize",themeKey:"typography"}),de=(0,N.Z)({prop:"fontStyle",themeKey:"typography"}),fe=(0,N.Z)({prop:"fontWeight",themeKey:"typography"}),pe=(0,N.Z)({prop:"letterSpacing"}),me=(0,N.Z)({prop:"textTransform"}),ge=(0,N.Z)({prop:"lineHeight"}),ye=(0,N.Z)({prop:"textAlign"});var ve=R((0,N.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),le,he,de,fe,pe,ge,ye,me);const we={borders:G.filterProps,display:W.filterProps,flexbox:Z.filterProps,grid:X.filterProps,positions:J.filterProps,palette:ee.filterProps,shadows:te.filterProps,sizing:ue.filterProps,spacing:D.ZP.filterProps,typography:ve.filterProps},be={borders:G,display:W,flexbox:Z,grid:X,positions:J,palette:ee,shadows:te,sizing:ue,spacing:D.ZP,typography:ve};Object.keys(we).reduce(((e,t)=>(we[t].forEach((n=>{e[n]=be[t]})),e)),{});const Ie=function(e=be){const t=Object.keys(e).reduce(((t,n)=>(e[n].filterProps.forEach((r=>{t[r]=e[n]})),t)),{});function n(e,n,r){const i={[e]:n,theme:r},s=t[e];return s?s(i):{[e]:n}}return function e(r){const{sx:i,theme:s={}}=r||{};if(!i)return null;function o(r){let i=r;if("function"===typeof r)i=r(s);else if("object"!==typeof r)return r;if(!i)return null;const o=(0,O.W8)(s.breakpoints),a=Object.keys(o);let c=o;return Object.keys(i).forEach((r=>{const o=(a=i[r],u=s,"function"===typeof a?a(u):a);var a,u;if(null!==o&&void 0!==o)if("object"===typeof o)if(t[r])c=(0,x.Z)(c,n(r,o,s));else{const t=(0,O.k9)({theme:s},o,(e=>({[r]:e})));!function(...e){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]),n=new Set(t);return e.every((e=>n.size===Object.keys(e).length))}(t,o)?c=(0,x.Z)(c,t):c[r]=e({sx:o,theme:s})}else c=(0,x.Z)(c,n(r,o,s))})),(0,O.L7)(a,c)}return Array.isArray(i)?i.map(o):o(i)}}();Ie.filterProps=["sx"];var _e=Ie;const Te=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Ee=["theme"],Se=["theme"];function ke(e){return 0===Object.keys(e).length}function Ae(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const Ce=(0,E.Z)();var xe=n(3230);const Ne=e=>Ae(e)&&"classes"!==e,Re=function(e={}){const{defaultTheme:t=Ce,rootShouldForwardProp:n=Ae,slotShouldForwardProp:s=Ae,styleFunctionSx:o=_e}=e;return(e,a={})=>{const{name:c,slot:u,skipVariantsResolver:l,skipSx:h,overridesResolver:d}=a,f=(0,i.Z)(a,Te),p=void 0!==l?l:u&&"Root"!==u||!1,m=h||!1;let g=Ae;"Root"===u?g=n:u&&(g=s);const y=function(e,t){return T(e,t)}(e,(0,r.Z)({shouldForwardProp:g,label:undefined},f)),v=(e,...n)=>{const s=n?n.map((e=>"function"===typeof e&&e.__emotion_real!==e?n=>{let{theme:s}=n,o=(0,i.Z)(n,Ee);return e((0,r.Z)({theme:ke(s)?t:s},o))}:e)):[];let a=e;c&&d&&s.push((e=>{const n=ke(e.theme)?t:e.theme,r=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(c,n);if(r){const t={};return Object.entries(r).forEach((([n,r])=>{t[n]="function"===typeof r?r(e):r})),d(e,t)}return null})),c&&!p&&s.push((e=>{const n=ke(e.theme)?t:e.theme;return((e,t,n,r)=>{var i,s;const{ownerState:o={}}=e,a=[],c=null==n||null==(i=n.components)||null==(s=i[r])?void 0:s.variants;return c&&c.forEach((n=>{let r=!0;Object.keys(n.props).forEach((t=>{o[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&a.push(t[C(n.props)])})),a})(e,((e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach((e=>{const t=C(e.props);r[t]=e.style})),r})(c,n),n,c)})),m||s.push((e=>{const n=ke(e.theme)?t:e.theme;return o((0,r.Z)({},e,{theme:n}))}));const u=s.length-n.length;if(Array.isArray(e)&&u>0){const t=new Array(u).fill("");a=[...e,...t],a.raw=[...e.raw,...t]}else"function"===typeof e&&e.__emotion_real!==e&&(a=n=>{let{theme:s}=n,o=(0,i.Z)(n,Se);return e((0,r.Z)({theme:ke(s)?t:s},o))});return y(a,...s)};return y.withConfig&&(v.withConfig=y.withConfig),v}}({defaultTheme:xe.Z,rootShouldForwardProp:Ne});var De=Re},1539:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7925);var i=n(6500),s=n(7294);var o=s.createContext(null);var a=function(e=null){const t=s.useContext(o);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n};const c=(0,i.Z)();var u=function(e=c){return a(e)};function l({props:e,name:t,defaultTheme:n}){const i=function(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,i):i}({theme:u(n),name:t,props:e});return i}var h=n(3230);function d({props:e,name:t}){return l({props:e,name:t,defaultTheme:h.Z})}},8216:function(e,t,n){"use strict";var r=n(8320);t.Z=r.Z},9327:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7294),i=n(6600);var s=function(e){const t=r.useRef(e);return(0,i.Z)((()=>{t.current=e})),r.useCallback(((...e)=>(0,t.current)(...e)),[])}},8031:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7294),i=n(7960);var s=function(e,t){return r.useMemo((()=>null==e&&null==t?null:n=>{(0,i.Z)(e,n),(0,i.Z)(t,n)}),[e,t])}},8791:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7294);let i,s=!0,o=!1;const a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(s=!0)}function u(){s=!1}function l(){"hidden"===this.visibilityState&&o&&(s=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return s||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!a[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var d=function(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",l,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(i),i=window.setTimeout((()=>{o=!1}),100),t.current=!1,!0)},ref:e}}},5408:function(e,t,n){"use strict";n.d(t,{L7:function(){return a},VO:function(){return r},W8:function(){return o},k9:function(){return s}});const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${r[e]}px)`};function s(e,t,n){const s=e.theme||{};if(Array.isArray(t)){const e=s.breakpoints||i;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"===typeof t){const e=s.breakpoints||i;return Object.keys(t).reduce(((i,s)=>{if(-1!==Object.keys(e.values||r).indexOf(s)){i[e.up(s)]=n(t[s],s)}else{const e=s;i[e]=t[e]}return i}),{})}return n(t)}function o(e={}){var t;return(null==e||null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function a(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},1796:function(e,t,n){"use strict";n.d(t,{$n:function(){return h},Fq:function(){return u},_j:function(){return l},mi:function(){return c}});var r=n(1387);function i(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function s(e){if(e.type)return e;if("#"===e.charAt(0))return s(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));let i,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),i=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:i}}function o(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function a(e){let t="hsl"===(e=s(e)).type?s(function(e){e=s(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),c=(e,t=(e+n/30)%12)=>i-a*Math.max(Math.min(t-3,9-t,1),-1);let u="rgb";const l=[Math.round(255*c(0)),Math.round(255*c(8)),Math.round(255*c(4))];return"hsla"===e.type&&(u+="a",l.push(t[3])),o({type:u,values:l})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e,t){const n=a(e),r=a(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e,t){return e=s(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,o(e)}function l(e,t){if(e=s(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function h(e,t){if(e=s(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return o(e)}},6500:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(7462),i=n(3366),s=n(9766);const o=["values","unit","step"];function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=e,a=(0,i.Z)(e,o),c=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,r.Z)({},e,{[t.key]:t.val})),{})})(t),u=Object.keys(c);function l(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function h(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-s/100}${n})`}function d(e,r){const i=u.indexOf(r);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-s/100}${n})`}return(0,r.Z)({keys:u,values:c,up:l,down:h,between:d,only:function(e){return u.indexOf(e)+1<u.length?d(e,u[u.indexOf(e)+1]):l(e)},not:function(e){const t=u.indexOf(e);return 0===t?l(u[1]):t===u.length-1?h(u[t]):d(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},a)}var c={borderRadius:4},u=n(8700);const l=["breakpoints","palette","spacing","shape"];var h=function(e={},...t){const{breakpoints:n={},palette:o={},spacing:h,shape:d={}}=e,f=(0,i.Z)(e,l),p=a(n),m=function(e=8){if(e.mui)return e;const t=(0,u.hB)({spacing:e}),n=(...e)=>(0===e.length?[1]:e).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ");return n.mui=!0,n}(h);let g=(0,s.Z)({breakpoints:p,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},o),spacing:m,shape:(0,r.Z)({},c,d)},f);return g=t.reduce(((e,t)=>(0,s.Z)(e,t)),g),g}},7730:function(e,t,n){"use strict";var r=n(9766);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},8700:function(e,t,n){"use strict";n.d(t,{hB:function(){return p},eI:function(){return f},ZP:function(){return I},NA:function(){return m}});var r=n(5408),i=n(4844),s=n(7730);const o={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!c[e])return[e];e=c[e]}const[t,n]=e.split(""),r=o[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),l=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...l,...h];function f(e,t,n,r){const s=(0,i.D)(e,t)||n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function p(e){return f(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:`-${n}`}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const s=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(u(n),i),o=e[n];return(0,r.k9)(e,o,s)}function y(e,t){const n=p(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(s.Z,{})}function v(e){return y(e,l)}function w(e){return y(e,h)}function b(e){return y(e,d)}v.propTypes={},v.filterProps=l,w.propTypes={},w.filterProps=h,b.propTypes={},b.filterProps=d;var I=b},4844:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var r=n(8320),i=n(5408);function s(e,t){return t&&"string"===typeof t?t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e):null}function o(e,t,n,r=n){let i;return i="function"===typeof e?e(n):Array.isArray(e)?e[n]||r:s(e,n)||r,t&&(i=t(i)),i}t.Z=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:c}=e,u=e=>{if(null==e[t])return null;const u=e[t],l=s(e.theme,a)||{};return(0,i.k9)(e,u,(e=>{let i=o(l,c,e);return e===i&&"string"===typeof e&&(i=o(l,c,`${t}${"default"===e?"":(0,r.Z)(e)}`,e)),!1===n?i:{[n]:i}}))};return u.propTypes={},u.filterProps=[t],u}},8320:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1387);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},9766:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function s(e,t,n={clone:!0}){const o=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?o[r]=s(e[r],t[r],n):o[r]=t[r])})),o}},1387:function(e,t,n){"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},7925:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7462);function i(e,t){const n=(0,r.Z)({},t);return Object.keys(e).forEach((t=>{void 0===n[t]&&(n[t]=e[t])})),n}},7960:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},6600:function(e,t,n){"use strict";var r=n(7294);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},6010:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})},1902:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(8180);r.Z.registerVersion("firebase","9.6.11","app-compat")},8679:function(e,t,n){"use strict";var r=n(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var u=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{u(t,y,v)}catch(w){}}}}return t}},3454:function(e,t,n){"use strict";var r,i;e.exports=(null===(r=n.g.process)||void 0===r?void 0:r.env)&&"object"===typeof(null===(i=n.g.process)||void 0===i?void 0:i.env)?n.g.process:n(7663)},1780:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(5512)}])},4656:function(e,t,n){"use strict";n.d(t,{I:function(){return Ie},db:function(){return be},A:function(){return _e}});var r=n(1902),i=n(8180),s=n(9003),o=n(4444),a=(n(2238),n(3333),n(8463));function c(){return window}async function u(e,t,n){var r;const{BuildInfo:i}=c();(0,s.ap)(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if((0,s.ap)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),a={};return(0,s.aq)()?a.ibi=i.packageName:(0,s.ar)()?a.apn=i.packageName:(0,s.as)(e,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=o,(0,s.at)(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,a)}class l extends s.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function h(e){const t=await p()._get(m(e));return t&&await p()._remove(m(e)),t}function d(e,t){var n,r;const i=function(e){const t=g(e),n=t.link?decodeURIComponent(t.link):void 0,r=g(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return g(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=g(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],c=a?(0,s.av)(a):null;return c?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function f(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function p(){return(0,s.ax)(s.b)}function m(e){return(0,s.ay)("authEvent",e.config.apiKey,e.name)}function g(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,o.zd)(n.join("?"))}const y=class{constructor(){this._redirectPersistence=s.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aA}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new l(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){(0,s.as)(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,a,u,l,h,d;const f=c();(0,s.aw)("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.aw)("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.aw)("function"===typeof(null===(o=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aw)("function"===typeof(null===(l=null===(u=null===(a=null===f||void 0===f?void 0:f.cordova)||void 0===a?void 0:a.plugins)||void 0===u?void 0:u.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aw)("function"===typeof(null===(d=null===(h=null===f||void 0===f?void 0:f.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),(0,s.aB)(),await this._originValidation(e);const o=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:f(),postBody:null,tenantId:e.tenantId,error:(0,s.av)(e,"no-auth-event")}}(e,n,r);await function(e,t){return p()._set(m(e),t)}(e,o);const a=await u(e,o,t);return async function(e,t,n){const{cordova:r}=c();let i=()=>{};try{await new Promise(((o,a)=>{let c=null;function u(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){c||(c=window.setTimeout((()=>{a((0,s.av)(e,"redirect-cancelled-by-user"))}),2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(u),document.addEventListener("resume",l,!1),(0,s.ar)()&&document.addEventListener("visibilitychange",h,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",h,!1),c&&window.clearTimeout(c)}}))}finally{i()}}(e,i,await function(e){const{cordova:t}=c();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,(0,s.ao)()?"_blank":"_system","location=yes"),n(i)}))}))}(a))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=c(),n={};(0,s.aq)()?n.iosBundleId=t.packageName:(0,s.ar)()?n.androidPackageName=t.packageName:(0,s.as)(e,"operation-not-supported-in-this-environment"),await(0,s.au)(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=c(),s=setTimeout((async()=>{await h(e),t.onEvent(v())}),500),o=async n=>{clearTimeout(s);const r=await h(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=d(r,n.url)),t.onEvent(i||v())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,u=`${i.packageName.toLowerCase()}://`;c().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(u)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function v(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.av)("no-auth-event")}}function w(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function b(e=(0,o.z$)()){return!("file:"!==w()&&"ionic:"!==w()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function I(e=(0,o.z$)()){return(0,o.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,o.z$)()){return/Edge\/\d+/.test(e)}(e)}function _(){try{const e=self.localStorage,t=s.aG();if(e)return e.setItem(t,"1"),e.removeItem(t),!I()||(0,o.hl)()}catch(e){return T()&&(0,o.hl)()}return!1}function T(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function E(){return("http:"===w()||"https:"===w()||(0,o.ru)()||b())&&!((0,o.b$)()||(0,o.UG)())&&_()&&!T()}function S(){return b()&&"undefined"!==typeof document}const k={LOCAL:"local",NONE:"none",SESSION:"session"},A=s.aw,C="persistence";async function x(e){await e._initializationPromise;const t=N(),n=s.ay(C,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function N(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const R=s.aw;class D{constructor(){this.browserResolver=s.ax(s.k),this.cordovaResolver=s.ax(y),this.underlyingResolver=null,this._redirectPersistence=s.a,this._completeRedirectFn=s.aA}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return S()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return R(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!S()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function O(e){return e.unwrap()}function P(e){const{_tokenResponse:t}=e instanceof o.ZR?e.customData:e;if(!t)return null;if(!(e instanceof o.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return s.P.credentialFromResult(e);const n=t.providerId;if(!n||n===s.o.PASSWORD)return null;let r;switch(n){case s.o.GOOGLE:r=s.N;break;case s.o.FACEBOOK:r=s.M;break;case s.o.GITHUB:r=s.Q;break;case s.o.TWITTER:r=s.V;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:a,nonce:c}=t;return i||o||e||a?a?n.startsWith("saml.")?s.aJ._create(n,a):s.I._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:i}):new s.T(n).credential({idToken:e,accessToken:i,rawNonce:c}):null}return e instanceof o.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function L(e,t){return t.catch((t=>{throw t instanceof o.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new F(e,s.am(e,t));else if(r){const e=P(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,P(r)),additionalUserInfo:s.ak(e),user:V.getOrCreate(n)};var r}))}async function M(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>L(e,n.confirm(t))}}class F{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return L(O(this.auth),this.resolver.resolveSignIn(e))}}class V{constructor(e){this._delegate=e,this.multiFactor=s.an(e)}static getOrCreate(e){return V.USER_MAP.has(e)||V.USER_MAP.set(e,new V(e)),V.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return L(this.auth,s.Y(this._delegate,e))}async linkWithPhoneNumber(e,t){return M(this.auth,s.l(this._delegate,e,t))}async linkWithPopup(e){return L(this.auth,s.d(this._delegate,e,D))}async linkWithRedirect(e){return await x(s.aC(this.auth)),s.g(this._delegate,e,D)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return L(this.auth,s.Z(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return M(this.auth,s.r(this._delegate,e,t))}reauthenticateWithPopup(e){return L(this.auth,s.e(this._delegate,e,D))}async reauthenticateWithRedirect(e){return await x(s.aC(this.auth)),s.h(this._delegate,e,D)}sendEmailVerification(e){return s.aa(this._delegate,e)}async unlink(e){return await s.aj(this._delegate,e),this}updateEmail(e){return s.af(this._delegate,e)}updatePassword(e){return s.ag(this._delegate,e)}updatePhoneNumber(e){return s.u(this._delegate,e)}updateProfile(e){return s.ae(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return s.ab(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}V.USER_MAP=new WeakMap;const U=s.aw;class j{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;U(n,"invalid-api-key",{appName:e.name}),U(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?D:void 0;this._delegate=t.initialize({options:{persistence:$(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(s.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?V.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){s.E(this._delegate,e,t)}applyActionCode(e){return s.a1(this._delegate,e)}checkActionCode(e){return s.a2(this._delegate,e)}confirmPasswordReset(e,t){return s.a0(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return L(this._delegate,s.a4(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return s.a9(this._delegate,e)}isSignInWithEmailLink(e){return s.a7(this._delegate,e)}async getRedirectResult(){U(E(),this._delegate,"operation-not-supported-in-this-environment");const e=await s.j(this._delegate,D);return e?L(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){(0,s.aC)(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=B(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=B(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return s.a6(this._delegate,e,t)}sendPasswordResetEmail(e,t){return s.$(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){A(Object.values(k).includes(t),e,"invalid-persistence-type"),(0,o.b$)()?A(t!==k.SESSION,e,"unsupported-persistence-type"):(0,o.UG)()?A(t===k.NONE,e,"unsupported-persistence-type"):T()?A(t===k.NONE||t===k.LOCAL&&(0,o.hl)(),e,"unsupported-persistence-type"):A(t===k.NONE||_(),e,"unsupported-persistence-type")}(this._delegate,e),e){case k.SESSION:t=s.a;break;case k.LOCAL:t=await s.ax(s.i)._isAvailable()?s.i:s.b;break;case k.NONE:t=s.K;break;default:return s.as("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return L(this._delegate,s.W(this._delegate))}signInWithCredential(e){return L(this._delegate,s.X(this._delegate,e))}signInWithCustomToken(e){return L(this._delegate,s._(this._delegate,e))}signInWithEmailAndPassword(e,t){return L(this._delegate,s.a5(this._delegate,e,t))}signInWithEmailLink(e,t){return L(this._delegate,s.a8(this._delegate,e,t))}signInWithPhoneNumber(e,t){return M(this._delegate,s.s(this._delegate,e,t))}async signInWithPopup(e){return U(E(),this._delegate,"operation-not-supported-in-this-environment"),L(this._delegate,s.c(this._delegate,e,D))}async signInWithRedirect(e){return U(E(),this._delegate,"operation-not-supported-in-this-environment"),await x(this._delegate),s.f(this._delegate,e,D)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return s.a3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function B(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&V.getOrCreate(e)),error:t,complete:n}}function $(e,t){const n=function(e,t){const n=N();if(!n)return[];const r=s.ay(C,e,t);switch(n.getItem(r)){case k.NONE:return[s.K];case k.LOCAL:return[s.i,s.a];case k.SESSION:return[s.a];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(s.i)||n.push(s.i),"undefined"!==typeof window)for(const r of[s.b,s.a])n.includes(r)||n.push(r);return n.includes(s.K)||n.push(s.K),n}j.Persistence=k;class q{constructor(){this.providerId="phone",this._delegate=new s.P(O(i.Z.auth()))}static credential(e,t){return s.P.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}q.PHONE_SIGN_IN_METHOD=s.P.PHONE_SIGN_IN_METHOD,q.PROVIDER_ID=s.P.PROVIDER_ID;const z=s.aw;class K{constructor(e,t,n=i.Z.app()){var r;z(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new s.R(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var G;(G=i.Z).INTERNAL.registerComponent(new a.wA("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new j(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.A.EMAIL_SIGNIN,PASSWORD_RESET:s.A.PASSWORD_RESET,RECOVER_EMAIL:s.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.A.VERIFY_EMAIL}},EmailAuthProvider:s.L,FacebookAuthProvider:s.M,GithubAuthProvider:s.Q,GoogleAuthProvider:s.N,OAuthProvider:s.T,SAMLAuthProvider:s.U,PhoneAuthProvider:q,PhoneMultiFactorGenerator:s.m,RecaptchaVerifier:K,TwitterAuthProvider:s.V,Auth:j,AuthCredential:s.G,Error:o.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),G.registerVersion("@firebase/auth-compat","0.2.12");var W=n(1294);function Z(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new W.WA("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function H(){if("undefined"===typeof Uint8Array)throw new W.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Y(){if(!(0,W.Me)())throw new W.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Q{constructor(e){this._delegate=e}static fromBase64String(e){return Y(),new Q(W.Jj.fromBase64String(e))}static fromUint8Array(e){return H(),new Q(W.Jj.fromUint8Array(e))}toBase64(){return Y(),this._delegate.toBase64()}toUint8Array(){return H(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function X(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class J{enableIndexedDbPersistence(e,t){return(0,W.ST)(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return(0,W.fH)(e._delegate)}clearIndexedDbPersistence(e){return(0,W.Fc)(e._delegate)}}class ee{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof W.l7||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||(0,W.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){(0,W.at)(this._delegate,e,t,n)}enableNetwork(){return(0,W.Ix)(this._delegate)}disableNetwork(){return(0,W.TF)(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,(0,W.Wi)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,W.Mx)(this._delegate)}onSnapshotsInSync(e){return(0,W.sc)(this._delegate,e)}get app(){if(!this._appCompat)throw new W.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pe(this,(0,W.hJ)(this._delegate,e))}catch(t){throw oe(t,"collection()","Firestore.collection()")}}doc(e){try{return new se(this,(0,W.JU)(this._delegate,e))}catch(t){throw oe(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new he(this,(0,W.B$)(this._delegate,e))}catch(t){throw oe(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return(0,W.i3)(this._delegate,(t=>e(new ne(this,t))))}batch(){return(0,W.qY)(this._delegate),new re(new W.PU(this._delegate,(e=>(0,W.GL)(this._delegate,e))))}loadBundle(e){return(0,W.Pb)(this._delegate,e)}namedQuery(e){return(0,W.L$)(this._delegate,e).then((e=>e?new he(this,e):null))}}class te extends W.u7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Q(new W.Jj(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return se.forKey(t,this.firestore,null)}}class ne{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new te(e)}get(e){const t=me(e);return this._delegate.get(t).then((e=>new ue(this._firestore,new W.xU(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=me(e);return n?(Z("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=me(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=me(e);return this._delegate.delete(t),this}}class re{constructor(e){this._delegate=e}set(e,t,n){const r=me(e);return n?(Z("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=me(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=me(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ie{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new W.$q(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new le(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=ie.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new ie(e,new te(e),t),r.set(t,i)),i}}ie.INSTANCES=new WeakMap;class se{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new te(e)}static forPath(e,t,n){if(e.length%2!==0)throw new W.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new se(t,new W.my(t._delegate,n,new W.Ky(e)))}static forKey(e,t,n){return new se(t,new W.my(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new pe(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pe(this.firestore,(0,W.hJ)(this._delegate,e))}catch(t){throw oe(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,o.m9)(e))instanceof W.my&&(0,W.Eo)(this._delegate,e)}set(e,t){t=Z("DocumentReference.set",t);try{return t?(0,W.pl)(this._delegate,e,t):(0,W.pl)(this._delegate,e)}catch(n){throw oe(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?(0,W.r7)(this._delegate,e):(0,W.r7)(this._delegate,e,t,...n)}catch(r){throw oe(r,"updateDoc()","DocumentReference.update()")}}delete(){return(0,W.oe)(this._delegate)}onSnapshot(...e){const t=ae(e),n=ce(e,(e=>new ue(this.firestore,new W.xU(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return(0,W.cf)(this._delegate,t,n)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?(0,W.kl)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?(0,W.Xk)(this._delegate):(0,W.QT)(this._delegate),t.then((e=>new ue(this.firestore,new W.xU(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new se(this.firestore,e?this._delegate.withConverter(ie.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function oe(e,t,n){return e.message=e.message.replace(t,n),e}function ae(e){for(const t of e)if("object"===typeof t&&!X(t))return t;return{}}function ce(e,t){var n,r;let i;return i=X(e[0])?e[0]:X(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ue{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new se(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return(0,W.qK)(this._delegate,e._delegate)}}class le extends ue{data(e){const t=this._delegate.data(e);return(0,W.K9)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class he{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new te(e)}where(e,t,n){try{return new he(this.firestore,(0,W.IO)(this._delegate,(0,W.ar)(e,t,n)))}catch(r){throw oe(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new he(this.firestore,(0,W.IO)(this._delegate,(0,W.Xo)(e,t)))}catch(n){throw oe(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new he(this.firestore,(0,W.IO)(this._delegate,(0,W.b9)(e)))}catch(t){throw oe(t,"limit()","Query.limit()")}}limitToLast(e){try{return new he(this.firestore,(0,W.IO)(this._delegate,(0,W.vh)(e)))}catch(t){throw oe(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new he(this.firestore,(0,W.IO)(this._delegate,(0,W.e0)(...e)))}catch(t){throw oe(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new he(this.firestore,(0,W.IO)(this._delegate,(0,W.TQ)(...e)))}catch(t){throw oe(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new he(this.firestore,(0,W.IO)(this._delegate,(0,W.Lx)(...e)))}catch(t){throw oe(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new he(this.firestore,(0,W.IO)(this._delegate,(0,W.Wu)(...e)))}catch(t){throw oe(t,"endAt()","Query.endAt()")}}isEqual(e){return(0,W.iE)(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?(0,W.UQ)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?(0,W.zN)(this._delegate):(0,W.PL)(this._delegate),t.then((e=>new fe(this.firestore,new W.W(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=ae(e),n=ce(e,(e=>new fe(this.firestore,new W.W(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return(0,W.cf)(this._delegate,t,n)}withConverter(e){return new he(this.firestore,e?this._delegate.withConverter(ie.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class de{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new le(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fe{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new he(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new le(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new de(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new le(this._firestore,n))}))}isEqual(e){return(0,W.qK)(this._delegate,e._delegate)}}class pe extends he{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new se(this.firestore,e):null}doc(e){try{return new se(this.firestore,void 0===e?(0,W.JU)(this._delegate):(0,W.JU)(this._delegate,e))}catch(t){throw oe(t,"doc()","CollectionReference.doc()")}}add(e){return(0,W.ET)(this._delegate,e).then((e=>new se(this.firestore,e)))}isEqual(e){return(0,W.Eo)(this._delegate,e._delegate)}withConverter(e){return new pe(this.firestore,e?this._delegate.withConverter(ie.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function me(e){return(0,W.Cf)(e,W.my)}class ge{constructor(...e){this._delegate=new W.Lz(...e)}static documentId(){return new ge(W.Xb.keyField().canonicalString())}isEqual(e){return(e=(0,o.m9)(e))instanceof W.Lz&&this._delegate._internalPath.isEqual(e._internalPath)}}class ye{constructor(e){this._delegate=e}static serverTimestamp(){const e=(0,W.Bt)();return e._methodName="FieldValue.serverTimestamp",new ye(e)}static delete(){const e=(0,W.AK)();return e._methodName="FieldValue.delete",new ye(e)}static arrayUnion(...e){const t=(0,W.vr)(...e);return t._methodName="FieldValue.arrayUnion",new ye(t)}static arrayRemove(...e){const t=(0,W.Ab)(...e);return t._methodName="FieldValue.arrayRemove",new ye(t)}static increment(e){const t=(0,W.nP)(e);return t._methodName="FieldValue.increment",new ye(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ve={Firestore:ee,GeoPoint:W.F8,Timestamp:W.EK,Blob:Q,Transaction:ne,WriteBatch:re,DocumentReference:se,DocumentSnapshot:ue,Query:he,QueryDocumentSnapshot:le,QuerySnapshot:fe,CollectionReference:pe,FieldPath:ge,FieldValue:ye,setLogLevel:function(e){(0,W.Ub)(e)},CACHE_SIZE_UNLIMITED:W.IX};!function(e){var t;t=(e,t)=>new ee(e,t,new J),e.INTERNAL.registerComponent(new a.wA("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ve))),e.registerVersion("@firebase/firestore-compat","0.1.17")}(i.Z);var we=r.Z.apps.length?r.Z.app():r.Z.initializeApp({apiKey:"AIzaSyBn9Rxb20UJ4eKEPy4JfAIJhzBtSTkbH_g",authDomain:"whatsapp-2-salman.firebaseapp.com",projectId:"whatsapp-2-salman",storageBucket:"whatsapp-2-salman.appspot.com",messagingSenderId:"206471714317",appId:"1:206471714317:web:95e720c9b99d5ba61ee744"}),be=we.firestore(),Ie=we.auth(),_e=new r.Z.auth.GoogleAuthProvider},5512:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(5893),i=(n(6774),n(974)),s=n(4656),o=n(4754);var a=function(){return(0,r.jsx)("center",{children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:"http://assets.stickpng.com/images/580b57fcd9996e24bc43c543.png",alt:"",style:{marginBottom:10},height:"200"})})})},c=n(7294),u=n(1902);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(c){a=!0,i=c}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){var t=e.Component,n=e.pageProps,l=d((0,i.F_)(s.I),2),f=l[0],p=l[1];return(0,c.useEffect)((function(){f&&s.db.collection("users").doc(f.uid).set({email:f.email,lastSeen:u.Z.firestore.FieldValue.serverTimestamp(),photoURL:f.photoURL},{merge:!0})}),[f]),p?(0,r.jsx)(a,{}):f?(0,r.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},n)):(0,r.jsx)(o.default,{})}},4754:function(e,t,n){"use strict";n.r(t);var r=n(5893),i=n(3321),s=n(9008),o=n(3918),a=n(4656);function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(){var e=c(["\n  display: grid;\n  place-items: center;\n  height: 100vh;\n  background-color: whitesmoke;\n"]);return u=function(){return e},e}function l(){var e=c(["\n  display: flex;\n  flex-direction: column;\n  padding: 100px;\n  align-items: center;\n  background-color: white;\n  border-radius: 5px;\n  box-shadow: 0px 4px 14px -3px rgba(0,0,0,0.7);\n  button {\n    color: black;\n  }\n"]);return l=function(){return e},e}function h(){var e=c(["\n  width: 200px;\n  height: 200px;\n  margin-bottom: 50px;\n"]);return h=function(){return e},e}t.default=function(){return(0,r.jsxs)(d,{children:[(0,r.jsx)(s.default,{children:(0,r.jsx)("title",{children:"Login"})}),(0,r.jsxs)(f,{children:[(0,r.jsx)(p,{src:"http://assets.stickpng.com/images/580b57fcd9996e24bc43c543.png"}),(0,r.jsx)(i.Z,{onClick:function(){a.I.signInWithPopup(a.A).catch(alert)},variant:"outlined",children:" Sign in with Google"})]})]})};var d=o.ZP.div(u()),f=o.ZP.div(l()),p=o.ZP.img(h())},6774:function(){},7663:function(e){!function(){var t={162:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,c=[],u=!1,l=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&d())}function d(){if(!u){var e=o(h);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,r),o=!1}finally{o&&delete n[e]}return s.exports}r.ab="//";var i=r(162);e.exports=i}()},9008:function(e,t,n){e.exports=n(3121)},974:function(e,t,n){"use strict";n.d(t,{F_:function(){return l}});var r=n(9003),i=(n(4444),n(2238),n(3333),n(8463),n(7294));function s(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},c=function(e){return{loading:void 0===e||null===e,value:e}},u=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return a(a({},e),{error:t.error,loading:!1,value:void 0});case"reset":return c(t.defaultValue);case"value":return a(a({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),c(t)),r=n[0],s=n[1],o=function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})},u=function(e){s({type:"error",error:e})},l=function(e){s({type:"value",value:e})};return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:u,setValue:l,value:r.value}}),[r.error,r.loading,o,u,l,r.value])},l=function(e,t){var n=u((function(){return e.currentUser})),a=n.error,c=n.loading,l=n.setError,h=n.setValue,d=n.value;(0,i.useEffect)((function(){var n=(0,r.t)(e,(function(e){return s(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),l(n),[3,4];case 4:return h(e),[2]}}))}))}),l);return function(){n()}}),[e]);var f=[d,c,a];return(0,i.useMemo)((function(){return f}),f)}},9921:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function I(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function _(e){return I(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return _(e)||I(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return I(e)===u},t.isContextProvider=function(e){return I(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return I(e)===d},t.isFragment=function(e){return I(e)===s},t.isLazy=function(e){return I(e)===g},t.isMemo=function(e){return I(e)===m},t.isPortal=function(e){return I(e)===i},t.isProfiler=function(e){return I(e)===a},t.isStrictMode=function(e){return I(e)===o},t.isSuspense=function(e){return I(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=I},9864:function(e,t,n){"use strict";e.exports=n(9921)},1032:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var u=s[c];if(!a(u))return!1;var l=e[u],h=t[u];if(!1===(i=n?n.call(r,l,h,u):void 0)||void 0===i&&l!==h)return!1}return!0}},3918:function(e,t,n){"use strict";n.d(t,{ZP:function(){return De}});var r=n(9864),i=n(7294),s=n(1032),o=n.n(s);var a=function(e){function t(e,r,c,u,d){for(var f,p,m,g,b,_=0,T=0,E=0,S=0,k=0,D=0,P=m=f=0,M=0,F=0,V=0,U=0,j=c.length,B=j-1,$="",q="",z="",K="";M<j;){if(p=c.charCodeAt(M),M===B&&0!==T+S+E+_&&(0!==T&&(p=47===T?10:47),S=E=_=0,j++,B++),0===T+S+E+_){if(M===B&&(0<F&&($=$.replace(h,"")),0<$.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:$+=c.charAt(M)}p=59}switch(p){case 123:for(f=($=$.trim()).charCodeAt(0),m=1,U=++M;M<j;){switch(p=c.charCodeAt(M)){case 123:m++;break;case 125:m--;break;case 47:switch(p=c.charCodeAt(M+1)){case 42:case 47:e:{for(P=M+1;P<B;++P)switch(c.charCodeAt(P)){case 47:if(42===p&&42===c.charCodeAt(P-1)&&M+2!==P){M=P+1;break e}break;case 10:if(47===p){M=P+1;break e}}M=P}}break;case 91:p++;case 40:p++;case 34:case 39:for(;M++<B&&c.charCodeAt(M)!==p;);}if(0===m)break;M++}if(m=c.substring(U,M),0===f&&(f=($=$.replace(l,"").trim()).charCodeAt(0)),64===f){switch(0<F&&($=$.replace(h,"")),p=$.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=R}if(U=(m=t(r,F,m,p,d+1)).length,0<O&&(b=a(3,m,F=n(R,$,V),r,C,A,U,p,d,u),$=F.join(""),void 0!==b&&0===(U=(m=b.trim()).length)&&(p=0,m="")),0<U)switch(p){case 115:$=$.replace(I,o);case 100:case 109:case 45:m=$+"{"+m+"}";break;case 107:m=($=$.replace(y,"$1 $2"))+"{"+m+"}",m=1===N||2===N&&s("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=$+m,112===u&&(q+=m,m="")}else m=""}else m=t(r,n(r,$,V),m,u,d+1);z+=m,m=V=F=P=f=0,$="",p=c.charCodeAt(++M);break;case 125:case 59:if(1<(U=($=(0<F?$.replace(h,""):$).trim()).length))switch(0===P&&(f=$.charCodeAt(0),45===f||96<f&&123>f)&&(U=($=$.replace(" ",":")).length),0<O&&void 0!==(b=a(1,$,r,e,C,A,q.length,u,d,u))&&0===(U=($=b.trim()).length)&&($="\0\0"),f=$.charCodeAt(0),p=$.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){K+=$+c.charAt(M);break}default:58!==$.charCodeAt(U-1)&&(q+=i($,f,p,$.charCodeAt(2)))}V=F=P=f=0,$="",p=c.charCodeAt(++M)}}switch(p){case 13:case 10:47===T?T=0:0===1+f&&107!==u&&0<$.length&&(F=1,$+="\0"),0<O*L&&a(0,$,r,e,C,A,q.length,u,d,u),A=1,C++;break;case 59:case 125:if(0===T+S+E+_){A++;break}default:switch(A++,g=c.charAt(M),p){case 9:case 32:if(0===S+_+T)switch(k){case 44:case 58:case 9:case 32:g="";break;default:32!==p&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===S+T+_&&(F=V=1,g="\f"+g);break;case 108:if(0===S+T+_+x&&0<P)switch(M-P){case 2:112===k&&58===c.charCodeAt(M-3)&&(x=k);case 8:111===D&&(x=D)}break;case 58:0===S+T+_&&(P=M);break;case 44:0===T+E+S+_&&(F=1,g+="\r");break;case 34:case 39:0===T&&(S=S===p?0:0===S?p:S);break;case 91:0===S+T+E&&_++;break;case 93:0===S+T+E&&_--;break;case 41:0===S+T+_&&E--;break;case 40:if(0===S+T+_){if(0===f)if(2*k+3*D===533);else f=1;E++}break;case 64:0===T+E+S+_+P+m&&(m=1);break;case 42:case 47:if(!(0<S+_+E))switch(T){case 0:switch(2*p+3*c.charCodeAt(M+1)){case 235:T=47;break;case 220:U=M,T=42}break;case 42:47===p&&42===k&&U+2!==M&&(33===c.charCodeAt(U+2)&&(q+=c.substring(U,M+1)),g="",T=0)}}0===T&&($+=g)}D=k,k=p,M++}if(0<(U=q.length)){if(F=r,0<O&&(void 0!==(b=a(2,q,F,e,C,A,U,u,d,u))&&0===(q=b).length))return K+q+z;if(q=F.join(",")+"{"+q+"}",0!==N*x){switch(2!==N||s(q,2)||(x=0),x){case 111:q=q.replace(w,":-moz-$1")+q;break;case 112:q=q.replace(v,"::-webkit-input-$1")+q.replace(v,"::-moz-$1")+q.replace(v,":-ms-input-$1")+q}x=0}}return K+q+z}function n(e,t,n){var i=t.trim().split(m);t=i;var s=i.length,o=e.length;switch(o){case 0:case 1:var a=0;for(e=0===o?"":e[0]+" ";a<s;++a)t[a]=r(e,t[a],n).trim();break;default:var c=a=0;for(t=[];a<s;++a)for(var u=0;u<o;++u)t[c++]=r(e[u]+" ",i[a],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",a=2*t+3*n+4*r;if(944===a){e=o.indexOf(":",9)+1;var c=o.substring(e,o.length-1).trim();return c=o.substring(0,e).trim()+c+";",1===N||2===N&&s(c,1)?"-webkit-"+c+c:c}if(0===N||2===N&&!s(o,1))return o;switch(a){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(k,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(c=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+c+o;case 1005:return f.test(o)?o.replace(d,":-webkit-")+o.replace(d,":-moz-")+o:o;case 1e3:switch(t=(c=o.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(t)){case 226:c=o.replace(b,"tb");break;case 232:c=o.replace(b,"tb-rl");break;case 220:c=o.replace(b,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+c+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,a=(c=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:o=o.replace(c,"-webkit-"+c)+";"+o;break;case 207:case 102:o=o.replace(c,"-webkit-"+(102<a?"inline-":"")+"box")+";"+o.replace(c,"-webkit-"+c)+";"+o.replace(c,"-ms-"+c+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return c=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+c+"-ms-flex-"+c+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(T,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(T,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(c,"-webkit-"+c)+o.replace(c,"-moz-"+c.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function s(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),P(2!==t?r:r.replace(E,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(_," or ($1)").substring(4):"("+t+")"}function a(e,t,n,r,i,s,o,a,c,l){for(var h,d=0,f=t;d<O;++d)switch(h=D[d].call(u,e,f,n,r,i,s,o,a,c,l)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==t)return f}function c(e){return void 0!==(e=e.prefix)&&(P=null,e?"function"!==typeof e?N=1:(N=2,P=e):N=0),c}function u(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<O){var i=a(-1,n,r,r,C,A,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var s=t(R,r,n,0,0);return 0<O&&(void 0!==(i=a(-2,s,r,r,C,A,s.length,0,0,0))&&(s=i)),"",x=0,A=C=1,s}var l=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,w=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,I=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,T=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,k=/([^-])(image-set\()/,A=1,C=1,x=0,N=1,R=[],D=[],O=0,P=null,L=0;return u.use=function e(t){switch(t){case void 0:case null:O=D.length=0;break;default:if("function"===typeof t)D[O++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},u.set=c,void 0!==e&&c(e),u},c=n(351),u=n(9122),l=n(8679),h=n.n(l),d=n(3454);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},m=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,r.typeOf)(e)},g=Object.freeze([]),y=Object.freeze({});function v(e){return"function"==typeof e}function w(e){return e.displayName||e.name||"Component"}function b(e){return e&&"string"==typeof e.styledComponentId}var I="undefined"!=typeof d&&(d.env.REACT_APP_SC_ATTR||d.env.SC_ATTR)||"data-styled",_="undefined"!=typeof window&&"HTMLElement"in window,T=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof d&&void 0!==d.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==d.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==d.env.REACT_APP_SC_DISABLE_SPEEDY&&d.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof d&&void 0!==d.env.SC_DISABLE_SPEEDY&&""!==d.env.SC_DISABLE_SPEEDY&&("false"!==d.env.SC_DISABLE_SPEEDY&&d.env.SC_DISABLE_SPEEDY));function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var S=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&E(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=0,c=t.length;a<c;a++)this.tag.insertRule(o,t[a])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+=this.tag.getRule(s)+"/*!sc*/\n";return t},e}(),k=new Map,A=new Map,C=1,x=function(e){if(k.has(e))return k.get(e);for(;A.has(C);)C++;var t=C++;return k.set(e,t),A.set(t,e),t},N=function(e){return A.get(e)},R=function(e,t){t>=C&&(C=t+1),k.set(e,t),A.set(t,e)},D="style["+I+'][data-styled-version="5.3.5"]',O=new RegExp("^"+I+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),P=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},L=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,s=n.length;i<s;i++){var o=n[i].trim();if(o){var a=o.match(O);if(a){var c=0|parseInt(a[1],10),u=a[2];0!==c&&(R(u,c),P(e,u,a[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(o)}}},M=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},F=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(I))return r}}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(I,"active"),r.setAttribute("data-styled-version","5.3.5");var o=M();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},V=function(){function e(e){var t=this.element=F(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}E(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),U=function(){function e(e){var t=this.element=F(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),j=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),B=_,$={isServer:!_,useCSSOMInjection:!T},q=function(){function e(e,t,n){void 0===e&&(e=y),void 0===t&&(t={}),this.options=f({},$,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&_&&B&&(B=!1,function(e){for(var t=document.querySelectorAll(D),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(I)&&(L(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return x(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(f({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new j(i):r?new V(i):new U(i),new S(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(x(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(x(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(x(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var s=N(i);if(void 0!==s){var o=e.names.get(s),a=t.getGroup(i);if(o&&a&&o.size){var c=I+".g"+i+'[id="'+s+'"]',u="";void 0!==o&&o.forEach((function(e){e.length>0&&(u+=e+",")})),r+=""+a+c+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),z=/(a)(d)/gi,K=function(e){return String.fromCharCode(e+(e>25?39:97))};function G(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=K(t%52)+n;return(K(t%52)+n).replace(z,"$1-$2")}var W=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Z=function(e){return W(5381,e)};function H(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(v(n)&&!b(n))return!1}return!0}var Y=Z("5.3.5"),Q=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&H(e),this.componentId=t,this.baseHash=W(Y,t),this.baseStyle=n,q.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var s=me(this.rules,e,t,n).join(""),o=G(W(this.baseHash,s)>>>0);if(!t.hasNameForId(r,o)){var a=n(s,"."+o,void 0,r);t.insertRules(r,o,a)}i.push(o),this.staticRulesId=o}else{for(var c=this.rules.length,u=W(this.baseHash,n.hash),l="",h=0;h<c;h++){var d=this.rules[h];if("string"==typeof d)l+=d;else if(d){var f=me(d,e,t,n),p=Array.isArray(f)?f.join(""):f;u=W(u,p+h),l+=p}}if(l){var m=G(u>>>0);if(!t.hasNameForId(r,m)){var g=n(l,"."+m,void 0,r);t.insertRules(r,m,g)}i.push(m)}}return i.join(" ")},e}(),X=/^\s*\/\/.*$/gm,J=[":","[",".","#"];function ee(e){var t,n,r,i,s=void 0===e?y:e,o=s.options,c=void 0===o?y:o,u=s.plugins,l=void 0===u?g:u,h=new a(c),d=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,s,o,a,c,u,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),p=function(e,r,s){return 0===r&&-1!==J.indexOf(s[n.length])||s.match(i)?e:"."+t};function m(e,s,o,a){void 0===a&&(a="&");var c=e.replace(X,""),u=s&&o?o+" "+s+" { "+c+" }":c;return t=a,n=s,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),h(o||!s?"":s,u)}return h.use([].concat(l,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,p))},f,function(e){if(-2===e){var t=d;return d=[],t}}])),m.hash=l.length?l.reduce((function(e,t){return t.name||E(15),W(e,t.name)}),5381).toString():"",m}var te=i.createContext(),ne=(te.Consumer,i.createContext()),re=(ne.Consumer,new q),ie=ee();function se(){return(0,i.useContext)(te)||re}function oe(){return(0,i.useContext)(ne)||ie}function ae(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],s=se(),a=(0,i.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),c=(0,i.useMemo)((function(){return ee({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){o()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(te.Provider,{value:a},i.createElement(ne.Provider,{value:c},e.children))}var ce=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ie);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return E(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ie),this.name+e.hash},e}(),ue=/([A-Z])/,le=/([A-Z])/g,he=/^ms-/,de=function(e){return"-"+e.toLowerCase()};function fe(e){return ue.test(e)?e.replace(le,de).replace(he,"-ms-"):e}var pe=function(e){return null==e||!1===e||""===e};function me(e,t,n,r){if(Array.isArray(e)){for(var i,s=[],o=0,a=e.length;o<a;o+=1)""!==(i=me(e[o],t,n,r))&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}return pe(e)?"":b(e)?"."+e.styledComponentId:v(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:me(e(t),t,n,r):e instanceof ce?n?(e.inject(n,r),e.getName(r)):e:m(e)?function e(t,n){var r,i,s=[];for(var o in t)t.hasOwnProperty(o)&&!pe(t[o])&&(Array.isArray(t[o])&&t[o].isCss||v(t[o])?s.push(fe(o)+":",t[o],";"):m(t[o])?s.push.apply(s,e(t[o],o)):s.push(fe(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in c.Z?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(s,["}"]):s}(e):e.toString();var u}var ge=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e)||m(e)?ge(me(p(g,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:ge(me(p(e,n)))}new Set;var ve=function(e,t,n){return void 0===n&&(n=y),e.theme!==n.theme&&e.theme||t||n.theme},we=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,be=/(^-|-$)/g;function Ie(e){return e.replace(we,"-").replace(be,"")}var _e=function(e){return G(Z(e)>>>0)};function Te(e){return"string"==typeof e&&!0}var Ee=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Se=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function ke(e,t,n){var r=e[n];Ee(t)&&Ee(r)?Ae(r,t):e[n]=t}function Ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];if(Ee(o))for(var a in o)Se(a)&&ke(e,o[a],a)}return e}var Ce=i.createContext();Ce.Consumer;var xe={};function Ne(e,t,n){var r=b(e),s=!Te(e),o=t.attrs,a=void 0===o?g:o,c=t.componentId,l=void 0===c?function(e,t){var n="string"!=typeof e?"sc":Ie(e);xe[n]=(xe[n]||0)+1;var r=n+"-"+_e("5.3.5"+n+xe[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):c,d=t.displayName,p=void 0===d?function(e){return Te(e)?"styled."+e:"Styled("+w(e)+")"}(e):d,m=t.displayName&&t.componentId?Ie(t.displayName)+"-"+t.componentId:t.componentId||l,I=r&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,_=t.shouldForwardProp;r&&e.shouldForwardProp&&(_=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var T,E=new Q(n,m,r?e.componentStyle:void 0),S=E.isStatic&&0===a.length,k=function(e,t){return function(e,t,n,r){var s=e.attrs,o=e.componentStyle,a=e.defaultProps,c=e.foldedComponentIds,l=e.shouldForwardProp,h=e.styledComponentId,d=e.target,p=function(e,t,n){void 0===e&&(e=y);var r=f({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,s,o=e;for(t in v(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],s=o[t],n&&s?n+" "+s:n||s):o[t]})),[r,i]}(ve(t,(0,i.useContext)(Ce),a)||y,t,s),m=p[0],g=p[1],w=function(e,t,n,r){var i=se(),s=oe();return t?e.generateAndInjectStyles(y,i,s):e.generateAndInjectStyles(n,i,s)}(o,r,m),b=n,I=g.$as||t.$as||g.as||t.as||d,_=Te(I),T=g!==t?f({},t,{},g):t,E={};for(var S in T)"$"!==S[0]&&"as"!==S&&("forwardedAs"===S?E.as=T[S]:(l?l(S,u.Z,I):!_||(0,u.Z)(S))&&(E[S]=T[S]));return t.style&&g.style!==t.style&&(E.style=f({},t.style,{},g.style)),E.className=Array.prototype.concat(c,h,w!==h?w:null,t.className,g.className).filter(Boolean).join(" "),E.ref=b,(0,i.createElement)(I,E)}(T,e,t,S)};return k.displayName=p,(T=i.forwardRef(k)).attrs=I,T.componentStyle=E,T.displayName=p,T.shouldForwardProp=_,T.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):g,T.styledComponentId=m,T.target=r?e.target:e,T.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),s=r&&r+"-"+(Te(e)?e:Ie(w(e)));return Ne(e,f({},i,{attrs:I,componentId:s}),n)},Object.defineProperty(T,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ae({},e.defaultProps,t):t}}),T.toString=function(){return"."+T.styledComponentId},s&&h()(T,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),T}var Re=function(e){return function e(t,n,i){if(void 0===i&&(i=y),!(0,r.isValidElementType)(n))return E(1,String(n));var s=function(){return t(n,i,ye.apply(void 0,arguments))};return s.withConfig=function(r){return e(t,n,f({},i,{},r))},s.attrs=function(r){return e(t,n,f({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},s}(Ne,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Re[e]=Re(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=H(e),q.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(me(this.rules,t,n,r).join(""),""),s=this.componentId+e;n.insertRules(s,s,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&q.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=M();return"<style "+[n&&'nonce="'+n+'"',I+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?E(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return E(2);var n=((t={})[I]="",t["data-styled-version"]="5.3.5",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=M();return r&&(n.nonce=r),[i.createElement("style",f({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new q({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?E(2):i.createElement(ae,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return E(3)}}();var De=Re},7462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},8180:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(4444),i=n(8463),s=n(2238),o=n(3333);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate))))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const c={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},u=new r.LL("app-compat","Firebase",c);const l=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const c=new e(a,n);return t[a.name]=c,c},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!==typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(e=e||s._DEFAULT_ENTRY_NAME,!(0,r.r3)(t,e))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),h=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const d=l;var f;(0,s.registerVersion)("@firebase/app-compat","0.1.22",f)},2238:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return s.ZR},SDK_VERSION:function(){return T},_DEFAULT_ENTRY_NAME:function(){return l},_addComponent:function(){return p},_addOrOverwriteComponent:function(){return m},_apps:function(){return d},_clearComponents:function(){return w},_components:function(){return f},_getProvider:function(){return y},_registerComponent:function(){return g},_removeServiceInstance:function(){return v},deleteApp:function(){return A},getApp:function(){return S},getApps:function(){return k},initializeApp:function(){return E},onLog:function(){return x},registerVersion:function(){return C},setLogLevel:function(){return N}});var r=n(8463),i=n(3333),s=n(4444);class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const a="@firebase/app",c="0.7.21",u=new i.Yd("@firebase/app"),l="[DEFAULT]",h={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,f=new Map;function p(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function g(e){const t=e.name;if(f.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const n of d.values())p(n,e);return!0}function y(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function v(e,t,n=l){y(e,t).clearInstance(n)}function w(){f.clear()}const b={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},I=new s.LL("app","Firebase",b);class _{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw I.create("app-deleted",{appName:this._name})}}const T="9.6.11";function E(e,t={}){if("object"!==typeof t){t={name:t}}const n=Object.assign({name:l,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!==typeof i||!i)throw I.create("bad-app-name",{appName:String(i)});const o=d.get(i);if(o){if((0,s.vZ)(e,o.options)&&(0,s.vZ)(n,o.config))return o;throw I.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const r of f.values())a.addComponent(r);const c=new _(e,n,a);return d.set(i,c),c}function S(e=l){const t=d.get(e);if(!t)throw I.create("no-app",{appName:e});return t}function k(){return Array.from(d.values())}async function A(e){const t=e.name;d.has(t)&&(d.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function C(e,t,n){var i;let s=null!==(i=h[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}g(new r.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}function x(e,t){if(null!==e&&"function"!==typeof e)throw I.create("invalid-log-argument");(0,i.Am)(e,t)}function N(e){(0,i.Ub)(e)}const R="firebase-heartbeat-store";let D=null;function O(){return D||(D=(0,s.X3)("firebase-heartbeat-database",1,((e,t)=>{if(0===t)e.createObjectStore(R)})).catch((e=>{throw I.create("storage-open",{originalErrorMessage:e.message})}))),D}async function P(e,t){try{const n=(await O()).transaction(R,"readwrite"),r=n.objectStore(R);return await r.put(t,L(e)),n.complete}catch(n){throw I.create("storage-set",{originalErrorMessage:n.message})}}function L(e){return`${e.name}!${e.options.appId}`}class M{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new V(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=F();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=F(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),U(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),U(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,s.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function F(){return(new Date).toISOString().substring(0,10)}class V{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{return(await O()).transaction(R).objectStore(R).get(L(e))}catch(t){throw I.create("storage-get",{originalErrorMessage:t.message})}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return P(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return P(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function U(e){return(0,s.L)(JSON.stringify({version:2,heartbeats:e})).length}var j;j="",g(new r.wA("platform-logger",(e=>new o(e)),"PRIVATE")),g(new r.wA("heartbeat",(e=>new M(e)),"PRIVATE")),C(a,c,j),C(a,c,"esm2017"),C("fire-js","")},8463:function(e,t,n){"use strict";n.d(t,{H0:function(){return a},wA:function(){return i}});var r=n(4444);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===s?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3333:function(e,t,n){"use strict";n.d(t,{Am:function(){return h},Ub:function(){return l},Yd:function(){return u},in:function(){return i}});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function l(e){r.forEach((t=>{t.setLogLevel(e)}))}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],(function(){return t(1780),t(880)}));var n=e.O();_N_E=n}]);